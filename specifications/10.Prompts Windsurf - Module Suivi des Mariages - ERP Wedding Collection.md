# Prompts Windsurf - Module Suivi des Mariages - ERP Wedding Collection

## Vue d'Ensemble du Module

Le module Suivi des Mariages constitue le c≈ìur op√©rationnel de l'ERP Wedding Collection, permettant aux wedding planners de centraliser et orchestrer l'ensemble du processus d'organisation d'un mariage. Ce module complexe illustre parfaitement l'application de notre m√©thodologie de g√©n√©ration de prompts Windsurf, transformant un cahier des charges technique d√©taill√© en instructions ex√©cutables optimis√©es pour l'agent de d√©veloppement.

La richesse fonctionnelle de ce module r√©side dans sa capacit√© √† int√©grer de multiples aspects de la gestion d'√©v√©nements : suivi d'avancement visuel, gestion des communications client-prestataire, orchestration des √©ch√©ances temporelles, coordination des intervenants, et centralisation documentaire. Cette complexit√© n√©cessite une approche m√©thodique qui garantit la coh√©rence des donn√©es, la fluidit√© des workflows m√©tier, et l'int√©gration harmonieuse avec l'√©cosyst√®me existant de l'ERP.

L'architecture du module s'appuie sur le sch√©ma `shared` pour les donn√©es partag√©es entre applications, utilisant une approche d'extension du module √âv√©nements existant tout en ajoutant des fonctionnalit√©s sp√©cialis√©es pour le suivi op√©rationnel. Cette strat√©gie garantit la r√©utilisabilit√© des donn√©es et facilite l'int√©gration avec les modules Clients, Calendrier, et les futurs modules Facturation et Prestataires.

La transformation de ce cahier des charges en prompts Windsurf suit notre m√©thodologie √©prouv√©e, structurant le d√©veloppement en quatre phases logiques qui optimisent l'efficacit√© de l'agent tout en maintenant la qualit√© et la coh√©rence du code g√©n√©r√©. Chaque prompt int√®gre les sp√©cificit√©s techniques identifi√©es dans l'analyse documentaire, les bonnes pratiques Windsurf, et les contraintes d'int√©gration inter-modules.

---

## Section 1 : Initialisation

### Prompt 1.1 : Cr√©ation du Sch√©ma de Base de Donn√©es Complet

üéØ **But** : Cr√©er le sch√©ma complet de base de donn√©es pour le module Suivi des Mariages avec toutes les tables, relations, index, politiques RLS, et triggers conformes aux conventions Wedding Collection

üß† **Contexte** : Module central du sch√©ma `shared` √©tendant le concept d'√©v√©nement existant dans l'ERP Wedding Collection. Respecter imp√©rativement les conventions d√©finies dans `Conventions_Supabase_WeddingCollection_AgentIA.md` avec champs standard, RLS activ√©e, et triggers automatiques. Int√©gration critique avec modules Clients, √âv√©nements, et Calendrier.

üõ†Ô∏è **Fichiers** :
- `supabase/migrations/20241203_010_create_weddings_schema.sql`
- `supabase/migrations/20241203_011_create_wedding_notes_schema.sql`
- `supabase/migrations/20241203_012_create_wedding_deadlines_schema.sql`
- `supabase/migrations/20241203_013_create_wedding_vendors_schema.sql`
- `supabase/migrations/20241203_014_create_wedding_documents_schema.sql`
- `supabase/migrations/20241203_015_create_wedding_policies.sql`
- `supabase/migrations/20241203_016_create_wedding_triggers.sql`

üîÑ **Comportement** :
Cr√©er la table centrale `shared.weddings` avec les champs : event_id (UUID FK vers shared.events), client_id (UUID FK vers shared.clients), assigned_user_id (UUID FK vers shared.user_profiles), organization_id (UUID FK vers shared.organizations), progress_details (JSONB pour d√©tails d'avancement par composante), progress_percentage (FLOAT pour pourcentage global), status (VARCHAR avec ENUM wedding_status), metadata (JSONB pour m√©tadonn√©es additionnelles), plus les champs standard (id, created_at, updated_at, created_by, updated_by).

Cr√©er l'ENUM `wedding_status` (en_preparation, en_cours, termine, annule, reporte).

Cr√©er la table `shared.wedding_notes` avec : wedding_id (UUID FK), user_id (UUID FK), note_type (VARCHAR avec ENUM note_type), title (VARCHAR), content (TEXT), visibility (VARCHAR avec ENUM visibility_type), tags (TEXT[]), plus champs standard.

Cr√©er les ENUMs : `note_type` (appel, email, reunion, visite, autre), `visibility_type` (interne, partage_client, public).

Cr√©er la table `shared.wedding_attachments` avec : note_id (UUID FK), file_name (VARCHAR), storage_path (VARCHAR), mime_type (VARCHAR), size (INTEGER), plus champs standard.

Cr√©er la table `shared.wedding_deadlines` avec : wedding_id (UUID FK), title (VARCHAR), due_date (TIMESTAMPTZ), deadline_type (VARCHAR avec ENUM deadline_type), responsible_user_id (UUID FK), status (VARCHAR avec ENUM deadline_status), reminder_enabled (BOOLEAN DEFAULT true), reminder_config (JSONB), notes (TEXT), plus champs standard.

Cr√©er les ENUMs : `deadline_type` (paiement, confirmation, livraison, preparation, autre), `deadline_status` (a_faire, en_cours, termine, en_retard).

Cr√©er la table `shared.wedding_reminders` avec : deadline_id (UUID FK), recipient_type (VARCHAR avec ENUM recipient_type), recipient (VARCHAR), channel (VARCHAR avec ENUM channel_type), status (VARCHAR avec ENUM reminder_status), scheduled_at (TIMESTAMPTZ), sent_at (TIMESTAMPTZ), error_message (TEXT), plus champs standard.

Cr√©er les ENUMs : `recipient_type` (client, equipe, specifique), `channel_type` (email, whatsapp, sms), `reminder_status` (planifie, envoye, echec).

Cr√©er la table `shared.wedding_vendors` avec : wedding_id (UUID FK), vendor_category (VARCHAR), vendor_id (UUID FK nullable vers shared.vendors), vendor_name (VARCHAR), contact_info (JSONB), contract_status (VARCHAR avec ENUM contract_status), contract_amount (DECIMAL), notes (TEXT), plus champs standard.

Cr√©er l'ENUM `contract_status` (prospect, negocie, confirme, annule).

Cr√©er la table `shared.wedding_documents` avec : wedding_id (UUID FK), document_type (VARCHAR avec ENUM document_type), title (VARCHAR), storage_path (VARCHAR), version (INTEGER DEFAULT 1), is_current_version (BOOLEAN DEFAULT true), shared_with_client (BOOLEAN DEFAULT false), plus champs standard.

Cr√©er l'ENUM `document_type` (contrat, plan, photo, devis, facture, autre).

Cr√©er la table `shared.wedding_progress_config` pour la configuration des composantes suivies avec : organization_id (UUID FK), component_name (VARCHAR), component_order (INTEGER), is_active (BOOLEAN DEFAULT true), default_weight (FLOAT), plus champs standard.

Activer RLS sur toutes les tables avec politiques pour : r√¥les admin (acc√®s complet), gestionnaire (lecture/√©criture mariages assign√©s ou de son organisation), client (lecture limit√©e aux donn√©es partag√©es), utilisateur (lecture selon assignation).

Cr√©er les index : `idx_weddings_client_id`, `idx_weddings_assigned_user`, `idx_weddings_organization`, `idx_weddings_status`, `idx_wedding_notes_wedding_id`, `idx_wedding_notes_type`, `idx_wedding_deadlines_wedding_id`, `idx_wedding_deadlines_due_date`, `idx_wedding_deadlines_status`, `idx_wedding_vendors_wedding_id`, `idx_wedding_documents_wedding_id`.

Cr√©er les triggers pour : mise √† jour automatique des timestamps, calcul automatique du progress_percentage bas√© sur progress_details, journalisation des modifications sensibles, synchronisation avec le module Calendrier pour les √©ch√©ances.

‚öôÔ∏è **Interactions** :
- **Consomme** : Tables shared.events, shared.clients, shared.user_profiles, shared.organizations
- **Expose** : Structure de donn√©es pour modules Calendrier, Facturation, Prestataires
- **Partage** : Types `Wedding`, `WeddingNote`, `WeddingDeadline` avec packages/types
- **Synchronise** : √âch√©ances avec module Calendrier via triggers

üí° **Tips Windsurf** :
- Utiliser Cascade Write Mode pour g√©n√©ration automatique des migrations complexes
- Activer MCP Supabase pour cr√©ation directe et validation des tables
- R√©f√©rencer m√©moire "Conventions Supabase Wedding Collection"
- Utiliser Claude 3.5 pour logique complexe des triggers et politiques RLS
- Valider la syntaxe SQL avec l'int√©gration Supabase avant commit

### Prompt 1.2 : G√©n√©ration des Types TypeScript Complets

üéØ **But** : G√©n√©rer les types TypeScript complets et coh√©rents pour le module Suivi des Mariages avec interfaces, enums, types utilitaires, et sch√©mas de validation pour assurer la type-safety dans tout l'√©cosyst√®me

üß† **Contexte** : Types partag√©s dans `packages/types` utilis√©s par toutes les applications du monorepo (backoffice, clients, presta, site). Synchronisation automatique avec le sch√©ma Supabase via g√©n√©ration de types. Extension des types existants Events et Clients.

üõ†Ô∏è **Fichiers** :
- `packages/types/src/weddings.ts`
- `packages/types/src/wedding-notes.ts`
- `packages/types/src/wedding-deadlines.ts`
- `packages/types/src/wedding-vendors.ts`
- `packages/types/src/wedding-documents.ts`
- `packages/types/src/database.ts` (mise √† jour)
- `packages/types/src/index.ts` (export)

üîÑ **Comportement** :
G√©n√©rer l'interface `Wedding` correspondant exactement √† la table `shared.weddings` avec tous les champs typ√©s correctement. Inclure les relations : `event?: Event`, `client?: Client`, `assigned_user?: UserProfile`, `notes?: WeddingNote[]`, `deadlines?: WeddingDeadline[]`, `vendors?: WeddingVendor[]`, `documents?: WeddingDocument[]`.

Cr√©er les enums TypeScript correspondant aux enums SQL : `WeddingStatus`, `NoteType`, `VisibilityType`, `DeadlineType`, `DeadlineStatus`, `RecipientType`, `ChannelType`, `ReminderStatus`, `ContractStatus`, `DocumentType`.

G√©n√©rer les interfaces pour toutes les entit√©s : `WeddingNote`, `WeddingAttachment`, `WeddingDeadline`, `WeddingReminder`, `WeddingVendor`, `WeddingDocument`, `WeddingProgressConfig`.

Cr√©er les types utilitaires : `WeddingCreate` (Omit<Wedding, 'id' | 'created_at' | 'updated_at'>), `WeddingUpdate` (Partial<WeddingCreate>), `WeddingWithDetails` (Wedding avec toutes les relations charg√©es), `WeddingListItem` (version all√©g√©e pour les listes), `WeddingProgressDetails` (structure typ√©e pour progress_details JSONB).

Cr√©er les types de recherche et filtrage : `WeddingFilters` (status?, assigned_user_id?, client_id?, date_range?, search?), `WeddingSearchResult`, `WeddingListOptions` (pagination, tri, filtres).

G√©n√©rer les types pour les formulaires : `WeddingFormData`, `NoteFormData`, `DeadlineFormData`, `VendorFormData`, `DocumentFormData`.

Cr√©er les sch√©mas de validation Zod : `WeddingSchema`, `WeddingNoteSchema`, `WeddingDeadlineSchema`, `WeddingVendorSchema`, `WeddingDocumentSchema` avec validation des contraintes m√©tier (dates coh√©rentes, montants positifs, formats email/t√©l√©phone).

Ajouter les types pour les APIs : `WeddingApiResponse`, `WeddingListResponse`, `WeddingStatsResponse`, `WeddingProgressUpdateRequest`.

‚öôÔ∏è **Interactions** :
- **Consomme** : Types Event, Client, UserProfile du sch√©ma Supabase
- **Expose** : Types vers toutes les applications du monorepo
- **Partage** : Types communs avec modules Calendrier, Facturation, Prestataires
- **√âtend** : Types existants Event et Client

üí° **Tips Windsurf** :
- Utiliser Supercomplete pour coh√©rence avec patterns TypeScript existants
- Activer g√©n√©ration automatique depuis sch√©ma Supabase
- Valider types avec compilation TypeScript stricte
- Synchroniser avec m√©moire "Types Wedding Collection"
- Utiliser Claude 3.5 pour logique complexe des types utilitaires

### Prompt 1.3 : Architecture des Services Backend et RPC Functions

üéØ **But** : Cr√©er l'architecture compl√®te des services backend pour le module Suivi des Mariages avec fonctions RPC Supabase, couches service, repository, et validation, suivant les patterns √©tablis dans l'ERP Wedding Collection

üß† **Contexte** : Services backend dans `apps/backoffice/src/lib/services` utilisant Supabase client, fonctions RPC pour logique complexe, validation Zod, et gestion d'erreurs standardis√©e. Architecture en couches pour s√©paration des responsabilit√©s avec int√©gration temps r√©el.

üõ†Ô∏è **Fichiers** :
- `supabase/functions/wedding-management/index.ts`
- `supabase/functions/wedding-progress/index.ts`
- `supabase/functions/wedding-reminders/index.ts`
- `apps/backoffice/src/lib/services/weddings-service.ts`
- `apps/backoffice/src/lib/services/wedding-notes-service.ts`
- `apps/backoffice/src/lib/services/wedding-deadlines-service.ts`
- `apps/backoffice/src/lib/repositories/weddings-repository.ts`
- `apps/backoffice/src/lib/validators/weddings-validators.ts`
- `apps/backoffice/src/lib/errors/weddings-errors.ts`

üîÑ **Comportement** :
Cr√©er les fonctions RPC Supabase : `get_wedding_details(wedding_id UUID)` retournant le mariage avec toutes ses relations, `list_weddings(filters JSONB, pagination JSONB)` avec filtrage avanc√© et pagination, `update_wedding_progress(wedding_id UUID, component TEXT, status TEXT, percentage FLOAT)` avec recalcul automatique du pourcentage global, `add_wedding_note(wedding_id UUID, note_data JSONB)` avec validation et notifications, `add_wedding_deadline(wedding_id UUID, deadline_data JSONB)` avec synchronisation calendrier.

Cr√©er `WeddingsRepository` avec m√©thodes : `findAll(filters?, pagination?)`, `findById(id)`, `findByClient(clientId)`, `findByAssignedUser(userId)`, `create(data)`, `update(id, data)`, `delete(id)`, `archive(id)`. Impl√©menter la logique de requ√™tes Supabase avec gestion des relations et filtres complexes.

Cr√©er `WeddingsService` avec logique m√©tier : `createWedding(eventId, clientId, assignedUserId)`, `updateWeddingProgress(weddingId, progressData)`, `calculateGlobalProgress(weddingId)`, `getWeddingStats(filters)`, `archiveWedding(weddingId, reason)`. Int√©grer validation business et gestion des workflows.

Cr√©er `WeddingNotesService` avec : `addNote(weddingId, noteData)`, `getNotes(weddingId, filters)`, `updateNote(noteId, data)`, `deleteNote(noteId)`, `addAttachment(noteId, file)`, `generateAISummary(weddingId)`. G√©rer les pi√®ces jointes et int√©gration IA.

Cr√©er `WeddingDeadlinesService` avec : `addDeadline(weddingId, deadlineData)`, `getDeadlines(weddingId, filters)`, `updateDeadlineStatus(deadlineId, status)`, `scheduleReminders(deadlineId)`, `sendReminder(reminderId)`. Int√©grer avec module Calendrier et syst√®me de notifications.

Cr√©er les validateurs Zod : `createWeddingSchema`, `updateWeddingSchema`, `addNoteSchema`, `addDeadlineSchema`, `updateProgressSchema` avec validation des contraintes m√©tier (dates coh√©rentes, utilisateurs valides, statuts autoris√©s).

Impl√©menter la gestion d'erreurs sp√©cialis√©e : `WeddingNotFoundError`, `InvalidProgressDataError`, `DeadlineConflictError`, `UnauthorizedWeddingAccessError` avec codes d'erreur standardis√©s et messages localis√©s.

Cr√©er les services temps r√©el : abonnements aux canaux `wedding-${weddingId}`, `user-deadlines-${userId}`, `organization-weddings-${orgId}` avec gestion des √©v√©nements de mise √† jour.

‚öôÔ∏è **Interactions** :
- **Consomme** : Types packages/types, client Supabase, services Events/Clients
- **Expose** : Services vers controllers API et composants frontend
- **√âmet** : √âv√©nements wedding_created, wedding_updated, deadline_added, note_added
- **Int√®gre** : Module Calendrier (√©ch√©ances), services externes (SendGrid, WhatsApp)

üí° **Tips Windsurf** :
- Utiliser Cascade Chat Mode pour logique m√©tier complexe des RPC functions
- R√©f√©rencer patterns de services existants dans l'ERP
- Int√©grer validation Zod avec types TypeScript
- Utiliser MCP Supabase pour d√©ploiement direct des Edge Functions
- Tester logique de calcul de progression avec cas limites

### Prompt 1.4 : Configuration des Hooks et Contextes React

üéØ **But** : D√©velopper l'architecture compl√®te des hooks personnalis√©s et contextes React pour le module Suivi des Mariages avec gestion d'√©tat optimis√©e, cache intelligent, et int√©gration temps r√©el

üß† **Contexte** : Hooks et contextes dans `apps/backoffice/src/hooks` et `apps/backoffice/src/contexts` utilisant React Query/SWR pour le cache, Supabase Realtime pour les mises √† jour temps r√©el, et patterns de gestion d'√©tat optimis√©s pour les performances.

üõ†Ô∏è **Fichiers** :
- `apps/backoffice/src/contexts/WeddingContext.tsx`
- `apps/backoffice/src/hooks/useWeddings.ts`
- `apps/backoffice/src/hooks/useWeddingDetails.ts`
- `apps/backoffice/src/hooks/useWeddingProgress.ts`
- `apps/backoffice/src/hooks/useWeddingNotes.ts`
- `apps/backoffice/src/hooks/useWeddingDeadlines.ts`
- `apps/backoffice/src/hooks/useWeddingVendors.ts`
- `apps/backoffice/src/hooks/useWeddingDocuments.ts`
- `apps/backoffice/src/hooks/useWeddingRealtime.ts`

üîÑ **Comportement** :
Cr√©er `WeddingContext` avec √©tat global : mariages actifs, mariage s√©lectionn√©, filtres appliqu√©s, pr√©f√©rences utilisateur, cache des donn√©es fr√©quentes. Fournir actions : selectWedding, updateFilters, refreshData, clearCache.

D√©velopper `useWeddings` avec : `data` (liste des mariages), `isLoading`, `error`, `refetch`, `hasNextPage`, `fetchNextPage` pour pagination infinie. Int√©grer filtrage c√¥t√© client et serveur, tri multiple, recherche textuelle. Impl√©menter cache intelligent avec invalidation bas√©e sur les √©v√©nements.

Cr√©er `useWeddingDetails(weddingId)` avec : `wedding` (donn√©es compl√®tes), `isLoading`, `error`, `refetch`, `updateWedding`, `archiveWedding`. G√©rer le chargement progressif des relations (notes, √©ch√©ances, prestataires, documents).

Impl√©menter `useWeddingProgress(weddingId)` avec : `progress` (d√©tails d'avancement), `updateProgress`, `recalculateProgress`, `getProgressHistory`. Optimiser les mises √† jour avec debouncing et optimistic updates.

D√©velopper `useWeddingNotes(weddingId)` avec : `notes`, `addNote`, `updateNote`, `deleteNote`, `addAttachment`, `generateSummary`. Int√©grer pagination, filtrage par type, recherche dans le contenu.

Cr√©er `useWeddingDeadlines(weddingId)` avec : `deadlines`, `addDeadline`, `updateDeadline`, `markComplete`, `scheduleReminder`. G√©rer tri par date, filtrage par statut, int√©gration calendrier.

Impl√©menter `useWeddingVendors(weddingId)` avec : `vendors`, `addVendor`, `updateVendor`, `removeVendor`, `updateContractStatus`. Int√©grer avec catalogue prestataires si disponible.

D√©velopper `useWeddingDocuments(weddingId)` avec : `documents`, `uploadDocument`, `updateDocument`, `deleteDocument`, `shareWithClient`. G√©rer versioning, permissions, g√©n√©ration d'URLs sign√©es.

Cr√©er `useWeddingRealtime(weddingId)` avec abonnements aux canaux Supabase Realtime : `wedding-${weddingId}`, `wedding-notes-${weddingId}`, `wedding-deadlines-${weddingId}`. G√©rer reconnexion automatique, gestion des conflits, synchronisation √©tat local.

Impl√©menter patterns d'optimisation : memoization avec useMemo/useCallback, lazy loading des donn√©es non critiques, prefetching des donn√©es probables, cleanup automatique des abonnements.

‚öôÔ∏è **Interactions** :
- **Consomme** : Services backend, types TypeScript, client Supabase
- **Expose** : Hooks vers composants React, √©tat global via contexte
- **Int√®gre** : React Query pour cache, Supabase Realtime pour temps r√©el
- **Optimise** : Performance avec memoization et lazy loading

üí° **Tips Windsurf** :
- Utiliser Supercomplete pour patterns React hooks existants
- Activer m√©moire "React Patterns Wedding Collection"
- R√©f√©rencer hooks existants avec /Reference Open Editors
- Optimiser performance avec React DevTools Profiler
- Tester hooks avec React Testing Library

---

## Section 2 : Fonctionnalit√©s Principales

### Prompt 2.1 : Interface de Liste et Gestion des Mariages

üéØ **But** : D√©velopper l'interface compl√®te de liste et gestion des mariages pour le backoffice avec filtrage avanc√©, vues multiples, actions en lot, et navigation optimis√©e utilisant ShadCN UI

üß† **Contexte** : Interface principale dans `apps/backoffice/app/weddings` utilisant Next.js 14 App Router, ShadCN UI, Tailwind CSS, React Hook Form, et int√©gration Supabase Auth pour permissions. Point d'entr√©e principal du module avec navigation vers d√©tails.

üõ†Ô∏è **Fichiers** :
- `apps/backoffice/app/weddings/page.tsx` (liste principale)
- `apps/backoffice/app/weddings/nouveau/page.tsx` (cr√©ation)
- `apps/backoffice/app/weddings/[id]/page.tsx` (d√©tail/√©dition)
- `components/weddings/WeddingsTable.tsx`
- `components/weddings/WeddingsGrid.tsx`
- `components/weddings/WeddingCard.tsx`
- `components/weddings/WeddingForm.tsx`
- `components/weddings/WeddingFilters.tsx`
- `components/weddings/WeddingActions.tsx`
- `components/weddings/WeddingStats.tsx`

üîÑ **Comportement** :
Cr√©er la page liste avec DataTable ShadCN affichant : nom client, date mariage, lieu, statut (badge color√©), progression (barre de progression), wedding planner assign√©, derni√®re activit√©. Int√©grer tri multi-colonnes, filtres avanc√©s (statut, planner, p√©riode, progression), recherche en temps r√©el, pagination c√¥t√© serveur.

D√©velopper la vue grille avec cartes compactes montrant : photo couple, informations essentielles, progression visuelle, actions rapides. Permettre basculement fluide entre vue liste et grille avec pr√©f√©rences sauvegard√©es.

Impl√©menter le syst√®me de filtres avec : s√©lecteur de statut (multi-s√©lection), s√©lecteur de wedding planner, s√©lecteur de p√©riode (pr√©d√©finie ou personnalis√©e), filtre de progression (plages), filtre de lieu, recherche textuelle globale. Sauvegarder les filtres appliqu√©s dans localStorage.

Cr√©er le formulaire de cr√©ation/√©dition avec : s√©lection client (autocomplete avec recherche), s√©lection √©v√©nement existant ou cr√©ation rapide, assignation wedding planner, configuration initiale des composantes de suivi, notes initiales. Validation en temps r√©el avec feedback visuel.

D√©velopper les actions en lot : changement de statut multiple, r√©assignation en masse, archivage group√©, export s√©lectif, g√©n√©ration de rapports group√©s. Confirmation avec pr√©visualisation des changements.

Impl√©menter les statistiques en temps r√©el : nombre total de mariages par statut, progression moyenne, mariages du mois, √©ch√©ances urgentes, charge de travail par planner. Graphiques interactifs avec drill-down.

Cr√©er la navigation contextuelle : liens rapides vers client/√©v√©nement associ√©, navigation pr√©c√©dent/suivant dans la liste filtr√©e, breadcrumbs intelligents, favoris et acc√®s rapides.

Int√©grer les permissions avec masquage conditionnel : admin (acc√®s complet), manager (vue √©quipe), planner (mariages assign√©s), assistant (lecture seule selon assignation).

‚öôÔ∏è **Interactions** :
- **Consomme** : API /api/weddings, hooks useWeddings, composants shared-ui
- **Expose** : Interface utilisateur pour gestionnaires et planners
- **Int√®gre** : Modules Clients et √âv√©nements, syst√®me de notifications
- **Navigue** : Vers d√©tails mariage, fiches client, calendrier

üí° **Tips Windsurf** :
- Utiliser Supercomplete pour patterns ShadCN UI DataTable
- Activer m√©moire "Design System Wedding Collection"
- R√©f√©rencer composants de liste existants avec /Reference Open Editors
- Optimiser performance avec virtualisation pour grandes listes
- Tester responsive design sur diff√©rentes tailles d'√©cran

### Prompt 2.2 : Interface de D√©tail et Suivi d'Avancement

üéØ **But** : Cr√©er l'interface compl√®te de d√©tail d'un mariage avec syst√®me de suivi d'avancement visuel, gestion des composantes, mise √† jour temps r√©el, et navigation par onglets optimis√©e

üß† **Contexte** : Interface de d√©tail dans `apps/backoffice/app/weddings/[id]` constituant le c≈ìur du module avec vue d'ensemble, suivi de progression, et acc√®s √† toutes les fonctionnalit√©s. Utilisation intensive des hooks temps r√©el et optimisations de performance.

üõ†Ô∏è **Fichiers** :
- `apps/backoffice/app/weddings/[id]/page.tsx` (page principale)
- `components/weddings/WeddingHeader.tsx`
- `components/weddings/WeddingTabs.tsx`
- `components/weddings/ProgressDashboard.tsx`
- `components/weddings/ProgressComponent.tsx`
- `components/weddings/WeddingOverview.tsx`
- `components/weddings/WeddingTimeline.tsx`
- `components/weddings/QuickActions.tsx`

üîÑ **Comportement** :
Cr√©er l'en-t√™te de mariage avec : informations client (nom, photo, contact), d√©tails √©v√©nement (date, lieu, nombre d'invit√©s), statut global avec badge, progression globale avec barre circulaire, wedding planner assign√©, actions rapides (appel, email, notes).

D√©velopper le tableau de bord de progression avec : vue d'ensemble des composantes (lieu, traiteur, d√©coration, musique, photographie, etc.), indicateurs visuels par composante (non commenc√©, en cours, termin√©, probl√®me), pourcentage de completion global calcul√© automatiquement, alertes pour composantes en retard.

Impl√©menter les composantes de progression avec : titre et description personnalisables, statut s√©lectionnable (liste d√©roulante), pourcentage d'avancement (slider ou input), notes sp√©cifiques √† la composante, date de derni√®re mise √† jour, responsable assign√©, √©ch√©ances associ√©es.

Cr√©er la timeline d'activit√© avec : historique chronologique des actions, filtrage par type d'activit√© (notes, mises √† jour, √©ch√©ances, documents), affichage des acteurs (qui a fait quoi), liens vers les √©l√©ments d√©taill√©s, pagination infinie avec chargement progressif.

D√©velopper la vue d'ensemble avec : r√©sum√© des informations cl√©s, m√©triques importantes (budget, timeline, participants), liens rapides vers sections d√©taill√©es, widgets configurables selon les pr√©f√©rences utilisateur.

Impl√©menter le syst√®me d'onglets avec : Vue d'ensemble, Progression, Notes & Communications, √âch√©ances & Rappels, Prestataires, Documents, Finances. Chargement lazy des onglets non actifs, sauvegarde de l'onglet actif, navigation par raccourcis clavier.

Cr√©er les actions rapides avec : ajout rapide de note, cr√©ation d'√©ch√©ance, upload de document, contact client/prestataire, g√©n√©ration de rapport, partage d'informations. Modales optimis√©es avec formulaires pr√©-remplis.

Int√©grer les mises √† jour temps r√©el avec : synchronisation automatique des changements, notifications visuelles des modifications, gestion des conflits d'√©dition simultan√©e, indicateurs de pr√©sence des autres utilisateurs.

‚öôÔ∏è **Interactions** :
- **Consomme** : API wedding details, hooks useWeddingDetails, useWeddingRealtime
- **Expose** : Interface d√©taill√©e pour wedding planners
- **Synchronise** : Temps r√©el avec autres utilisateurs connect√©s
- **Int√®gre** : Tous les sous-modules (notes, √©ch√©ances, prestataires, documents)

üí° **Tips Windsurf** :
- Utiliser Cascade Write Mode pour interface complexe avec onglets
- Activer m√©moire "Dashboard Patterns Wedding Collection"
- Optimiser avec React.memo pour composants de progression
- Impl√©menter skeleton loading pour am√©liorer UX
- Tester performance avec React DevTools Profiler

### Prompt 2.3 : Syst√®me de Gestion des Notes et Communications

üéØ **But** : D√©velopper le syst√®me complet de gestion des notes et communications avec √©diteur riche, pi√®ces jointes, cat√©gorisation, recherche avanc√©e, et int√©gration IA pour r√©sum√©s automatiques

üß† **Contexte** : Syst√®me de communication central dans l'onglet Notes du d√©tail mariage, utilisant TipTap pour l'√©dition riche, Supabase Storage pour les pi√®ces jointes, et int√©gration OpenAI pour les fonctionnalit√©s IA. Gestion des permissions de visibilit√©.

üõ†Ô∏è **Fichiers** :
- `components/weddings/notes/NotesList.tsx`
- `components/weddings/notes/NoteForm.tsx`
- `components/weddings/notes/NoteItem.tsx`
- `components/weddings/notes/NoteEditor.tsx`
- `components/weddings/notes/AttachmentManager.tsx`
- `components/weddings/notes/NotesFilter.tsx`
- `components/weddings/notes/AIAssistant.tsx`
- `hooks/useWeddingNotes.ts`
- `hooks/useNoteAttachments.ts`

üîÑ **Comportement** :
Cr√©er la liste des notes avec : affichage chronologique invers√© (plus r√©centes en premier), filtrage par type (appel, email, r√©union, visite, autre), filtrage par visibilit√© (interne, partag√© client), recherche dans le contenu, pagination infinie avec chargement progressif.

D√©velopper l'√©diteur de notes avec : TipTap pour √©dition riche (gras, italique, listes, liens), s√©lection du type de note, configuration de la visibilit√©, syst√®me de tags pour cat√©gorisation, sauvegarde automatique en draft, pr√©visualisation avant publication.

Impl√©menter la gestion des pi√®ces jointes avec : drag & drop pour upload, pr√©visualisation des images, gestion des documents PDF/Office, limitation de taille et types autoris√©s, stockage s√©curis√© dans Supabase Storage, g√©n√©ration d'URLs sign√©es pour acc√®s temporaire.

Cr√©er le syst√®me de filtres avec : s√©lecteur de type de note (multi-s√©lection), s√©lecteur de p√©riode, filtre par auteur, filtre par tags, recherche textuelle dans le contenu, sauvegarde des filtres favoris.

D√©velopper l'assistant IA avec : g√©n√©ration de r√©sum√©s automatiques des notes, suggestions de suivi bas√©es sur le contenu, d√©tection d'√©l√©ments d'action dans les notes, g√©n√©ration de templates de communication, analyse de sentiment des √©changes clients.

Impl√©menter les notifications avec : alertes pour nouvelles notes importantes, notifications de mentions (@utilisateur), rappels de suivi bas√©s sur le contenu, int√©gration avec syst√®me de notifications global.

Cr√©er les actions rapides avec : r√©ponse rapide √† une note, transformation en √©ch√©ance, partage avec client, export en PDF, impression format√©e, envoi par email.

G√©rer les permissions avec : notes internes visibles √©quipe uniquement, notes partag√©es visibles par client, contr√¥le d'√©dition selon r√¥le, historique des modifications, soft delete avec possibilit√© de restauration.

‚öôÔ∏è **Interactions** :
- **Consomme** : API notes, Supabase Storage, OpenAI API
- **Expose** : Syst√®me de communication pour √©quipe et clients
- **Int√®gre** : Syst√®me de notifications, module Calendrier (√©ch√©ances)
- **Synchronise** : Temps r√©el pour collaboration √©quipe

üí° **Tips Windsurf** :
- Utiliser Cascade Chat Mode pour int√©gration TipTap complexe
- Activer MCP Supabase pour gestion Storage
- R√©f√©rencer patterns d'√©diteur existants
- Optimiser upload avec compression d'images
- Tester accessibilit√© de l'√©diteur riche

### Prompt 2.4 : Gestion des √âch√©ances et Syst√®me de Rappels

üéØ **But** : Cr√©er le syst√®me complet de gestion des √©ch√©ances et rappels avec calendrier interactif, notifications automatiques, int√©gration multi-canaux (email, WhatsApp), et synchronisation avec le module Calendrier

üß† **Contexte** : Syst√®me d'√©ch√©ances dans l'onglet √âch√©ances du d√©tail mariage, int√©grant react-calendar pour visualisation, SendGrid et WhatsApp Business API pour notifications, et synchronisation bidirectionnelle avec le module Calendrier global.

üõ†Ô∏è **Fichiers** :
- `components/weddings/deadlines/DeadlinesList.tsx`
- `components/weddings/deadlines/DeadlinesCalendar.tsx`
- `components/weddings/deadlines/DeadlineForm.tsx`
- `components/weddings/deadlines/DeadlineItem.tsx`
- `components/weddings/deadlines/ReminderConfig.tsx`
- `components/weddings/deadlines/ReminderHistory.tsx`
- `hooks/useWeddingDeadlines.ts`
- `hooks/useDeadlineReminders.ts`
- `services/reminder-service.ts`

üîÑ **Comportement** :
Cr√©er la liste des √©ch√©ances avec : affichage par ordre chronologique, regroupement par statut (√† faire, en cours, termin√©, en retard), indicateurs visuels d'urgence (couleurs selon proximit√©), filtrage par type d'√©ch√©ance, recherche dans les titres et descriptions.

D√©velopper le calendrier interactif avec : vue mensuelle avec √©ch√©ances marqu√©es, vue hebdomadaire d√©taill√©e, vue agenda par jour, cr√©ation rapide par clic sur date, drag & drop pour reprogrammer, synchronisation avec calendrier global de l'ERP.

Impl√©menter le formulaire d'√©ch√©ance avec : titre et description, s√©lection de date/heure, type d'√©ch√©ance (paiement, confirmation, livraison, pr√©paration, autre), assignation de responsable, configuration des rappels (d√©lais, canaux, destinataires), notes additionnelles.

Cr√©er la configuration des rappels avec : s√©lection des d√©lais (1 jour, 3 jours, 1 semaine avant), choix des canaux (email, WhatsApp, notification interne), destinataires (client, √©quipe, responsable sp√©cifique), templates de messages personnalisables, conditions d'envoi.

D√©velopper l'historique des rappels avec : liste des rappels envoy√©s, statut de livraison, accus√©s de r√©ception, gestion des √©checs d'envoi, possibilit√© de renvoyer, statistiques d'efficacit√©.

Impl√©menter les actions sur √©ch√©ances avec : marquer comme termin√©, reporter avec justification, dupliquer pour r√©currence, transformer en nouvelle √©ch√©ance, archiver, supprimer avec confirmation.

Cr√©er le service de rappels avec : planification automatique bas√©e sur configuration, envoi via SendGrid (emails) et WhatsApp Business API, gestion des templates de messages, retry automatique en cas d'√©chec, logging complet des envois.

G√©rer la synchronisation avec : publication automatique dans calendrier global, mise √† jour bidirectionnelle des modifications, gestion des conflits de planning, notifications d'√©quipe pour changements importants.

‚öôÔ∏è **Interactions** :
- **Consomme** : API deadlines, module Calendrier, services externes
- **Expose** : √âch√©ances vers calendrier global et notifications
- **Int√®gre** : SendGrid, WhatsApp Business API, syst√®me de notifications
- **Synchronise** : Bidirectionnelle avec module Calendrier

üí° **Tips Windsurf** :
- Utiliser Cascade Write Mode pour int√©gration calendrier complexe
- Activer MCP pour configuration SendGrid et WhatsApp
- R√©f√©rencer patterns de calendrier existants
- Optimiser performance avec virtualisation du calendrier
- Tester int√©grations externes avec mocks en d√©veloppement

---

## Section 3 : Fonctionnalit√©s Secondaires

### Prompt 3.1 : Gestion Avanc√©e des Prestataires et Contrats

üéØ **But** : D√©velopper le syst√®me complet de gestion des prestataires associ√©s aux mariages avec suivi des contrats, n√©gociations, statuts d'engagement, et int√©gration avec le futur module Prestataires

üß† **Contexte** : Syst√®me de prestataires dans l'onglet Prestataires du d√©tail mariage, pr√©parant l'int√©gration avec le module Prestataires d√©di√©, g√©rant les relations contractuelles et le suivi d'engagement pour chaque mariage.

üõ†Ô∏è **Fichiers** :
- `components/weddings/vendors/VendorsList.tsx`
- `components/weddings/vendors/VendorForm.tsx`
- `components/weddings/vendors/VendorCard.tsx`
- `components/weddings/vendors/ContractManager.tsx`
- `components/weddings/vendors/VendorSelector.tsx`
- `components/weddings/vendors/VendorDocuments.tsx`
- `hooks/useWeddingVendors.ts`
- `hooks/useVendorContracts.ts`

üîÑ **Comportement** :
Cr√©er la liste des prestataires avec : affichage par cat√©gorie (traiteur, photographe, DJ, d√©coration, etc.), statut du contrat (prospect, n√©goci√©, confirm√©, annul√©), montant contractuel, contact principal, derni√®re interaction, actions rapides (appel, email, contrat).

D√©velopper le formulaire de prestataire avec : s√©lection de cat√©gorie, saisie manuelle ou s√©lection depuis catalogue (si module Prestataires int√©gr√©), informations de contact compl√®tes, d√©tails contractuels (montant, conditions, √©ch√©ances), notes sp√©cifiques au mariage.

Impl√©menter la gestion des contrats avec : upload de documents contractuels, suivi des versions, statut de n√©gociation, √©ch√©ances de paiement, conditions particuli√®res, historique des modifications, g√©n√©ration d'avenants.

Cr√©er le s√©lecteur de prestataires avec : recherche dans catalogue existant, filtrage par cat√©gorie et localisation, affichage des √©valuations et avis, comparaison rapide, ajout de nouveaux prestataires au catalogue, gestion des favoris.

D√©velopper la gestion documentaire avec : stockage s√©curis√© des contrats, devis, factures, photos de prestations, partage contr√¥l√© avec prestataires, versioning automatique, signatures √©lectroniques.

Impl√©menter le suivi d'engagement avec : timeline des interactions, rappels automatiques pour confirmations, suivi des livrables attendus, √©valuation post-prestation, gestion des litiges et r√©clamations.

Cr√©er les actions de communication avec : envoi d'emails depuis templates, planification d'appels, g√©n√©ration de briefs personnalis√©s, partage d'informations √©v√©nement, coordination entre prestataires.

G√©rer l'int√©gration future avec : hooks d'extension pour module Prestataires, API standardis√©e pour √©change de donn√©es, synchronisation des informations de contact, partage des √©valuations et historiques.

‚öôÔ∏è **Interactions** :
- **Consomme** : API vendors, futur module Prestataires, Supabase Storage
- **Expose** : Donn√©es prestataires vers facturation et planning
- **Pr√©pare** : Int√©gration avec module Prestataires d√©di√©
- **Int√®gre** : Syst√®me de documents et communications

üí° **Tips Windsurf** :
- Utiliser Cascade Chat Mode pour logique contractuelle complexe
- Pr√©parer hooks d'extension pour module Prestataires
- R√©f√©rencer patterns de gestion de relations
- Optimiser pour √©volution vers module d√©di√©
- Tester workflows de n√©gociation complets

### Prompt 3.2 : Syst√®me de Gestion Documentaire Avanc√©

üéØ **But** : Cr√©er un syst√®me complet de gestion documentaire pour les mariages avec versioning, partage s√©curis√©, organisation par cat√©gories, recherche avanc√©e, et int√©gration avec signature √©lectronique

üß† **Contexte** : Syst√®me documentaire dans l'onglet Documents du d√©tail mariage, utilisant Supabase Storage pour stockage s√©curis√©, gestion des permissions granulaires, et int√©gration avec services de signature √©lectronique pour contrats.

üõ†Ô∏è **Fichiers** :
- `components/weddings/documents/DocumentsList.tsx`
- `components/weddings/documents/DocumentUploader.tsx`
- `components/weddings/documents/DocumentViewer.tsx`
- `components/weddings/documents/DocumentSharing.tsx`
- `components/weddings/documents/DocumentVersions.tsx`
- `components/weddings/documents/DocumentSearch.tsx`
- `hooks/useWeddingDocuments.ts`
- `hooks/useDocumentSharing.ts`
- `services/document-service.ts`

üîÑ **Comportement** :
Cr√©er la liste des documents avec : organisation par cat√©gories (contrats, devis, plans, photos, factures, autre), affichage en grille ou liste, pr√©visualisation rapide, informations de version, statut de partage, derni√®re modification, taille de fichier.

D√©velopper l'uploader de documents avec : drag & drop multi-fichiers, barre de progression, validation des types et tailles, g√©n√©ration automatique de thumbnails pour images, extraction de m√©tadonn√©es, cat√©gorisation automatique bas√©e sur le nom/contenu.

Impl√©menter le visualiseur de documents avec : pr√©visualisation int√©gr√©e pour images/PDF, zoom et navigation, annotations et commentaires, mode plein √©cran, t√©l√©chargement s√©curis√©, impression contr√¥l√©e.

Cr√©er le syst√®me de partage avec : g√©n√©ration de liens s√©curis√©s avec expiration, contr√¥le d'acc√®s granulaire (lecture, t√©l√©chargement, commentaire), partage avec clients et prestataires, notifications d'acc√®s, r√©vocation de liens.

D√©velopper la gestion des versions avec : historique complet des versions, comparaison visuelle entre versions, restauration de versions ant√©rieures, commentaires de changement, approbation de versions, archivage automatique.

Impl√©menter la recherche avanc√©e avec : recherche textuelle dans le contenu (OCR pour images), filtrage par cat√©gorie/date/auteur, recherche par tags, recherche dans les m√©tadonn√©es, sauvegarde de recherches fr√©quentes.

Cr√©er l'int√©gration signature √©lectronique avec : pr√©paration de documents pour signature, envoi aux signataires, suivi du processus de signature, stockage des documents sign√©s, certificats de signature, rappels automatiques.

G√©rer les permissions avec : acc√®s bas√© sur les r√¥les, documents confidentiels √©quipe uniquement, partage temporaire avec expiration, audit trail des acc√®s, chiffrement des documents sensibles.

‚öôÔ∏è **Interactions** :
- **Consomme** : Supabase Storage, services de signature √©lectronique
- **Expose** : Documents vers clients et prestataires
- **Int√®gre** : Syst√®me de notifications, gestion des permissions
- **S√©curise** : Acc√®s contr√¥l√© et audit trail complet

üí° **Tips Windsurf** :
- Utiliser MCP Supabase pour gestion Storage avanc√©e
- Int√©grer services de signature √©lectronique via API
- Optimiser chargement avec lazy loading et compression
- Impl√©menter OCR pour recherche dans documents scann√©s
- Tester s√©curit√© des partages et permissions

### Prompt 3.3 : Tableau de Bord Analytique et Reporting

üéØ **But** : D√©velopper un syst√®me complet d'analyse et de reporting pour les mariages avec m√©triques de performance, visualisations interactives, rapports personnalisables, et export multi-formats

üß† **Contexte** : Tableau de bord analytique accessible depuis la liste des mariages et le d√©tail, utilisant recharts pour visualisations, g√©n√©ration de rapports PDF avec templates personnalisables, et m√©triques de performance pour optimisation des processus.

üõ†Ô∏è **Fichiers** :
- `components/weddings/analytics/AnalyticsDashboard.tsx`
- `components/weddings/analytics/WeddingMetrics.tsx`
- `components/weddings/analytics/ProgressCharts.tsx`
- `components/weddings/analytics/ReportGenerator.tsx`
- `components/weddings/analytics/KPICards.tsx`
- `components/weddings/analytics/TrendAnalysis.tsx`
- `hooks/useWeddingAnalytics.ts`
- `services/analytics-service.ts`
- `services/report-service.ts`

üîÑ **Comportement** :
Cr√©er le tableau de bord principal avec : vue d'ensemble des KPIs (nombre de mariages par statut, progression moyenne, revenus, satisfaction client), graphiques de tendances temporelles, comparaisons p√©riodiques, alertes pour m√©triques critiques.

D√©velopper les m√©triques de performance avec : temps moyen de traitement par phase, taux de completion dans les d√©lais, satisfaction client par wedding planner, rentabilit√© par type de mariage, efficacit√© des processus.

Impl√©menter les visualisations avec : graphiques en barres pour comparaisons, courbes de tendance pour √©volutions temporelles, camemberts pour r√©partitions, heatmaps pour analyse de charge, gauges pour indicateurs de performance.

Cr√©er le g√©n√©rateur de rapports avec : templates pr√©d√©finis (rapport client, rapport interne, bilan financier), personnalisation des sections, s√©lection de p√©riode, filtrage par crit√®res, g√©n√©ration PDF/Excel, envoi automatique par email.

D√©velopper l'analyse de tendances avec : pr√©dictions bas√©es sur historique, identification de patterns saisonniers, analyse de corr√©lations, recommandations d'optimisation, alertes pr√©ventives.

Impl√©menter les KPIs personnalisables avec : d√©finition de m√©triques custom, seuils d'alerte configurables, calculs automatiques, historique des performances, comparaisons avec objectifs.

Cr√©er les rapports clients avec : r√©sum√© d'avancement personnalis√©, timeline visuelle, photos et documents partag√©s, prochaines √©tapes, contact √©quipe, branding personnalis√©.

G√©rer l'export et partage avec : formats multiples (PDF, Excel, PowerPoint), templates personnalisables, planification d'envois r√©currents, partage s√©curis√© avec liens temporaires, int√©gration email.

‚öôÔ∏è **Interactions** :
- **Consomme** : Donn√©es de tous les modules li√©s, APIs externes
- **Expose** : M√©triques vers direction et clients
- **Int√®gre** : Syst√®me d'email, g√©n√©ration PDF, stockage cloud
- **Analyse** : Performance globale et optimisations possibles

üí° **Tips Windsurf** :
- Utiliser recharts pour visualisations performantes
- Impl√©menter calculs de m√©triques c√¥t√© serveur
- Optimiser requ√™tes avec vues mat√©rialis√©es
- Tester performance avec gros volumes de donn√©es
- Cr√©er templates de rapports r√©utilisables

---

## Section 4 : √âvolutions Futures

### Prompt 4.1 : Intelligence Artificielle et Automatisation Avanc√©e

üéØ **But** : Int√©grer des capacit√©s d'intelligence artificielle avanc√©es pour automatisation des t√¢ches, pr√©dictions intelligentes, recommandations personnalis√©es, et assistance proactive dans la gestion des mariages

üß† **Contexte** : Module IA utilisant Supabase Edge Functions, int√©gration OpenAI API, apprentissage automatique bas√© sur les donn√©es historiques, et automatisation des workflows r√©p√©titifs pour optimiser l'efficacit√© des wedding planners.

üõ†Ô∏è **Fichiers** :
- `supabase/functions/ai-wedding-assistant/index.ts`
- `supabase/functions/predictive-analytics/index.ts`
- `supabase/functions/workflow-automation/index.ts`
- `components/weddings/ai/AIAssistant.tsx`
- `components/weddings/ai/SmartRecommendations.tsx`
- `components/weddings/ai/AutomationRules.tsx`
- `services/ai-service.ts`
- `hooks/useAIAssistant.ts`

üîÑ **Comportement** :
Cr√©er l'assistant IA conversationnel avec : chatbot int√©gr√© pour aide contextuelle, r√©ponses bas√©es sur la base de connaissances mariage, suggestions d'actions bas√©es sur l'√©tat du mariage, g√©n√©ration automatique de templates de communication, r√©solution de probl√®mes courants.

D√©velopper les pr√©dictions intelligentes avec : pr√©diction de risques de retard bas√©e sur patterns historiques, estimation automatique de budgets selon crit√®res, pr√©diction de satisfaction client, identification proactive de probl√®mes potentiels, optimisation de planning.

Impl√©menter les recommandations personnalis√©es avec : suggestions de prestataires bas√©es sur pr√©f√©rences et budget, recommandations de timeline optimale, suggestions d'am√©liorations de processus, personnalisation de l'exp√©rience selon le style de mariage.

Cr√©er l'automatisation des workflows avec : cr√©ation automatique d'√©ch√©ances selon templates, envoi automatique de communications √† des moments cl√©s, mise √† jour automatique de statuts selon crit√®res, g√©n√©ration automatique de rapports p√©riodiques.

D√©velopper l'analyse pr√©dictive avec : mod√®les de machine learning pour pr√©diction de succ√®s, analyse de sentiment des communications client, d√©tection d'anomalies dans les processus, optimisation des ressources humaines.

Impl√©menter l'apprentissage continu avec : am√©lioration des mod√®les bas√©e sur feedback, adaptation aux sp√©cificit√©s de l'organisation, personnalisation progressive des recommandations, mise √† jour automatique des algorithmes.

Cr√©er l'interface de configuration avec : d√©finition de r√®gles d'automatisation personnalis√©es, configuration des seuils d'alerte IA, param√©trage des recommandations, gestion des permissions d'automatisation.

G√©rer l'√©thique et transparence avec : explicabilit√© des d√©cisions IA, contr√¥le humain sur actions critiques, audit trail des actions automatis√©es, respect de la confidentialit√© des donn√©es.

‚öôÔ∏è **Interactions** :
- **Consomme** : Donn√©es historiques de tous les modules, APIs IA externes
- **Expose** : Recommandations et automatisations vers utilisateurs
- **Int√®gre** : OpenAI API, mod√®les de ML personnalis√©s, Edge Functions
- **Apprend** : Continuellement des donn√©es et feedback utilisateurs

üí° **Tips Windsurf** :
- Utiliser Edge Functions pour traitement IA c√¥t√© serveur
- Impl√©menter cache intelligent pour recommandations
- Tester avec donn√©es anonymis√©es pour respect RGPD
- Cr√©er interfaces explicables pour d√©cisions IA
- Monitorer performance et biais des mod√®les

### Prompt 4.2 : Int√©gration √âcosyst√®me et API Publique

üéØ **But** : D√©velopper une API publique compl√®te et un √©cosyst√®me d'int√©grations pour connecter le module Suivi des Mariages avec des services tiers, partenaires, et applications externes

üß† **Contexte** : API publique avec authentification OAuth2, webhooks pour √©v√©nements temps r√©el, SDK pour d√©veloppeurs tiers, et marketplace d'int√©grations pour √©tendre les fonctionnalit√©s du module.

üõ†Ô∏è **Fichiers** :
- `apps/api-public/app/api/v1/weddings/route.ts`
- `apps/api-public/src/lib/auth/oauth-handler.ts`
- `apps/api-public/src/lib/webhooks/webhook-manager.ts`
- `apps/api-public/src/lib/integrations/integration-registry.ts`
- `docs/api/weddings-openapi.yaml`
- `sdk/javascript/weddings-sdk.ts`
- `sdk/python/weddings_sdk.py`

üîÑ **Comportement** :
Cr√©er l'API publique avec : endpoints RESTful pour consultation des mariages (lecture seule), webhooks pour √©v√©nements en temps r√©el, authentification OAuth2 avec scopes granulaires, rate limiting adaptatif, versioning d'API avec r√©trocompatibilit√©.

D√©velopper le syst√®me de webhooks avec : √©v√©nements configurables (wedding_created, progress_updated, deadline_approaching), retry automatique avec backoff exponentiel, signature cryptographique pour s√©curit√©, interface de gestion des abonnements.

Impl√©menter l'authentification OAuth2 avec : gestion des applications tierces, scopes d√©taill√©s (read_weddings, read_progress, receive_webhooks), tokens d'acc√®s avec expiration, refresh tokens s√©curis√©s, r√©vocation granulaire.

Cr√©er le registre d'int√©grations avec : catalogue d'int√©grations disponibles, installation en un clic, configuration guid√©e, gestion des permissions, monitoring des usages, marketplace communautaire.

D√©velopper les SDKs avec : biblioth√®que JavaScript/TypeScript compl√®te, SDK Python pour automatisations, wrapper .NET pour int√©grations entreprise, documentation interactive, exemples d'usage, tests automatis√©s.

Impl√©menter les int√©grations natives avec : Zapier pour automatisations no-code, Google Calendar pour synchronisation, Slack pour notifications √©quipe, Mailchimp pour marketing, QuickBooks pour comptabilit√©.

Cr√©er la documentation interactive avec : sp√©cification OpenAPI compl√®te, playground interactif, guides d'int√©gration par cas d'usage, exemples de code, FAQ d√©veloppeurs, support communautaire.

G√©rer la s√©curit√© et conformit√© avec : chiffrement end-to-end, audit trail des acc√®s API, conformit√© RGPD pour donn√©es partag√©es, certification SOC2, monitoring de s√©curit√©.

‚öôÔ∏è **Interactions** :
- **Expose** : Donn√©es mariage vers √©cosyst√®me externe
- **Int√®gre** : Services tiers populaires et sp√©cialis√©s
- **S√©curise** : Acc√®s contr√¥l√© avec authentification robuste
- **Monitore** : Usage et performance des int√©grations

üí° **Tips Windsurf** :
- Utiliser OpenAPI pour g√©n√©ration automatique de documentation
- Impl√©menter monitoring complet des APIs et webhooks
- Tester charge et s√©curit√© avec outils sp√©cialis√©s
- Cr√©er sandbox pour d√©veloppeurs tiers
- Maintenir r√©trocompatibilit√© stricte

### Prompt 4.3 : Exp√©rience Client Immersive et Collaboration

üéØ **But** : Cr√©er une exp√©rience client immersive avec portail d√©di√©, collaboration temps r√©el, r√©alit√© virtuelle pour visualisation, et outils de co-cr√©ation pour impliquer les clients dans le processus

üß† **Contexte** : Extension vers application client-portal avec fonctionnalit√©s immersives, int√©gration WebXR pour exp√©riences VR/AR, collaboration temps r√©el entre clients et wedding planners, et outils de personnalisation avanc√©s.

üõ†Ô∏è **Fichiers** :
- `apps/client-portal/app/wedding/[id]/page.tsx`
- `apps/client-portal/components/wedding/ImmersiveViewer.tsx`
- `apps/client-portal/components/wedding/CollaborationBoard.tsx`
- `apps/client-portal/components/wedding/VirtualShowroom.tsx`
- `apps/client-portal/components/wedding/ClientFeedback.tsx`
- `utils/webxr-utils.ts`
- `services/collaboration-service.ts`

üîÑ **Comportement** :
Cr√©er le portail client immersif avec : vue d'ensemble personnalis√©e du mariage, timeline interactive avec jalons visuels, galerie de photos et vid√©os en temps r√©el, espace de collaboration avec wedding planner, feedback et approbations en ligne.

D√©velopper la visualisation VR/AR avec : visite virtuelle 360¬∞ des lieux, pr√©visualisation AR de d√©corations, essayage virtuel de tenues, simulation de l'√©v√©nement en 3D, partage d'exp√©riences immersives.

Impl√©menter la collaboration temps r√©el avec : tableau de bord partag√© client-planner, annotations collaboratives sur documents, chat int√©gr√© avec historique, visioconf√©rence int√©gr√©e, partage d'√©cran pour pr√©sentations.

Cr√©er les outils de co-cr√©ation avec : mood board collaboratif, s√©lection de prestataires avec avis clients, personnalisation de templates, vote et sondages pour d√©cisions, wishlist partag√©e.

D√©velopper l'exp√©rience mobile native avec : application React Native d√©di√©e, notifications push personnalis√©es, mode hors ligne avec synchronisation, g√©olocalisation pour visites de lieux, r√©alit√© augment√©e mobile.

Impl√©menter le syst√®me de feedback avec : √©valuations en temps r√©el des propositions, syst√®me de notation des prestataires, commentaires structur√©s, suivi de satisfaction continue, am√©lioration bas√©e sur retours.

Cr√©er l'intelligence √©motionnelle avec : analyse de sentiment des communications, adaptation du ton selon l'humeur client, recommandations bas√©es sur pr√©f√©rences √©motionnelles, gestion proactive du stress.

G√©rer la personnalisation avanc√©e avec : profils de pr√©f√©rences d√©taill√©s, adaptation automatique de l'interface, recommandations ultra-personnalis√©es, m√©morisation des choix, √©volution des go√ªts.

‚öôÔ∏è **Interactions** :
- **√âtend** : Module Suivi des Mariages vers exp√©rience client
- **Int√®gre** : WebXR, React Native, services de collaboration
- **Synchronise** : Temps r√©el entre client et wedding planner
- **Personnalise** : Exp√©rience selon profil et pr√©f√©rences client

üí° **Tips Windsurf** :
- Utiliser WebXR APIs pour exp√©riences immersives
- Optimiser pour diff√©rents appareils et connexions
- Tester compatibilit√© VR/AR sur multiples plateformes
- Impl√©menter progressive web app pour mobile
- Cr√©er exp√©riences accessibles pour tous utilisateurs

---

## Validation et Coh√©rence Inter-Modules

### Analyse de Coh√©rence avec l'√âcosyst√®me ERP

Le module Suivi des Mariages pr√©sente une int√©gration complexe et critique avec l'ensemble de l'√©cosyst√®me ERP Wedding Collection, n√©cessitant une validation approfondie pour garantir la coh√©rence architecturale, fonctionnelle, et technique.

L'**int√©gration avec le module Clients** constitue une d√©pendance fondamentale, le module Suivi des Mariages √©tendant les fonctionnalit√©s client avec des donn√©es sp√©cialis√©es pour l'organisation de mariages. La coh√©rence des donn√©es client doit √™tre maintenue entre les deux modules, avec synchronisation bidirectionnelle des informations de contact, pr√©f√©rences, et historique. Les permissions d'acc√®s aux donn√©es client doivent √™tre coh√©rentes avec les r√¥les d√©finis dans le module Clients, et les mises √† jour de statut client doivent se refl√©ter automatiquement dans le suivi des mariages.

L'**extension du module √âv√©nements** repr√©sente une relation architecturale critique, le module Suivi des Mariages sp√©cialisant le concept g√©n√©rique d'√©v√©nement pour les besoins sp√©cifiques du mariage. Cette approche garantit la r√©utilisabilit√© des donn√©es de base (date, lieu, participants) tout en ajoutant les fonctionnalit√©s de suivi op√©rationnel. La validation doit s'assurer que les modifications d'√©v√©nement se propagent correctement vers le suivi de mariage, et que les donn√©es sp√©cialis√©es n'entrent pas en conflit avec la structure g√©n√©rique.

L'**int√©gration avec le module Calendrier** n√©cessite une synchronisation bidirectionnelle sophistiqu√©e, les √©ch√©ances du suivi de mariage devant appara√Ætre dans le calendrier global tout en respectant les permissions et la visibilit√© appropri√©es. Les conflits de planning doivent √™tre d√©tect√©s et r√©solus automatiquement, et les modifications d'√©ch√©ances doivent se refl√©ter imm√©diatement dans les deux modules.

La **pr√©paration pour le module Facturation** implique la structuration des donn√©es financi√®res de mani√®re compatible avec les futures fonctionnalit√©s de facturation. Les montants contractuels, √©ch√©ances de paiement, et donn√©es prestataires doivent √™tre organis√©s selon les standards qui faciliteront l'int√©gration future. Les APIs expos√©es doivent anticiper les besoins du module Facturation pour √©viter les refactorisations majeures.

L'**interface avec le futur module Prestataires** n√©cessite une architecture extensible qui permette l'√©volution du syst√®me de gestion des prestataires vers un module d√©di√©. Les donn√©es prestataires actuellement g√©r√©es dans le contexte du mariage doivent pouvoir √™tre migr√©es vers un catalogue centralis√© sans perte d'information ni disruption des workflows existants.

### Recommandations d'Harmonisation

Plusieurs am√©liorations peuvent √™tre apport√©es au module Suivi des Mariages pour optimiser son int√©gration dans l'√©cosyst√®me ERP Wedding Collection et pr√©parer les √©volutions futures.

L'**impl√©mentation d'un syst√®me d'√©v√©nements unifi√©** permettrait une communication asynchrone standardis√©e entre tous les modules de l'ERP. Les √©v√©nements `wedding_progress_updated`, `wedding_deadline_created`, `wedding_vendor_confirmed` pourraient √™tre √©mis automatiquement pour synchroniser les modules d√©pendants et d√©clencher des actions automatis√©es.

L'**adoption d'un cache distribu√© centralis√©** am√©liorerait significativement les performances globales de l'ERP en √©vitant la duplication des donn√©es fr√©quemment consult√©es. Un cache Redis partag√© pourrait stocker les informations client, √©v√©nement, et utilisateur utilis√©es par multiple modules.

L'**standardisation des APIs inter-modules** faciliterait l'int√©gration et la maintenance en d√©finissant des contrats d'interface clairs et versionn√©s. Cette approche permettrait l'√©volution ind√©pendante des modules tout en maintenant la compatibilit√©.

L'**impl√©mentation de workflows transversaux** permettrait l'orchestration de processus complexes impliquant plusieurs modules. Par exemple, la cr√©ation d'un mariage pourrait d√©clencher automatiquement la cr√©ation d'√©ch√©ances dans le calendrier, l'initialisation de documents types, et la configuration des rappels.

### √âl√©ments Manquants Identifi√©s

L'analyse r√©v√®le plusieurs √©l√©ments qui pourraient enrichir le module Suivi des Mariages pour une couverture fonctionnelle compl√®te et une meilleure int√©gration √©cosyst√©mique.

Un **syst√®me de templates de mariage** pourrait √™tre d√©velopp√© pour standardiser et acc√©l√©rer la cr√©ation de nouveaux suivis de mariage. Ces templates incluraient des configurations pr√©d√©finies de composantes, √©ch√©ances types, et workflows selon le type et la taille du mariage.

Un **module de gestion des risques** pourrait √™tre int√©gr√© pour identifier proactivement les probl√®mes potentiels, g√©rer les plans de contingence, et maintenir des alternatives pour les √©l√©ments critiques du mariage.

Un **syst√®me de certification qualit√©** pourrait valider automatiquement la conformit√© des processus aux standards de l'industrie du mariage, avec audits p√©riodiques et am√©lioration continue.

Un **module de gestion des √©motions et stress** pourrait aider les wedding planners √† g√©rer l'aspect psychologique de l'organisation de mariage, avec outils de d√©tection de stress client et techniques de gestion.

Cette analyse de coh√©rence et ces recommandations d'am√©lioration constituent une base solide pour l'√©volution continue du module Suivi des Mariages dans l'√©cosyst√®me ERP Wedding Collection, garantissant une int√©gration harmonieuse et une valeur ajout√©e maximale pour les utilisateurs.

