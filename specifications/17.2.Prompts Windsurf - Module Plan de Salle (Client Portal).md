# Prompts Windsurf - Module Plan de Salle (Client Portal)

## 🎯 Vue d'Ensemble

Ce document fournit une séquence complète de **16 prompts Windsurf** pour développer le **Module Plan de Salle** du Client Portal Wedding Collection. Chaque prompt est optimisé pour exploiter les capacités spécifiques de Windsurf (Cascade, Supercomplete, MCP) et s'intègre parfaitement avec l'écosystème Client Portal existant.

### 📋 Architecture Cible
```
apps/client-portal/src/
├── components/plan-salle/        # Composants du module Plan de Salle
├── pages/plan-salle/            # Pages du module
├── hooks/plan-salle/            # Hooks spécialisés
├── services/plan-salle/         # Services API
└── types/plan-salle/            # Types TypeScript
```

### 🔄 Intégrations Client Portal
- **Module Événement** : Contexte et informations de base de l'événement
- **Module Invités** : Liste des invités et statuts RSVP pour assignation
- **Module Lieu** : Informations sur les lieux et modèles de salles
- **Module Planning Événement** : Coordination des activités nécessitant configuration salle
- **Backoffice** : Synchronisation bidirectionnelle et validation des plans

---

## 📚 Section 1 : Initialisation (4 prompts)

### Prompt 1 : Création du Schéma de Base de Données Plan de Salle

🎯 **But** : Créer le schéma de base de données complet pour le module Plan de Salle avec tables, relations, contraintes et politiques RLS.

🧠 **Contexte technique** : Extension de la base Supabase existante avec nouvelles tables spécialisées pour la gestion des plans de salle interactifs, intégration avec les modules existants du Client Portal et synchronisation avec le Backoffice.

🛠️ **Fichiers concernés** :
- `supabase/migrations/[timestamp]_create_floor_plan_schema.sql`
- `supabase/migrations/[timestamp]_create_floor_plan_rls.sql`
- `supabase/migrations/[timestamp]_create_floor_plan_functions.sql`

🔄 **Comportement attendu** :
- Table `floor_plans` avec informations générales et métadonnées
- Table `floor_plan_versions` pour gestion des versions et historique
- Table `floor_plan_elements` pour éléments individuels (tables, chaises, décor)
- Table `guest_assignments` pour assignation des invités aux places
- Table `furniture_library_items` pour bibliothèque d'éléments prédéfinis
- Relations FK avec tables existantes (events, guests, venues)
- Contraintes d'intégrité et validation métier (capacités, positions)
- Politiques RLS pour sécurité granulaire par client et événement
- Fonctions RPC pour calculs de capacité et détection de conflits
- Triggers pour mise à jour automatique des timestamps et synchronisation

⚙️ **Interactions avec autres modules** :
- Référence à `events` pour contexte événement
- Référence à `guests` pour assignation des invités
- Référence à `venues` pour modèles de salles et contraintes
- Intégration avec système d'audit existant

💡 **Tips Windsurf** :
- Utilise MCP Supabase pour générer automatiquement les migrations
- Exploite Cascade pour analyser les schémas existants et assurer cohérence
- Configure les index pour optimiser les requêtes spatiales et de recherche

---

### Prompt 2 : Génération des Types TypeScript et Validation Zod

🎯 **But** : Générer les types TypeScript complets et schémas de validation Zod pour toutes les entités du module Plan de Salle.

🧠 **Contexte technique** : Types strictement typés pour garantir la cohérence entre frontend et backend, avec validation robuste des données utilisateur et gestion des éléments canvas interactifs.

🛠️ **Fichiers concernés** :
- `apps/client-portal/src/types/plan-salle/index.ts`
- `apps/client-portal/src/types/plan-salle/floor-plan.ts`
- `apps/client-portal/src/types/plan-salle/elements.ts`
- `apps/client-portal/src/types/plan-salle/canvas.ts`
- `apps/client-portal/src/lib/validations/plan-salle.ts`

🔄 **Comportement attendu** :
- Types TypeScript générés depuis schéma Supabase
- Interfaces pour FloorPlan, FloorPlanElement, GuestAssignment
- Types pour éléments canvas (position, rotation, dimensions)
- Enums pour types d'éléments, statuts, modes d'affichage
- Types pour drag-and-drop et interactions canvas
- Schémas Zod pour validation formulaires et API
- Types pour exports (PDF, image) et templates
- Utilitaires de transformation et mapping spatial
- Types pour synchronisation temps réel

⚙️ **Interactions avec autres modules** :
- Extension des types Event existants avec données plan de salle
- Réutilisation des types Guest et Venue
- Cohérence avec types des autres modules Client Portal

💡 **Tips Windsurf** :
- Utilise la génération automatique de types depuis Supabase
- Exploite Supercomplete pour cohérence avec types existants
- Configure la validation Zod avec contraintes spatiales et géométriques

---

### Prompt 3 : Architecture des Services et Hooks Plan de Salle

🎯 **But** : Créer l'architecture des services API et hooks React pour la gestion complète des plans de salle interactifs.

🧠 **Contexte technique** : Services robustes avec gestion d'erreurs, cache intelligent et hooks React optimisés pour performance canvas et expérience utilisateur, avec support des mises à jour temps réel.

🛠️ **Fichiers concernés** :
- `apps/client-portal/src/services/plan-salle/floorPlanService.ts`
- `apps/client-portal/src/services/plan-salle/elementService.ts`
- `apps/client-portal/src/services/plan-salle/guestAssignmentService.ts`
- `apps/client-portal/src/hooks/plan-salle/useFloorPlan.ts`
- `apps/client-portal/src/hooks/plan-salle/useCanvas.ts`
- `apps/client-portal/src/hooks/plan-salle/useGuestAssignment.ts`

🔄 **Comportement attendu** :
- Service floorPlanService avec CRUD complet et gestion versions
- Service elementService pour manipulation éléments canvas
- Service guestAssignmentService pour assignation invités avec validation
- Hook useFloorPlan avec cache et synchronisation temps réel
- Hook useCanvas avec gestion interactions et performance optimisée
- Hook useGuestAssignment avec drag-and-drop et validation contraintes
- Gestion d'erreurs centralisée avec retry automatique
- Cache intelligent avec invalidation sélective
- Support des mises à jour collaboratives temps réel

⚙️ **Interactions avec autres modules** :
- Intégration avec services Event et Guest existants
- Synchronisation avec module Planning Événement
- Utilisation des hooks d'authentification et permissions

💡 **Tips Windsurf** :
- Utilise React Query pour cache et synchronisation optimisés
- Implémente les optimistic updates pour fluidité UX canvas
- Configure Supabase Realtime pour collaboration temps réel

---

### Prompt 4 : Configuration des Contextes et État Global Canvas

🎯 **But** : Configurer les contextes React et la gestion d'état global pour le module Plan de Salle avec optimisations canvas et performance.

🧠 **Contexte technique** : Architecture d'état modulaire avec contextes spécialisés et optimisations pour éviter les re-renders inutiles du canvas, gestion des sélections et modes d'édition.

🛠️ **Fichiers concernés** :
- `apps/client-portal/src/contexts/plan-salle/FloorPlanContext.tsx`
- `apps/client-portal/src/contexts/plan-salle/CanvasContext.tsx`
- `apps/client-portal/src/contexts/plan-salle/SelectionContext.tsx`
- `apps/client-portal/src/contexts/plan-salle/FloorPlanProvider.tsx`

🔄 **Comportement attendu** :
- FloorPlanContext pour état global du plan actuel
- CanvasContext pour gestion du canvas (zoom, pan, mode édition)
- SelectionContext pour gestion des sélections et manipulations
- Provider principal avec composition des contextes
- Optimisations avec useMemo et useCallback pour performance canvas
- Persistance locale pour préférences de vue et outils
- Gestion des états de chargement et d'erreur
- Actions typées avec useReducer pour logique complexe
- Support des raccourcis clavier et navigation

⚙️ **Interactions avec autres modules** :
- Intégration avec AuthContext existant
- Synchronisation avec EventContext
- Partage d'état avec module Invités pour assignation

💡 **Tips Windsurf** :
- Utilise la composition de contextes pour éviter prop drilling
- Implémente la mémorisation pour optimiser les performances canvas
- Configure la persistance avec localStorage pour UX améliorée

---

## 🏗️ Section 2 : Fonctionnalités Principales (6 prompts)

### Prompt 5 : Éditeur Canvas Interactif avec React Konva

🎯 **But** : Développer l'éditeur canvas principal avec React Konva pour création et manipulation interactive des plans de salle.

🧠 **Contexte technique** : Interface canvas haute performance nécessitant une gestion optimisée des événements, du rendu et des interactions pour offrir une expérience fluide de création de plans.

🛠️ **Fichiers concernés** :
- `apps/client-portal/src/pages/plan-salle/EditorPage.tsx`
- `apps/client-portal/src/components/plan-salle/FloorPlanEditor.tsx`
- `apps/client-portal/src/components/plan-salle/CanvasStage.tsx`
- `apps/client-portal/src/components/plan-salle/FloorPlanElement.tsx`
- `apps/client-portal/src/components/plan-salle/CanvasControls.tsx`

🔄 **Comportement attendu** :
- Canvas principal avec React Konva pour rendu haute performance
- Manipulation d'éléments avec drag-and-drop, rotation, redimensionnement
- Zoom et pan fluides avec limites et contraintes
- Grille d'alignement et magnétisme pour placement précis
- Sélection multiple avec rectangle de sélection
- Outils de mesure et guides d'alignement
- Historique undo/redo pour toutes les actions
- Mode plein écran pour édition optimale
- Raccourcis clavier pour actions fréquentes

⚙️ **Interactions avec autres modules** :
- Intégration avec données des lieux pour contraintes spatiales
- Synchronisation avec module Planning Événement
- Utilisation des données invités pour validation capacités

💡 **Tips Windsurf** :
- Utilise React Konva avec optimisations de performance
- Implémente la virtualisation pour nombreux éléments
- Configure les transformations avec contraintes et validation

---


### Prompt 6 : Bibliothèque d'Éléments et Sidebar

🎯 **But** : Créer la bibliothèque d'éléments prédéfinis et le sidebar pour ajouter et configurer les éléments du plan de salle.

🧠 **Contexte technique** : Interface latérale avec bibliothèque d'éléments organisée par catégories, permettant l'ajout par drag-and-drop et la configuration des propriétés.

🛠️ **Fichiers concernés** :
- `apps/client-portal/src/components/plan-salle/ElementLibrarySidebar.tsx`
- `apps/client-portal/src/components/plan-salle/ElementCategory.tsx`
- `apps/client-portal/src/components/plan-salle/ElementItem.tsx`
- `apps/client-portal/src/components/plan-salle/ElementPropertiesPanel.tsx`
- `apps/client-portal/src/components/plan-salle/CustomElementCreator.tsx`

🔄 **Comportement attendu** :
- Sidebar avec bibliothèque d'éléments organisée par catégories
- Éléments prédéfinis : tables (rondes, rectangulaires), chaises, bar, scène, etc.
- Drag-and-drop depuis la bibliothèque vers le canvas
- Panneau de propriétés pour configurer les éléments sélectionnés
- Modification des dimensions, couleurs, rotation, capacité
- Création d'éléments personnalisés avec sauvegarde
- Recherche et filtrage dans la bibliothèque
- Favoris et éléments récemment utilisés
- Import d'éléments depuis des templates ou autres plans

⚙️ **Interactions avec autres modules** :
- Utilisation des modèles de lieux du Backoffice
- Intégration avec système de templates
- Synchronisation avec préférences utilisateur

💡 **Tips Windsurf** :
- Utilise React DnD pour drag-and-drop fluide
- Implémente la recherche avec debouncing pour performance
- Configure la persistance des favoris et éléments personnalisés

---

### Prompt 7 : Système d'Assignation des Invités

🎯 **But** : Développer le système complet d'assignation des invités aux tables et places avec interface intuitive et validation intelligente.

🧠 **Contexte technique** : Interface complexe permettant l'assignation drag-and-drop des invités avec gestion des contraintes, groupes et préférences.

🛠️ **Fichiers concernés** :
- `apps/client-portal/src/components/plan-salle/GuestAssignmentPanel.tsx`
- `apps/client-portal/src/components/plan-salle/GuestList.tsx`
- `apps/client-portal/src/components/plan-salle/TableAssignment.tsx`
- `apps/client-portal/src/components/plan-salle/UnassignedGuestList.tsx`
- `apps/client-portal/src/components/plan-salle/AssignmentValidation.tsx`

🔄 **Comportement attendu** :
- Panneau d'assignation avec liste des invités et statuts RSVP
- Drag-and-drop des invités vers les tables et places spécifiques
- Visualisation des capacités et places disponibles par table
- Gestion des groupes d'invités pour placement cohérent
- Validation automatique des contraintes (capacité, préférences)
- Détection et résolution des conflits d'assignation
- Filtrage des invités par statut, groupe, préférences alimentaires
- Suggestions automatiques de placement basées sur les relations
- Export des listes de placement par table

⚙️ **Interactions avec autres modules** :
- Synchronisation avec module Invités pour données et statuts
- Intégration avec données des groupes et relations
- Coordination avec module Planning Événement

💡 **Tips Windsurf** :
- Utilise React DnD avec validation en temps réel
- Implémente les algorithmes de suggestion avec machine learning
- Configure la synchronisation bidirectionnelle avec module Invités

---

### Prompt 8 : Gestion des Versions et Historique

🎯 **But** : Implémenter le système de gestion des versions et historique complet pour les plans de salle avec comparaison et restauration.

🧠 **Contexte technique** : Système de versioning robuste permettant la sauvegarde automatique, la comparaison visuelle et la restauration de versions antérieures.

🛠️ **Fichiers concernés** :
- `apps/client-portal/src/components/plan-salle/VersionHistoryPanel.tsx`
- `apps/client-portal/src/components/plan-salle/VersionComparison.tsx`
- `apps/client-portal/src/components/plan-salle/AutoSaveIndicator.tsx`
- `apps/client-portal/src/services/plan-salle/versionService.ts`
- `apps/client-portal/src/hooks/plan-salle/useVersionHistory.ts`

🔄 **Comportement attendu** :
- Sauvegarde automatique avec intervalles configurables
- Création de versions nommées pour jalons importants
- Historique chronologique avec aperçus visuels
- Comparaison côte-à-côte entre versions
- Restauration sélective d'éléments ou complète
- Annotations et commentaires sur les versions
- Compression intelligente pour optimiser le stockage
- Notifications de sauvegarde et conflits
- Export de l'historique pour archivage

⚙️ **Interactions avec autres modules** :
- Intégration avec système d'audit global
- Synchronisation avec Backoffice pour validation
- Coordination avec système de permissions

💡 **Tips Windsurf** :
- Utilise des algorithmes de diff pour optimiser le stockage
- Implémente la compression avec techniques de déduplication
- Configure les notifications temps réel pour collaboration

---

### Prompt 9 : Système de Validation et Détection de Conflits

🎯 **But** : Créer le système de validation automatique et détection de conflits pour garantir la cohérence des plans de salle.

🧠 **Contexte technique** : Algorithmes de validation en temps réel pour détecter les problèmes de capacité, placement et contraintes spatiales.

🛠️ **Fichiers concernés** :
- `apps/client-portal/src/services/plan-salle/validationService.ts`
- `apps/client-portal/src/components/plan-salle/ValidationPanel.tsx`
- `apps/client-portal/src/components/plan-salle/ConflictIndicator.tsx`
- `apps/client-portal/src/hooks/plan-salle/useValidation.ts`
- `supabase/functions/validate-floor-plan/index.ts`

🔄 **Comportement attendu** :
- Validation automatique en temps réel des modifications
- Détection des conflits de capacité et surcharge des tables
- Vérification des contraintes spatiales et accessibilité
- Validation des assignations d'invités et groupes
- Alertes visuelles pour problèmes détectés
- Suggestions automatiques de résolution
- Rapport de validation complet avant finalisation
- Validation des contraintes métier spécifiques au lieu
- Intégration avec règles de sécurité et réglementation

⚙️ **Interactions avec autres modules** :
- Validation croisée avec données des lieux et contraintes
- Vérification avec données des invités et groupes
- Coordination avec module Planning Événement

💡 **Tips Windsurf** :
- Implémente les algorithmes de validation côté serveur avec Edge Functions
- Utilise des structures de données optimisées pour performance
- Configure les validations avec règles métier configurables

---

### Prompt 10 : Interface de Visualisation et Modes d'Affichage

🎯 **But** : Développer les différents modes de visualisation du plan de salle (édition, présentation, impression) avec rendu optimisé.

🧠 **Contexte technique** : Interfaces de visualisation adaptées aux différents contextes d'utilisation avec optimisations de rendu et export.

🛠️ **Fichiers concernés** :
- `apps/client-portal/src/components/plan-salle/PresentationView.tsx`
- `apps/client-portal/src/components/plan-salle/PrintView.tsx`
- `apps/client-portal/src/components/plan-salle/ViewModeSelector.tsx`
- `apps/client-portal/src/components/plan-salle/FloorPlanViewer.tsx`
- `apps/client-portal/src/utils/plan-salle/renderOptimizations.ts`

🔄 **Comportement attendu** :
- Mode édition avec tous les outils et contrôles
- Mode présentation épuré pour visualisation client
- Mode impression optimisé avec mise en page adaptée
- Zoom et navigation adaptés à chaque mode
- Affichage conditionnel des informations selon le mode
- Optimisations de rendu pour chaque contexte
- Personnalisation des éléments visibles par mode
- Export haute résolution pour impression professionnelle
- Mode plein écran pour présentation

⚙️ **Interactions avec autres modules** :
- Intégration avec système de permissions pour modes
- Coordination avec préférences utilisateur
- Synchronisation avec données de présentation

💡 **Tips Windsurf** :
- Utilise des composants conditionnels pour optimiser le rendu
- Implémente les optimisations CSS pour impression
- Configure les exports avec résolutions adaptées

---

## 🎨 Section 3 : Fonctionnalités Secondaires (3 prompts)

### Prompt 11 : Système d'Export et Génération de Documents

🎯 **But** : Développer le système complet d'export (PDF, images) et génération de documents professionnels (cartes de placement, étiquettes).

🧠 **Contexte technique** : Fonctionnalité essentielle pour communication avec invités et équipes, nécessitant génération côté serveur et templates personnalisables.

🛠️ **Fichiers concernés** :
- `apps/client-portal/src/components/plan-salle/ExportModal.tsx`
- `apps/client-portal/src/services/plan-salle/exportService.ts`
- `apps/client-portal/src/services/plan-salle/documentGenerator.ts`
- `apps/client-portal/src/utils/plan-salle/pdfGenerator.ts`
- `supabase/functions/generate-floor-plan-pdf/index.ts`

🔄 **Comportement attendu** :
- Export PDF haute résolution avec options de mise en page
- Export image (PNG, JPEG) avec résolutions configurables
- Génération automatique de cartes de placement personnalisées
- Création d'étiquettes de table avec design cohérent
- Templates personnalisables pour différents types d'événements
- Génération de listes de placement par table
- Export des plans avec ou sans assignations d'invités
- Génération asynchrone avec notification de fin
- Intégration avec système d'impression professionnel

⚙️ **Interactions avec autres modules** :
- Utilisation des données de tous les composants du plan
- Intégration avec système de templates
- Coordination avec module Communication pour envoi

💡 **Tips Windsurf** :
- Utilise Supabase Edge Functions pour génération PDF côté serveur
- Implémente les templates avec Puppeteer ou jsPDF
- Configure la génération asynchrone avec queues de traitement

---

### Prompt 12 : Système de Templates et Modèles Prédéfinis

🎯 **But** : Créer le système de templates et modèles prédéfinis pour accélérer la création de plans de salle.

🧠 **Contexte technique** : Bibliothèque de templates organisée avec système de recherche et personnalisation pour différents types d'événements et lieux.

🛠️ **Fichiers concernés** :
- `apps/client-portal/src/components/plan-salle/TemplateLibrary.tsx`
- `apps/client-portal/src/components/plan-salle/TemplateSelector.tsx`
- `apps/client-portal/src/components/plan-salle/TemplatePreview.tsx`
- `apps/client-portal/src/services/plan-salle/templateService.ts`
- `apps/client-portal/src/hooks/plan-salle/useTemplates.ts`

🔄 **Comportement attendu** :
- Bibliothèque de templates organisée par type d'événement
- Aperçu visuel des templates avec informations détaillées
- Application de templates avec adaptation automatique
- Personnalisation des templates avant application
- Sauvegarde de plans comme nouveaux templates
- Partage de templates entre utilisateurs (avec permissions)
- Recherche et filtrage dans la bibliothèque
- Templates adaptatifs selon les contraintes du lieu
- Versioning des templates avec historique

⚙️ **Interactions avec autres modules** :
- Intégration avec données des lieux pour adaptation
- Synchronisation avec Backoffice pour templates officiels
- Coordination avec système de permissions

💡 **Tips Windsurf** :
- Utilise un système de tags pour organisation et recherche
- Implémente l'adaptation automatique avec algorithmes géométriques
- Configure la synchronisation avec bibliothèque centrale

---

### Prompt 13 : Synchronisation Bidirectionnelle avec Backoffice

🎯 **But** : Créer le système de synchronisation bidirectionnelle robuste entre le Client Portal et le Backoffice avec gestion des conflits.

🧠 **Contexte technique** : Synchronisation complexe nécessitant gestion des conflits, versioning et mécanismes de résolution pour maintenir la cohérence des données.

🛠️ **Fichiers concernés** :
- `apps/client-portal/src/services/plan-salle/syncService.ts`
- `apps/client-portal/src/components/plan-salle/SyncStatus.tsx`
- `apps/client-portal/src/components/plan-salle/ConflictResolution.tsx`
- `apps/client-portal/src/hooks/plan-salle/useSync.ts`
- `supabase/functions/sync-floor-plan-backoffice/index.ts`

🔄 **Comportement attendu** :
- Synchronisation automatique des modifications en temps réel
- Détection des conflits de modification simultanée
- Interface de résolution de conflits avec diff visuel
- Versioning des plans avec historique complet
- Notifications de synchronisation et conflits
- Mode hors ligne avec synchronisation différée
- Validation des permissions avant synchronisation
- Logs détaillés pour audit et debugging
- Rollback automatique en cas d'erreur critique

⚙️ **Interactions avec autres modules** :
- Synchronisation avec tous les modules du Backoffice
- Intégration avec système d'audit global
- Coordination avec système de permissions

💡 **Tips Windsurf** :
- Utilise des queues de synchronisation avec retry automatique
- Implémente le versioning avec timestamps et checksums
- Configure les webhooks pour notifications bidirectionnelles

---

## 🚀 Section 4 : Évolutions Futures (3 prompts)

### Prompt 14 : Intelligence Artificielle et Optimisation Automatique

🎯 **But** : Implémenter des fonctionnalités d'IA pour optimisation automatique des plans et suggestions intelligentes de placement.

🧠 **Contexte technique** : Fonctionnalités avancées utilisant l'IA pour améliorer l'efficacité de la planification et proposer des optimisations basées sur l'historique et les bonnes pratiques.

🛠️ **Fichiers concernés** :
- `apps/client-portal/src/services/plan-salle/aiService.ts`
- `apps/client-portal/src/components/plan-salle/AISuggestions.tsx`
- `apps/client-portal/src/components/plan-salle/AutoOptimizer.tsx`
- `apps/client-portal/src/utils/plan-salle/optimizationAlgorithms.ts`
- `supabase/functions/ai-floor-plan-optimizer/index.ts`

🔄 **Comportement attendu** :
- Suggestions automatiques d'optimisation du plan de salle
- Placement intelligent des invités basé sur les relations sociales
- Optimisation de l'espace et de la circulation
- Recommandations basées sur historique d'événements similaires
- Détection automatique des problèmes de design
- Suggestions de disposition pour maximiser l'interaction
- Analyse prédictive des flux de circulation
- Apprentissage des préférences utilisateur
- Intégration avec services d'IA externes (OpenAI, etc.)

⚙️ **Interactions avec autres modules** :
- Utilisation des données historiques de tous les modules
- Intégration avec module Analytics pour apprentissage
- Connexion avec services d'IA externes

💡 **Tips Windsurf** :
- Utilise Supabase Edge Functions pour traitement IA côté serveur
- Implémente les algorithmes d'optimisation avec des librairies spécialisées
- Configure l'apprentissage automatique avec feedback utilisateur

---

### Prompt 15 : Réalité Augmentée et Visualisation 3D

🎯 **But** : Développer les fonctionnalités de réalité augmentée et visualisation 3D pour une expérience immersive du plan de salle.

🧠 **Contexte technique** : Technologies avancées de visualisation pour permettre aux clients de visualiser leur plan de salle en 3D et en réalité augmentée.

🛠️ **Fichiers concernés** :
- `apps/client-portal/src/components/plan-salle/AR3DViewer.tsx`
- `apps/client-portal/src/components/plan-salle/ThreeDRenderer.tsx`
- `apps/client-portal/src/services/plan-salle/arService.ts`
- `apps/client-portal/src/utils/plan-salle/3dConversion.ts`
- `apps/client-portal/src/hooks/plan-salle/useAR.ts`

🔄 **Comportement attendu** :
- Visualisation 3D interactive du plan de salle
- Mode réalité augmentée pour visualisation in-situ
- Navigation 3D fluide avec contrôles intuitifs
- Conversion automatique du plan 2D vers 3D
- Personnalisation des matériaux et textures
- Simulation de l'éclairage et de l'ambiance
- Export de rendus 3D haute qualité
- Partage de vues 3D avec clients et prestataires
- Intégration avec casques VR pour expérience immersive

⚙️ **Interactions avec autres modules** :
- Utilisation des données de décoration et ambiance
- Intégration avec module Planning pour simulation temporelle
- Coordination avec données des lieux pour réalisme

💡 **Tips Windsurf** :
- Utilise Three.js ou React Three Fiber pour rendu 3D
- Implémente WebXR pour réalité augmentée native
- Configure les optimisations pour performance mobile

---

### Prompt 16 : Analytics et Optimisation de Performance

🎯 **But** : Créer un système d'analytics avancé et d'optimisation de performance pour analyser l'utilisation et améliorer l'expérience.

🧠 **Contexte technique** : Système de business intelligence pour extraire des insights des données d'utilisation et optimiser les performances du module.

🛠️ **Fichiers concernés** :
- `apps/client-portal/src/components/plan-salle/AnalyticsDashboard.tsx`
- `apps/client-portal/src/components/plan-salle/PerformanceMetrics.tsx`
- `apps/client-portal/src/services/plan-salle/analyticsService.ts`
- `apps/client-portal/src/utils/plan-salle/performanceOptimizer.ts`
- `supabase/functions/floor-plan-analytics/index.ts`

🔄 **Comportement attendu** :
- Dashboard d'analytics avec métriques d'utilisation
- Analyse des patterns de création et modification
- Métriques de performance du canvas et interactions
- Optimisations automatiques basées sur l'usage
- Rapports d'utilisation des templates et éléments
- Analyse comparative des plans par type d'événement
- Détection des goulots d'étranglement de performance
- Suggestions d'amélioration basées sur les données
- Intégration avec outils de monitoring externes

⚙️ **Interactions avec autres modules** :
- Agrégation des données de tous les modules
- Intégration avec module Analytics global
- Connexion avec systèmes de monitoring externes

💡 **Tips Windsurf** :
- Utilise des librairies de visualisation comme Chart.js ou D3.js
- Implémente les calculs d'analytics côté serveur pour performance
- Configure le monitoring avec métriques temps réel

---

## 🎯 Résumé et Ordre d'Exécution

### ✅ Ordre d'Exécution Recommandé

1. **Phase Initialisation (Prompts 1-4)** : Fondations techniques solides
2. **Phase Fonctionnalités Principales (Prompts 5-10)** : Cœur fonctionnel du module
3. **Phase Fonctionnalités Secondaires (Prompts 11-13)** : Enrichissement de l'expérience
4. **Phase Évolutions Futures (Prompts 14-16)** : Innovations et technologies avancées

### 🔧 Points d'Attention Spécifiques

- **Performance Canvas** : Optimisation critique pour manipulation fluide des éléments
- **Synchronisation** : Gestion robuste des conflits avec le Backoffice
- **UX Drag-and-Drop** : Interface intuitive essentielle pour adoption utilisateur
- **Validation Temps Réel** : Détection immédiate des problèmes et conflits

### 🚀 Résultat Final

Un module Plan de Salle complet offrant :
- Éditeur canvas interactif haute performance avec React Konva
- Système d'assignation intelligent des invités avec validation
- Gestion complète des versions et historique
- Exports professionnels et génération de documents
- Synchronisation bidirectionnelle robuste avec Backoffice
- Évolutivité vers IA, 3D et analytics avancés

**Le module Plan de Salle deviendra l'outil central de planification spatiale pour les événements Wedding Collection ! 🎉**

