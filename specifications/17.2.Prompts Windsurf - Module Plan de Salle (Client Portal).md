# Prompts Windsurf - Module Plan de Salle (Client Portal)

## üéØ Vue d'Ensemble

Ce document fournit une s√©quence compl√®te de **16 prompts Windsurf** pour d√©velopper le **Module Plan de Salle** du Client Portal Wedding Collection. Chaque prompt est optimis√© pour exploiter les capacit√©s sp√©cifiques de Windsurf (Cascade, Supercomplete, MCP) et s'int√®gre parfaitement avec l'√©cosyst√®me Client Portal existant.

### üìã Architecture Cible
```
apps/client-portal/src/
‚îú‚îÄ‚îÄ components/plan-salle/        # Composants du module Plan de Salle
‚îú‚îÄ‚îÄ pages/plan-salle/            # Pages du module
‚îú‚îÄ‚îÄ hooks/plan-salle/            # Hooks sp√©cialis√©s
‚îú‚îÄ‚îÄ services/plan-salle/         # Services API
‚îî‚îÄ‚îÄ types/plan-salle/            # Types TypeScript
```

### üîÑ Int√©grations Client Portal
- **Module √âv√©nement** : Contexte et informations de base de l'√©v√©nement
- **Module Invit√©s** : Liste des invit√©s et statuts RSVP pour assignation
- **Module Lieu** : Informations sur les lieux et mod√®les de salles
- **Module Planning √âv√©nement** : Coordination des activit√©s n√©cessitant configuration salle
- **Backoffice** : Synchronisation bidirectionnelle et validation des plans

---

## üìö Section 1 : Initialisation (4 prompts)

### Prompt 1 : Cr√©ation du Sch√©ma de Base de Donn√©es Plan de Salle

üéØ **But** : Cr√©er le sch√©ma de base de donn√©es complet pour le module Plan de Salle avec tables, relations, contraintes et politiques RLS.

üß† **Contexte technique** : Extension de la base Supabase existante avec nouvelles tables sp√©cialis√©es pour la gestion des plans de salle interactifs, int√©gration avec les modules existants du Client Portal et synchronisation avec le Backoffice.

üõ†Ô∏è **Fichiers concern√©s** :
- `supabase/migrations/[timestamp]_create_floor_plan_schema.sql`
- `supabase/migrations/[timestamp]_create_floor_plan_rls.sql`
- `supabase/migrations/[timestamp]_create_floor_plan_functions.sql`

üîÑ **Comportement attendu** :
- Table `floor_plans` avec informations g√©n√©rales et m√©tadonn√©es
- Table `floor_plan_versions` pour gestion des versions et historique
- Table `floor_plan_elements` pour √©l√©ments individuels (tables, chaises, d√©cor)
- Table `guest_assignments` pour assignation des invit√©s aux places
- Table `furniture_library_items` pour biblioth√®que d'√©l√©ments pr√©d√©finis
- Relations FK avec tables existantes (events, guests, venues)
- Contraintes d'int√©grit√© et validation m√©tier (capacit√©s, positions)
- Politiques RLS pour s√©curit√© granulaire par client et √©v√©nement
- Fonctions RPC pour calculs de capacit√© et d√©tection de conflits
- Triggers pour mise √† jour automatique des timestamps et synchronisation

‚öôÔ∏è **Interactions avec autres modules** :
- R√©f√©rence √† `events` pour contexte √©v√©nement
- R√©f√©rence √† `guests` pour assignation des invit√©s
- R√©f√©rence √† `venues` pour mod√®les de salles et contraintes
- Int√©gration avec syst√®me d'audit existant

üí° **Tips Windsurf** :
- Utilise MCP Supabase pour g√©n√©rer automatiquement les migrations
- Exploite Cascade pour analyser les sch√©mas existants et assurer coh√©rence
- Configure les index pour optimiser les requ√™tes spatiales et de recherche

---

### Prompt 2 : G√©n√©ration des Types TypeScript et Validation Zod

üéØ **But** : G√©n√©rer les types TypeScript complets et sch√©mas de validation Zod pour toutes les entit√©s du module Plan de Salle.

üß† **Contexte technique** : Types strictement typ√©s pour garantir la coh√©rence entre frontend et backend, avec validation robuste des donn√©es utilisateur et gestion des √©l√©ments canvas interactifs.

üõ†Ô∏è **Fichiers concern√©s** :
- `apps/client-portal/src/types/plan-salle/index.ts`
- `apps/client-portal/src/types/plan-salle/floor-plan.ts`
- `apps/client-portal/src/types/plan-salle/elements.ts`
- `apps/client-portal/src/types/plan-salle/canvas.ts`
- `apps/client-portal/src/lib/validations/plan-salle.ts`

üîÑ **Comportement attendu** :
- Types TypeScript g√©n√©r√©s depuis sch√©ma Supabase
- Interfaces pour FloorPlan, FloorPlanElement, GuestAssignment
- Types pour √©l√©ments canvas (position, rotation, dimensions)
- Enums pour types d'√©l√©ments, statuts, modes d'affichage
- Types pour drag-and-drop et interactions canvas
- Sch√©mas Zod pour validation formulaires et API
- Types pour exports (PDF, image) et templates
- Utilitaires de transformation et mapping spatial
- Types pour synchronisation temps r√©el

‚öôÔ∏è **Interactions avec autres modules** :
- Extension des types Event existants avec donn√©es plan de salle
- R√©utilisation des types Guest et Venue
- Coh√©rence avec types des autres modules Client Portal

üí° **Tips Windsurf** :
- Utilise la g√©n√©ration automatique de types depuis Supabase
- Exploite Supercomplete pour coh√©rence avec types existants
- Configure la validation Zod avec contraintes spatiales et g√©om√©triques

---

### Prompt 3 : Architecture des Services et Hooks Plan de Salle

üéØ **But** : Cr√©er l'architecture des services API et hooks React pour la gestion compl√®te des plans de salle interactifs.

üß† **Contexte technique** : Services robustes avec gestion d'erreurs, cache intelligent et hooks React optimis√©s pour performance canvas et exp√©rience utilisateur, avec support des mises √† jour temps r√©el.

üõ†Ô∏è **Fichiers concern√©s** :
- `apps/client-portal/src/services/plan-salle/floorPlanService.ts`
- `apps/client-portal/src/services/plan-salle/elementService.ts`
- `apps/client-portal/src/services/plan-salle/guestAssignmentService.ts`
- `apps/client-portal/src/hooks/plan-salle/useFloorPlan.ts`
- `apps/client-portal/src/hooks/plan-salle/useCanvas.ts`
- `apps/client-portal/src/hooks/plan-salle/useGuestAssignment.ts`

üîÑ **Comportement attendu** :
- Service floorPlanService avec CRUD complet et gestion versions
- Service elementService pour manipulation √©l√©ments canvas
- Service guestAssignmentService pour assignation invit√©s avec validation
- Hook useFloorPlan avec cache et synchronisation temps r√©el
- Hook useCanvas avec gestion interactions et performance optimis√©e
- Hook useGuestAssignment avec drag-and-drop et validation contraintes
- Gestion d'erreurs centralis√©e avec retry automatique
- Cache intelligent avec invalidation s√©lective
- Support des mises √† jour collaboratives temps r√©el

‚öôÔ∏è **Interactions avec autres modules** :
- Int√©gration avec services Event et Guest existants
- Synchronisation avec module Planning √âv√©nement
- Utilisation des hooks d'authentification et permissions

üí° **Tips Windsurf** :
- Utilise React Query pour cache et synchronisation optimis√©s
- Impl√©mente les optimistic updates pour fluidit√© UX canvas
- Configure Supabase Realtime pour collaboration temps r√©el

---

### Prompt 4 : Configuration des Contextes et √âtat Global Canvas

üéØ **But** : Configurer les contextes React et la gestion d'√©tat global pour le module Plan de Salle avec optimisations canvas et performance.

üß† **Contexte technique** : Architecture d'√©tat modulaire avec contextes sp√©cialis√©s et optimisations pour √©viter les re-renders inutiles du canvas, gestion des s√©lections et modes d'√©dition.

üõ†Ô∏è **Fichiers concern√©s** :
- `apps/client-portal/src/contexts/plan-salle/FloorPlanContext.tsx`
- `apps/client-portal/src/contexts/plan-salle/CanvasContext.tsx`
- `apps/client-portal/src/contexts/plan-salle/SelectionContext.tsx`
- `apps/client-portal/src/contexts/plan-salle/FloorPlanProvider.tsx`

üîÑ **Comportement attendu** :
- FloorPlanContext pour √©tat global du plan actuel
- CanvasContext pour gestion du canvas (zoom, pan, mode √©dition)
- SelectionContext pour gestion des s√©lections et manipulations
- Provider principal avec composition des contextes
- Optimisations avec useMemo et useCallback pour performance canvas
- Persistance locale pour pr√©f√©rences de vue et outils
- Gestion des √©tats de chargement et d'erreur
- Actions typ√©es avec useReducer pour logique complexe
- Support des raccourcis clavier et navigation

‚öôÔ∏è **Interactions avec autres modules** :
- Int√©gration avec AuthContext existant
- Synchronisation avec EventContext
- Partage d'√©tat avec module Invit√©s pour assignation

üí° **Tips Windsurf** :
- Utilise la composition de contextes pour √©viter prop drilling
- Impl√©mente la m√©morisation pour optimiser les performances canvas
- Configure la persistance avec localStorage pour UX am√©lior√©e

---

## üèóÔ∏è Section 2 : Fonctionnalit√©s Principales (6 prompts)

### Prompt 5 : √âditeur Canvas Interactif avec React Konva

üéØ **But** : D√©velopper l'√©diteur canvas principal avec React Konva pour cr√©ation et manipulation interactive des plans de salle.

üß† **Contexte technique** : Interface canvas haute performance n√©cessitant une gestion optimis√©e des √©v√©nements, du rendu et des interactions pour offrir une exp√©rience fluide de cr√©ation de plans.

üõ†Ô∏è **Fichiers concern√©s** :
- `apps/client-portal/src/pages/plan-salle/EditorPage.tsx`
- `apps/client-portal/src/components/plan-salle/FloorPlanEditor.tsx`
- `apps/client-portal/src/components/plan-salle/CanvasStage.tsx`
- `apps/client-portal/src/components/plan-salle/FloorPlanElement.tsx`
- `apps/client-portal/src/components/plan-salle/CanvasControls.tsx`

üîÑ **Comportement attendu** :
- Canvas principal avec React Konva pour rendu haute performance
- Manipulation d'√©l√©ments avec drag-and-drop, rotation, redimensionnement
- Zoom et pan fluides avec limites et contraintes
- Grille d'alignement et magn√©tisme pour placement pr√©cis
- S√©lection multiple avec rectangle de s√©lection
- Outils de mesure et guides d'alignement
- Historique undo/redo pour toutes les actions
- Mode plein √©cran pour √©dition optimale
- Raccourcis clavier pour actions fr√©quentes

‚öôÔ∏è **Interactions avec autres modules** :
- Int√©gration avec donn√©es des lieux pour contraintes spatiales
- Synchronisation avec module Planning √âv√©nement
- Utilisation des donn√©es invit√©s pour validation capacit√©s

üí° **Tips Windsurf** :
- Utilise React Konva avec optimisations de performance
- Impl√©mente la virtualisation pour nombreux √©l√©ments
- Configure les transformations avec contraintes et validation

---


### Prompt 6 : Biblioth√®que d'√âl√©ments et Sidebar

üéØ **But** : Cr√©er la biblioth√®que d'√©l√©ments pr√©d√©finis et le sidebar pour ajouter et configurer les √©l√©ments du plan de salle.

üß† **Contexte technique** : Interface lat√©rale avec biblioth√®que d'√©l√©ments organis√©e par cat√©gories, permettant l'ajout par drag-and-drop et la configuration des propri√©t√©s.

üõ†Ô∏è **Fichiers concern√©s** :
- `apps/client-portal/src/components/plan-salle/ElementLibrarySidebar.tsx`
- `apps/client-portal/src/components/plan-salle/ElementCategory.tsx`
- `apps/client-portal/src/components/plan-salle/ElementItem.tsx`
- `apps/client-portal/src/components/plan-salle/ElementPropertiesPanel.tsx`
- `apps/client-portal/src/components/plan-salle/CustomElementCreator.tsx`

üîÑ **Comportement attendu** :
- Sidebar avec biblioth√®que d'√©l√©ments organis√©e par cat√©gories
- √âl√©ments pr√©d√©finis : tables (rondes, rectangulaires), chaises, bar, sc√®ne, etc.
- Drag-and-drop depuis la biblioth√®que vers le canvas
- Panneau de propri√©t√©s pour configurer les √©l√©ments s√©lectionn√©s
- Modification des dimensions, couleurs, rotation, capacit√©
- Cr√©ation d'√©l√©ments personnalis√©s avec sauvegarde
- Recherche et filtrage dans la biblioth√®que
- Favoris et √©l√©ments r√©cemment utilis√©s
- Import d'√©l√©ments depuis des templates ou autres plans

‚öôÔ∏è **Interactions avec autres modules** :
- Utilisation des mod√®les de lieux du Backoffice
- Int√©gration avec syst√®me de templates
- Synchronisation avec pr√©f√©rences utilisateur

üí° **Tips Windsurf** :
- Utilise React DnD pour drag-and-drop fluide
- Impl√©mente la recherche avec debouncing pour performance
- Configure la persistance des favoris et √©l√©ments personnalis√©s

---

### Prompt 7 : Syst√®me d'Assignation des Invit√©s

üéØ **But** : D√©velopper le syst√®me complet d'assignation des invit√©s aux tables et places avec interface intuitive et validation intelligente.

üß† **Contexte technique** : Interface complexe permettant l'assignation drag-and-drop des invit√©s avec gestion des contraintes, groupes et pr√©f√©rences.

üõ†Ô∏è **Fichiers concern√©s** :
- `apps/client-portal/src/components/plan-salle/GuestAssignmentPanel.tsx`
- `apps/client-portal/src/components/plan-salle/GuestList.tsx`
- `apps/client-portal/src/components/plan-salle/TableAssignment.tsx`
- `apps/client-portal/src/components/plan-salle/UnassignedGuestList.tsx`
- `apps/client-portal/src/components/plan-salle/AssignmentValidation.tsx`

üîÑ **Comportement attendu** :
- Panneau d'assignation avec liste des invit√©s et statuts RSVP
- Drag-and-drop des invit√©s vers les tables et places sp√©cifiques
- Visualisation des capacit√©s et places disponibles par table
- Gestion des groupes d'invit√©s pour placement coh√©rent
- Validation automatique des contraintes (capacit√©, pr√©f√©rences)
- D√©tection et r√©solution des conflits d'assignation
- Filtrage des invit√©s par statut, groupe, pr√©f√©rences alimentaires
- Suggestions automatiques de placement bas√©es sur les relations
- Export des listes de placement par table

‚öôÔ∏è **Interactions avec autres modules** :
- Synchronisation avec module Invit√©s pour donn√©es et statuts
- Int√©gration avec donn√©es des groupes et relations
- Coordination avec module Planning √âv√©nement

üí° **Tips Windsurf** :
- Utilise React DnD avec validation en temps r√©el
- Impl√©mente les algorithmes de suggestion avec machine learning
- Configure la synchronisation bidirectionnelle avec module Invit√©s

---

### Prompt 8 : Gestion des Versions et Historique

üéØ **But** : Impl√©menter le syst√®me de gestion des versions et historique complet pour les plans de salle avec comparaison et restauration.

üß† **Contexte technique** : Syst√®me de versioning robuste permettant la sauvegarde automatique, la comparaison visuelle et la restauration de versions ant√©rieures.

üõ†Ô∏è **Fichiers concern√©s** :
- `apps/client-portal/src/components/plan-salle/VersionHistoryPanel.tsx`
- `apps/client-portal/src/components/plan-salle/VersionComparison.tsx`
- `apps/client-portal/src/components/plan-salle/AutoSaveIndicator.tsx`
- `apps/client-portal/src/services/plan-salle/versionService.ts`
- `apps/client-portal/src/hooks/plan-salle/useVersionHistory.ts`

üîÑ **Comportement attendu** :
- Sauvegarde automatique avec intervalles configurables
- Cr√©ation de versions nomm√©es pour jalons importants
- Historique chronologique avec aper√ßus visuels
- Comparaison c√¥te-√†-c√¥te entre versions
- Restauration s√©lective d'√©l√©ments ou compl√®te
- Annotations et commentaires sur les versions
- Compression intelligente pour optimiser le stockage
- Notifications de sauvegarde et conflits
- Export de l'historique pour archivage

‚öôÔ∏è **Interactions avec autres modules** :
- Int√©gration avec syst√®me d'audit global
- Synchronisation avec Backoffice pour validation
- Coordination avec syst√®me de permissions

üí° **Tips Windsurf** :
- Utilise des algorithmes de diff pour optimiser le stockage
- Impl√©mente la compression avec techniques de d√©duplication
- Configure les notifications temps r√©el pour collaboration

---

### Prompt 9 : Syst√®me de Validation et D√©tection de Conflits

üéØ **But** : Cr√©er le syst√®me de validation automatique et d√©tection de conflits pour garantir la coh√©rence des plans de salle.

üß† **Contexte technique** : Algorithmes de validation en temps r√©el pour d√©tecter les probl√®mes de capacit√©, placement et contraintes spatiales.

üõ†Ô∏è **Fichiers concern√©s** :
- `apps/client-portal/src/services/plan-salle/validationService.ts`
- `apps/client-portal/src/components/plan-salle/ValidationPanel.tsx`
- `apps/client-portal/src/components/plan-salle/ConflictIndicator.tsx`
- `apps/client-portal/src/hooks/plan-salle/useValidation.ts`
- `supabase/functions/validate-floor-plan/index.ts`

üîÑ **Comportement attendu** :
- Validation automatique en temps r√©el des modifications
- D√©tection des conflits de capacit√© et surcharge des tables
- V√©rification des contraintes spatiales et accessibilit√©
- Validation des assignations d'invit√©s et groupes
- Alertes visuelles pour probl√®mes d√©tect√©s
- Suggestions automatiques de r√©solution
- Rapport de validation complet avant finalisation
- Validation des contraintes m√©tier sp√©cifiques au lieu
- Int√©gration avec r√®gles de s√©curit√© et r√©glementation

‚öôÔ∏è **Interactions avec autres modules** :
- Validation crois√©e avec donn√©es des lieux et contraintes
- V√©rification avec donn√©es des invit√©s et groupes
- Coordination avec module Planning √âv√©nement

üí° **Tips Windsurf** :
- Impl√©mente les algorithmes de validation c√¥t√© serveur avec Edge Functions
- Utilise des structures de donn√©es optimis√©es pour performance
- Configure les validations avec r√®gles m√©tier configurables

---

### Prompt 10 : Interface de Visualisation et Modes d'Affichage

üéØ **But** : D√©velopper les diff√©rents modes de visualisation du plan de salle (√©dition, pr√©sentation, impression) avec rendu optimis√©.

üß† **Contexte technique** : Interfaces de visualisation adapt√©es aux diff√©rents contextes d'utilisation avec optimisations de rendu et export.

üõ†Ô∏è **Fichiers concern√©s** :
- `apps/client-portal/src/components/plan-salle/PresentationView.tsx`
- `apps/client-portal/src/components/plan-salle/PrintView.tsx`
- `apps/client-portal/src/components/plan-salle/ViewModeSelector.tsx`
- `apps/client-portal/src/components/plan-salle/FloorPlanViewer.tsx`
- `apps/client-portal/src/utils/plan-salle/renderOptimizations.ts`

üîÑ **Comportement attendu** :
- Mode √©dition avec tous les outils et contr√¥les
- Mode pr√©sentation √©pur√© pour visualisation client
- Mode impression optimis√© avec mise en page adapt√©e
- Zoom et navigation adapt√©s √† chaque mode
- Affichage conditionnel des informations selon le mode
- Optimisations de rendu pour chaque contexte
- Personnalisation des √©l√©ments visibles par mode
- Export haute r√©solution pour impression professionnelle
- Mode plein √©cran pour pr√©sentation

‚öôÔ∏è **Interactions avec autres modules** :
- Int√©gration avec syst√®me de permissions pour modes
- Coordination avec pr√©f√©rences utilisateur
- Synchronisation avec donn√©es de pr√©sentation

üí° **Tips Windsurf** :
- Utilise des composants conditionnels pour optimiser le rendu
- Impl√©mente les optimisations CSS pour impression
- Configure les exports avec r√©solutions adapt√©es

---

## üé® Section 3 : Fonctionnalit√©s Secondaires (3 prompts)

### Prompt 11 : Syst√®me d'Export et G√©n√©ration de Documents

üéØ **But** : D√©velopper le syst√®me complet d'export (PDF, images) et g√©n√©ration de documents professionnels (cartes de placement, √©tiquettes).

üß† **Contexte technique** : Fonctionnalit√© essentielle pour communication avec invit√©s et √©quipes, n√©cessitant g√©n√©ration c√¥t√© serveur et templates personnalisables.

üõ†Ô∏è **Fichiers concern√©s** :
- `apps/client-portal/src/components/plan-salle/ExportModal.tsx`
- `apps/client-portal/src/services/plan-salle/exportService.ts`
- `apps/client-portal/src/services/plan-salle/documentGenerator.ts`
- `apps/client-portal/src/utils/plan-salle/pdfGenerator.ts`
- `supabase/functions/generate-floor-plan-pdf/index.ts`

üîÑ **Comportement attendu** :
- Export PDF haute r√©solution avec options de mise en page
- Export image (PNG, JPEG) avec r√©solutions configurables
- G√©n√©ration automatique de cartes de placement personnalis√©es
- Cr√©ation d'√©tiquettes de table avec design coh√©rent
- Templates personnalisables pour diff√©rents types d'√©v√©nements
- G√©n√©ration de listes de placement par table
- Export des plans avec ou sans assignations d'invit√©s
- G√©n√©ration asynchrone avec notification de fin
- Int√©gration avec syst√®me d'impression professionnel

‚öôÔ∏è **Interactions avec autres modules** :
- Utilisation des donn√©es de tous les composants du plan
- Int√©gration avec syst√®me de templates
- Coordination avec module Communication pour envoi

üí° **Tips Windsurf** :
- Utilise Supabase Edge Functions pour g√©n√©ration PDF c√¥t√© serveur
- Impl√©mente les templates avec Puppeteer ou jsPDF
- Configure la g√©n√©ration asynchrone avec queues de traitement

---

### Prompt 12 : Syst√®me de Templates et Mod√®les Pr√©d√©finis

üéØ **But** : Cr√©er le syst√®me de templates et mod√®les pr√©d√©finis pour acc√©l√©rer la cr√©ation de plans de salle.

üß† **Contexte technique** : Biblioth√®que de templates organis√©e avec syst√®me de recherche et personnalisation pour diff√©rents types d'√©v√©nements et lieux.

üõ†Ô∏è **Fichiers concern√©s** :
- `apps/client-portal/src/components/plan-salle/TemplateLibrary.tsx`
- `apps/client-portal/src/components/plan-salle/TemplateSelector.tsx`
- `apps/client-portal/src/components/plan-salle/TemplatePreview.tsx`
- `apps/client-portal/src/services/plan-salle/templateService.ts`
- `apps/client-portal/src/hooks/plan-salle/useTemplates.ts`

üîÑ **Comportement attendu** :
- Biblioth√®que de templates organis√©e par type d'√©v√©nement
- Aper√ßu visuel des templates avec informations d√©taill√©es
- Application de templates avec adaptation automatique
- Personnalisation des templates avant application
- Sauvegarde de plans comme nouveaux templates
- Partage de templates entre utilisateurs (avec permissions)
- Recherche et filtrage dans la biblioth√®que
- Templates adaptatifs selon les contraintes du lieu
- Versioning des templates avec historique

‚öôÔ∏è **Interactions avec autres modules** :
- Int√©gration avec donn√©es des lieux pour adaptation
- Synchronisation avec Backoffice pour templates officiels
- Coordination avec syst√®me de permissions

üí° **Tips Windsurf** :
- Utilise un syst√®me de tags pour organisation et recherche
- Impl√©mente l'adaptation automatique avec algorithmes g√©om√©triques
- Configure la synchronisation avec biblioth√®que centrale

---

### Prompt 13 : Synchronisation Bidirectionnelle avec Backoffice

üéØ **But** : Cr√©er le syst√®me de synchronisation bidirectionnelle robuste entre le Client Portal et le Backoffice avec gestion des conflits.

üß† **Contexte technique** : Synchronisation complexe n√©cessitant gestion des conflits, versioning et m√©canismes de r√©solution pour maintenir la coh√©rence des donn√©es.

üõ†Ô∏è **Fichiers concern√©s** :
- `apps/client-portal/src/services/plan-salle/syncService.ts`
- `apps/client-portal/src/components/plan-salle/SyncStatus.tsx`
- `apps/client-portal/src/components/plan-salle/ConflictResolution.tsx`
- `apps/client-portal/src/hooks/plan-salle/useSync.ts`
- `supabase/functions/sync-floor-plan-backoffice/index.ts`

üîÑ **Comportement attendu** :
- Synchronisation automatique des modifications en temps r√©el
- D√©tection des conflits de modification simultan√©e
- Interface de r√©solution de conflits avec diff visuel
- Versioning des plans avec historique complet
- Notifications de synchronisation et conflits
- Mode hors ligne avec synchronisation diff√©r√©e
- Validation des permissions avant synchronisation
- Logs d√©taill√©s pour audit et debugging
- Rollback automatique en cas d'erreur critique

‚öôÔ∏è **Interactions avec autres modules** :
- Synchronisation avec tous les modules du Backoffice
- Int√©gration avec syst√®me d'audit global
- Coordination avec syst√®me de permissions

üí° **Tips Windsurf** :
- Utilise des queues de synchronisation avec retry automatique
- Impl√©mente le versioning avec timestamps et checksums
- Configure les webhooks pour notifications bidirectionnelles

---

## üöÄ Section 4 : √âvolutions Futures (3 prompts)

### Prompt 14 : Intelligence Artificielle et Optimisation Automatique

üéØ **But** : Impl√©menter des fonctionnalit√©s d'IA pour optimisation automatique des plans et suggestions intelligentes de placement.

üß† **Contexte technique** : Fonctionnalit√©s avanc√©es utilisant l'IA pour am√©liorer l'efficacit√© de la planification et proposer des optimisations bas√©es sur l'historique et les bonnes pratiques.

üõ†Ô∏è **Fichiers concern√©s** :
- `apps/client-portal/src/services/plan-salle/aiService.ts`
- `apps/client-portal/src/components/plan-salle/AISuggestions.tsx`
- `apps/client-portal/src/components/plan-salle/AutoOptimizer.tsx`
- `apps/client-portal/src/utils/plan-salle/optimizationAlgorithms.ts`
- `supabase/functions/ai-floor-plan-optimizer/index.ts`

üîÑ **Comportement attendu** :
- Suggestions automatiques d'optimisation du plan de salle
- Placement intelligent des invit√©s bas√© sur les relations sociales
- Optimisation de l'espace et de la circulation
- Recommandations bas√©es sur historique d'√©v√©nements similaires
- D√©tection automatique des probl√®mes de design
- Suggestions de disposition pour maximiser l'interaction
- Analyse pr√©dictive des flux de circulation
- Apprentissage des pr√©f√©rences utilisateur
- Int√©gration avec services d'IA externes (OpenAI, etc.)

‚öôÔ∏è **Interactions avec autres modules** :
- Utilisation des donn√©es historiques de tous les modules
- Int√©gration avec module Analytics pour apprentissage
- Connexion avec services d'IA externes

üí° **Tips Windsurf** :
- Utilise Supabase Edge Functions pour traitement IA c√¥t√© serveur
- Impl√©mente les algorithmes d'optimisation avec des librairies sp√©cialis√©es
- Configure l'apprentissage automatique avec feedback utilisateur

---

### Prompt 15 : R√©alit√© Augment√©e et Visualisation 3D

üéØ **But** : D√©velopper les fonctionnalit√©s de r√©alit√© augment√©e et visualisation 3D pour une exp√©rience immersive du plan de salle.

üß† **Contexte technique** : Technologies avanc√©es de visualisation pour permettre aux clients de visualiser leur plan de salle en 3D et en r√©alit√© augment√©e.

üõ†Ô∏è **Fichiers concern√©s** :
- `apps/client-portal/src/components/plan-salle/AR3DViewer.tsx`
- `apps/client-portal/src/components/plan-salle/ThreeDRenderer.tsx`
- `apps/client-portal/src/services/plan-salle/arService.ts`
- `apps/client-portal/src/utils/plan-salle/3dConversion.ts`
- `apps/client-portal/src/hooks/plan-salle/useAR.ts`

üîÑ **Comportement attendu** :
- Visualisation 3D interactive du plan de salle
- Mode r√©alit√© augment√©e pour visualisation in-situ
- Navigation 3D fluide avec contr√¥les intuitifs
- Conversion automatique du plan 2D vers 3D
- Personnalisation des mat√©riaux et textures
- Simulation de l'√©clairage et de l'ambiance
- Export de rendus 3D haute qualit√©
- Partage de vues 3D avec clients et prestataires
- Int√©gration avec casques VR pour exp√©rience immersive

‚öôÔ∏è **Interactions avec autres modules** :
- Utilisation des donn√©es de d√©coration et ambiance
- Int√©gration avec module Planning pour simulation temporelle
- Coordination avec donn√©es des lieux pour r√©alisme

üí° **Tips Windsurf** :
- Utilise Three.js ou React Three Fiber pour rendu 3D
- Impl√©mente WebXR pour r√©alit√© augment√©e native
- Configure les optimisations pour performance mobile

---

### Prompt 16 : Analytics et Optimisation de Performance

üéØ **But** : Cr√©er un syst√®me d'analytics avanc√© et d'optimisation de performance pour analyser l'utilisation et am√©liorer l'exp√©rience.

üß† **Contexte technique** : Syst√®me de business intelligence pour extraire des insights des donn√©es d'utilisation et optimiser les performances du module.

üõ†Ô∏è **Fichiers concern√©s** :
- `apps/client-portal/src/components/plan-salle/AnalyticsDashboard.tsx`
- `apps/client-portal/src/components/plan-salle/PerformanceMetrics.tsx`
- `apps/client-portal/src/services/plan-salle/analyticsService.ts`
- `apps/client-portal/src/utils/plan-salle/performanceOptimizer.ts`
- `supabase/functions/floor-plan-analytics/index.ts`

üîÑ **Comportement attendu** :
- Dashboard d'analytics avec m√©triques d'utilisation
- Analyse des patterns de cr√©ation et modification
- M√©triques de performance du canvas et interactions
- Optimisations automatiques bas√©es sur l'usage
- Rapports d'utilisation des templates et √©l√©ments
- Analyse comparative des plans par type d'√©v√©nement
- D√©tection des goulots d'√©tranglement de performance
- Suggestions d'am√©lioration bas√©es sur les donn√©es
- Int√©gration avec outils de monitoring externes

‚öôÔ∏è **Interactions avec autres modules** :
- Agr√©gation des donn√©es de tous les modules
- Int√©gration avec module Analytics global
- Connexion avec syst√®mes de monitoring externes

üí° **Tips Windsurf** :
- Utilise des librairies de visualisation comme Chart.js ou D3.js
- Impl√©mente les calculs d'analytics c√¥t√© serveur pour performance
- Configure le monitoring avec m√©triques temps r√©el

---

## üéØ R√©sum√© et Ordre d'Ex√©cution

### ‚úÖ Ordre d'Ex√©cution Recommand√©

1. **Phase Initialisation (Prompts 1-4)** : Fondations techniques solides
2. **Phase Fonctionnalit√©s Principales (Prompts 5-10)** : C≈ìur fonctionnel du module
3. **Phase Fonctionnalit√©s Secondaires (Prompts 11-13)** : Enrichissement de l'exp√©rience
4. **Phase √âvolutions Futures (Prompts 14-16)** : Innovations et technologies avanc√©es

### üîß Points d'Attention Sp√©cifiques

- **Performance Canvas** : Optimisation critique pour manipulation fluide des √©l√©ments
- **Synchronisation** : Gestion robuste des conflits avec le Backoffice
- **UX Drag-and-Drop** : Interface intuitive essentielle pour adoption utilisateur
- **Validation Temps R√©el** : D√©tection imm√©diate des probl√®mes et conflits

### üöÄ R√©sultat Final

Un module Plan de Salle complet offrant :
- √âditeur canvas interactif haute performance avec React Konva
- Syst√®me d'assignation intelligent des invit√©s avec validation
- Gestion compl√®te des versions et historique
- Exports professionnels et g√©n√©ration de documents
- Synchronisation bidirectionnelle robuste avec Backoffice
- √âvolutivit√© vers IA, 3D et analytics avanc√©s

**Le module Plan de Salle deviendra l'outil central de planification spatiale pour les √©v√©nements Wedding Collection ! üéâ**

