# Guide de D√©veloppement S√©quentiel Windsurf - Vendor Portal Wedding Collection

**Version:** 1.0  
**Date:** 6 d√©cembre 2025  
**Auteur:** Manus AI - Expert Windsurf  
**Statut:** Guide de D√©veloppement Complet

---

## Table des Mati√®res

1. [Introduction et Vue d'Ensemble](#1-introduction-et-vue-densemble)
2. [Phase 1 : Fondations et Infrastructure](#2-phase-1--fondations-et-infrastructure)
3. [Phase 2 : Modules M√©tier Principaux](#3-phase-2--modules-m√©tier-principaux)
4. [Phase 3 : Communication et Collaboration](#4-phase-3--communication-et-collaboration)
5. [Phase 4 : Modules Avanc√©s et Optimisation](#5-phase-4--modules-avanc√©s-et-optimisation)
6. [Validation et Tests d'Int√©gration](#6-validation-et-tests-dint√©gration)

---

## 1. Introduction et Vue d'Ensemble

### 1.1 Contexte et Objectifs

Le Vendor Portal constitue le troisi√®me pilier de l'√©cosyst√®me ERP Wedding Collection, compl√©tant l'architecture applicative avec une interface d√©di√©e aux prestataires partenaires. Cette application s'int√®gre harmonieusement avec le Backoffice (gestion administrative) et le Client Portal (interface clients) pour cr√©er un √©cosyst√®me collaboratif complet.

L'objectif de ce guide est de fournir une s√©quence de prompts Windsurf parfaitement structur√©s pour d√©velopper le Vendor Portal de A √† Z, en garantissant la coh√©rence avec l'architecture existante et l'optimisation des workflows de d√©veloppement.

### 1.2 Architecture Technique

Le Vendor Portal s'appuie sur la m√™me stack technique que les autres applications de l'√©cosyst√®me :
- **Frontend** : React avec TypeScript, Vite, Tailwind CSS, ShadCN UI, Lucide Icons
- **Backend** : Supabase (PostgreSQL, Auth, Storage, Realtime)
- **Architecture** : Monorepo avec structure `apps/vendor-portal/`
- **Int√©grations** : API partag√©es avec Backoffice et Client Portal

### 1.3 Approche S√©quentielle

Le d√©veloppement suit une approche en 4 phases progressives :
1. **Fondations et Infrastructure** (7 prompts) : Base technique et authentification
2. **Modules M√©tier Principaux** (6 prompts) : C≈ìur fonctionnel de l'application
3. **Communication et Collaboration** (5 prompts) : Int√©grations avec l'√©cosyst√®me
4. **Modules Avanc√©s et Optimisation** (4 prompts) : Fonctionnalit√©s diff√©renciantes

---

## 2. Phase 1 : Fondations et Infrastructure

### Prompt 1.1 : Configuration Application et Structure Modulaire

üéØ **But** : Initialiser l'application Vendor Portal dans le monorepo avec la structure technique optimale et la configuration Vite adapt√©e aux besoins des prestataires.

üß† **Contexte Technique** : Cr√©ation de l'application `apps/vendor-portal/` dans le monorepo Wedding Collection avec configuration Vite, TypeScript strict, et int√©gration Tailwind CSS. L'application doit respecter l'architecture modulaire √©tablie pour les autres applications de l'√©cosyst√®me.

üõ†Ô∏è **Types de Fichiers** : 
- `apps/vendor-portal/package.json`
- `apps/vendor-portal/vite.config.ts`
- `apps/vendor-portal/tsconfig.json`
- `apps/vendor-portal/tailwind.config.js`
- `apps/vendor-portal/src/` (structure compl√®te)

üîÑ **Comportement Attendu** : 
Cr√©er une application React TypeScript fonctionnelle avec hot reload, optimisation des assets, et structure de dossiers coh√©rente avec les conventions Wedding Collection. Configurer les alias de chemins, les variables d'environnement, et les outils de d√©veloppement.

‚öôÔ∏è **Interactions** : 
- Partage des types TypeScript avec le Backoffice via `@wedding-collection/types`
- Utilisation des composants UI partag√©s via `@wedding-collection/ui`
- Configuration des variables d'environnement Supabase partag√©es

üí° **Tips Windsurf** : 
Utilise la commande `npm create vite@latest` avec le template React-TypeScript, puis adapte la configuration pour le monorepo. Configure les alias de chemins avec `@/` pointant vers `src/`. Assure-toi que le port de d√©veloppement (5175) ne conflicte pas avec les autres applications.

---

### Prompt 1.2 : Int√©gration Supabase et Configuration Base de Donn√©es

üéØ **But** : Configurer l'int√©gration Supabase compl√®te avec authentification, acc√®s aux donn√©es prestataires, et politiques RLS sp√©cifiques au Vendor Portal.

üß† **Contexte Technique** : Le Vendor Portal partage la m√™me instance Supabase que le Backoffice et le Client Portal. Il doit acc√©der aux tables prestataires existantes avec des politiques RLS appropri√©es, tout en cr√©ant les tables sp√©cifiques aux fonctionnalit√©s vendor (quotes, bookings, messages).

üõ†Ô∏è **Types de Fichiers** :
- `src/lib/supabaseClient.ts`
- `src/types/database.types.ts`
- `src/services/authService.ts`
- `supabase/migrations/` (nouvelles tables vendor-specific)

üîÑ **Comportement Attendu** :
√âtablir la connexion Supabase avec gestion des erreurs robuste, typage TypeScript complet des tables, et configuration des politiques RLS pour l'acc√®s s√©curis√© aux donn√©es prestataires. Cr√©er les tables sp√©cifiques au Vendor Portal avec relations appropri√©es.

‚öôÔ∏è **Interactions** :
- Lecture des tables `vendors`, `vendor_services`, `vendor_availability` du Backoffice
- Cr√©ation des tables `vendor_quotes`, `vendor_bookings`, `vendor_messages`
- Synchronisation avec les donn√©es clients via le Client Portal

üí° **Tips Windsurf** :
Utilise Supabase CLI pour g√©n√©rer les types TypeScript automatiquement. Configure les politiques RLS avec des fonctions helper pour v√©rifier l'appartenance des donn√©es au prestataire connect√©. Impl√©mente un syst√®me de cache intelligent pour les donn√©es fr√©quemment consult√©es.

---

### Prompt 1.3 : Syst√®me d'Authentification et Gestion des Sessions

üéØ **But** : Impl√©menter un syst√®me d'authentification s√©curis√© sp√©cifique aux prestataires avec gestion des sessions, r√©cup√©ration de mot de passe, et int√©gration avec les politiques RLS Supabase.

üß† **Contexte Technique** : L'authentification des prestataires utilise Supabase Auth avec des contraintes sp√©cifiques : les comptes sont cr√©√©s depuis le Backoffice, les prestataires ne peuvent pas s'auto-inscrire, et l'acc√®s est conditionn√© √† la validation du compte par l'√©quipe Wedding Collection.

üõ†Ô∏è **Types de Fichiers** :
- `src/components/Auth/LoginForm.tsx`
- `src/components/Auth/ForgotPasswordForm.tsx`
- `src/contexts/AuthContext.tsx`
- `src/hooks/useAuth.ts`
- `src/pages/LoginPage.tsx`

üîÑ **Comportement Attendu** :
Interface de connexion intuitive avec validation en temps r√©el, gestion des erreurs explicites, et redirection automatique selon le statut du prestataire (en attente de validation, actif, suspendu). Maintien de la session avec refresh automatique des tokens.

‚öôÔ∏è **Interactions** :
- V√©rification du statut prestataire dans la table `vendors` du Backoffice
- Synchronisation des permissions avec les politiques RLS
- Int√©gration avec le syst√®me de notifications pour les alertes de s√©curit√©

üí° **Tips Windsurf** :
Impl√©mente un AuthGuard pour prot√©ger les routes priv√©es. Utilise React Query pour la gestion du cache des donn√©es utilisateur. Configure des redirections intelligentes bas√©es sur le statut du prestataire (validation en cours, profil incomplet, etc.).

---


### Prompt 1.4 : Layout Principal et Navigation Responsive

üéØ **But** : Cr√©er le layout principal du Vendor Portal avec sidebar dynamique, header responsive, et navigation adapt√©e aux workflows des prestataires.

üß† **Contexte Technique** : Le layout doit √™tre coh√©rent avec le design system Wedding Collection tout en s'adaptant aux besoins sp√©cifiques des prestataires. La sidebar doit organiser les modules par fr√©quence d'utilisation et importance m√©tier, avec des indicateurs visuels pour les notifications et les t√¢ches en attente.

üõ†Ô∏è **Types de Fichiers** :
- `src/components/Layout/MainLayout.tsx`
- `src/components/Layout/Sidebar.tsx`
- `src/components/Layout/Header.tsx`
- `src/components/Layout/MobileNav.tsx`
- `src/components/Navigation/NavItem.tsx`

üîÑ **Comportement Attendu** :
Interface responsive avec sidebar collapsible, navigation mobile optimis√©e, et zones de contenu adaptatives. Affichage des notifications en temps r√©el, indicateurs de statut, et acc√®s rapide aux fonctionnalit√©s critiques (nouveaux devis, messages urgents).

‚öôÔ∏è **Interactions** :
- Int√©gration avec le syst√®me de notifications Supabase Realtime
- Synchronisation des badges de notification avec les donn√©es m√©tier
- Coh√©rence visuelle avec le Client Portal et le Backoffice

üí° **Tips Windsurf** :
Utilise Tailwind CSS avec des breakpoints coh√©rents pour la responsivit√©. Impl√©mente un syst√®me de badges dynamiques bas√© sur React Query pour les notifications. Configure des animations subtiles pour am√©liorer l'exp√©rience utilisateur sans impacter les performances.

---

### Prompt 1.5 : Dashboard Principal et Widgets de Vue d'Ensemble

üéØ **But** : D√©velopper le dashboard principal du Vendor Portal avec widgets informatifs, m√©triques cl√©s, et acc√®s rapide aux actions prioritaires pour les prestataires.

üß† **Contexte Technique** : Le dashboard agr√®ge les donn√©es critiques du prestataire : demandes de devis en attente, r√©servations confirm√©es, messages non lus, performances financi√®res, et alertes importantes. Les widgets doivent √™tre performants et se mettre √† jour en temps r√©el.

üõ†Ô∏è **Types de Fichiers** :
- `src/pages/DashboardPage.tsx`
- `src/components/Dashboard/StatsWidget.tsx`
- `src/components/Dashboard/QuickActions.tsx`
- `src/components/Dashboard/RecentActivity.tsx`
- `src/components/Dashboard/NotificationCenter.tsx`

üîÑ **Comportement Attendu** :
Interface de tableau de bord moderne avec widgets configurables, m√©triques en temps r√©el, et actions rapides contextuelles. Affichage optimis√© des KPIs prestataires : taux de conversion des devis, chiffre d'affaires mensuel, satisfaction client, et planning √† venir.

‚öôÔ∏è **Interactions** :
- Agr√©gation des donn√©es depuis les tables `vendor_quotes`, `vendor_bookings`, `vendor_reviews`
- Int√©gration avec les notifications Supabase Realtime
- Liens directs vers les modules concern√©s pour les actions rapides

üí° **Tips Windsurf** :
Utilise React Query avec des intervalles de refetch optimis√©s pour les m√©triques temps r√©el. Impl√©mente des skeleton loaders pour am√©liorer la perception de performance. Configure des seuils d'alerte personnalisables pour les KPIs critiques.

---

### Prompt 1.6 : Syst√®me de Notifications et Alertes Temps R√©el

üéØ **But** : Impl√©menter un syst√®me de notifications complet avec Supabase Realtime, gestion des pr√©f√©rences utilisateur, et int√©gration multi-canal (in-app, email, SMS).

üß† **Contexte Technique** : Le syst√®me de notifications doit g√©rer les √©v√©nements critiques pour les prestataires : nouvelles demandes de devis, confirmations de r√©servation, messages clients, paiements re√ßus, et alertes administratives. L'int√©gration avec Supabase Realtime assure la r√©activit√© temps r√©el.

üõ†Ô∏è **Types de Fichiers** :
- `src/components/Notifications/NotificationCenter.tsx`
- `src/components/Notifications/NotificationItem.tsx`
- `src/services/notificationService.ts`
- `src/hooks/useNotifications.ts`
- `src/types/notifications.types.ts`

üîÑ **Comportement Attendu** :
Centre de notifications avec cat√©gorisation intelligente, marquage lu/non lu, et actions contextuelles. Notifications push en temps r√©el avec sons et animations subtiles. Gestion des pr√©f√©rences de notification par type et canal.

‚öôÔ∏è **Interactions** :
- √âcoute des √©v√©nements Supabase Realtime sur les tables critiques
- Int√©gration avec les services email (SendGrid) et SMS pour les notifications externes
- Synchronisation avec le syst√®me de notifications du Client Portal pour les messages

üí° **Tips Windsurf** :
Configure Supabase Realtime avec des filtres optimis√©s pour √©viter les notifications parasites. Utilise React Query pour la gestion du cache des notifications. Impl√©mente un syst√®me de retry intelligent pour les notifications critiques.

---

### Prompt 1.7 : Gestion des Profils Prestataires et Informations L√©gales

üéØ **But** : Cr√©er l'interface de gestion compl√®te du profil prestataire avec informations l√©gales, coordonn√©es bancaires, et validation des documents obligatoires.

üß† **Contexte Technique** : Le profil prestataire inclut des donn√©es sensibles (SIRET, RIB, assurances) qui n√©cessitent un chiffrement appropri√© et des validations strictes. L'interface doit guider le prestataire dans la compl√©tude de son profil avec des indicateurs de progression et des validations en temps r√©el.

üõ†Ô∏è **Types de Fichiers** :
- `src/pages/ProfilePage.tsx`
- `src/components/Profile/ProfileForm.tsx`
- `src/components/Profile/LegalInfoForm.tsx`
- `src/components/Profile/BankInfoForm.tsx`
- `src/components/Profile/DocumentUpload.tsx`

üîÑ **Comportement Attendu** :
Formulaire multi-√©tapes avec validation progressive, upload s√©curis√© de documents, et indicateur de compl√©tude du profil. Gestion des modifications avec historique des changements et validation administrative pour les informations critiques.

‚öôÔ∏è **Interactions** :
- Synchronisation avec la table `vendors` du Backoffice
- Validation des documents via l'√©quipe Wedding Collection
- Int√©gration avec Supabase Storage pour les documents sensibles

üí° **Tips Windsurf** :
Utilise React Hook Form avec Zod pour la validation robuste des formulaires. Impl√©mente un syst√®me de chiffrement c√¥t√© client pour les donn√©es bancaires. Configure des politiques RLS strictes pour l'acc√®s aux informations sensibles.

---

## 3. Phase 2 : Modules M√©tier Principaux

### Prompt 2.1 : Module Gestion des Services et Catalogue

üéØ **But** : D√©velopper l'interface compl√®te de gestion des services prestataires avec cr√©ation, modification, tarification, et gestion des options personnalisables.

üß† **Contexte Technique** : Le module permet aux prestataires de cr√©er et g√©rer leur catalogue de services avec une granularit√© fine : services de base, options additionnelles, tarifs variables selon les crit√®res (saison, dur√©e, nombre d'invit√©s), et conditions sp√©ciales. L'interface doit √™tre intuitive tout en g√©rant la complexit√© des configurations.

üõ†Ô∏è **Types de Fichiers** :
- `src/pages/ServicesPage.tsx`
- `src/components/Services/ServicesList.tsx`
- `src/components/Services/ServiceForm.tsx`
- `src/components/Services/PricingManager.tsx`
- `src/components/Services/OptionsManager.tsx`

üîÑ **Comportement Attendu** :
Interface de gestion de catalogue avec cr√©ation guid√©e de services, configurateur de tarifs dynamique, et pr√©visualisation du rendu client. Gestion des variantes de services, des packages, et des promotions temporaires avec validation des coh√©rences tarifaires.

‚öôÔ∏è **Interactions** :
- Synchronisation avec la table `vendor_services` du Backoffice
- Int√©gration avec le catalogue visible dans le Client Portal
- Validation des tarifs avec les r√®gles de commission Wedding Collection

üí° **Tips Windsurf** :
Utilise un builder pattern pour la cr√©ation de services complexes. Impl√©mente une pr√©visualisation en temps r√©el du rendu client. Configure des validations m√©tier pour √©viter les incoh√©rences tarifaires.

---

### Prompt 2.2 : Gestion des Disponibilit√©s et Calendrier Intelligent

üéØ **But** : Cr√©er un syst√®me de gestion des disponibilit√©s avec calendrier interactif, r√®gles de disponibilit√© automatiques, et synchronisation avec les calendriers externes.

üß† **Contexte Technique** : Le syst√®me doit g√©rer la complexit√© des disponibilit√©s prestataires : cr√©neaux r√©currents, exceptions ponctuelles, temps de pr√©paration/d√©montage, et conflits potentiels. L'int√©gration avec les calendriers externes (Google Calendar, Outlook) assure une synchronisation bidirectionnelle.

üõ†Ô∏è **Types de Fichiers** :
- `src/pages/AvailabilityPage.tsx`
- `src/components/Availability/CalendarView.tsx`
- `src/components/Availability/RulesManager.tsx`
- `src/components/Availability/ExceptionsManager.tsx`
- `src/services/calendarSyncService.ts`

üîÑ **Comportement Attendu** :
Calendrier interactif avec gestion drag-and-drop des cr√©neaux, d√©finition de r√®gles r√©currentes, et d√©tection automatique des conflits. Interface de synchronisation avec les calendriers externes et notifications des modifications importantes.

‚öôÔ∏è **Interactions** :
- Synchronisation avec les r√©servations confirm√©es du Client Portal
- Int√©gration avec les APIs Google Calendar et Microsoft Graph
- Validation des disponibilit√©s lors de la cr√©ation de devis

üí° **Tips Windsurf** :
Utilise une librairie de calendrier performante comme FullCalendar ou React Big Calendar. Impl√©mente un syst√®me de cache intelligent pour les disponibilit√©s fr√©quemment consult√©es. Configure des webhooks pour la synchronisation temps r√©el avec les calendriers externes.

---


### Prompt 2.3 : Module Gestion des Devis et R√©ponses Personnalis√©es

üéØ **But** : D√©velopper l'interface compl√®te de gestion des devis avec r√©ception des demandes du Client Portal, cr√©ation de r√©ponses personnalis√©es, et suivi du cycle de vie des devis.

üß† **Contexte Technique** : Le module centralise la gestion des demandes de devis re√ßues depuis le Client Portal. Il permet la cr√©ation de r√©ponses d√©taill√©es avec calculs automatiques, personnalisation des propositions, et suivi des interactions client. L'int√©gration temps r√©el assure une r√©activit√© optimale.

üõ†Ô∏è **Types de Fichiers** :
- `src/pages/QuotesPage.tsx`
- `src/components/Quotes/QuoteRequestsList.tsx`
- `src/components/Quotes/QuoteBuilder.tsx`
- `src/components/Quotes/QuotePreview.tsx`
- `src/components/Quotes/QuoteTracking.tsx`

üîÑ **Comportement Attendu** :
Interface de gestion des devis avec liste filtr√©e des demandes, builder de devis avec calculs automatiques, pr√©visualisation du rendu client, et tracking des consultations. Notifications temps r√©el des nouvelles demandes et des interactions client.

‚öôÔ∏è **Interactions** :
- R√©ception des demandes depuis la table `quote_requests` du Client Portal
- Cr√©ation des r√©ponses dans `vendor_quotes` avec synchronisation bidirectionnelle
- Int√©gration avec le syst√®me de tarification et les services configur√©s

üí° **Tips Windsurf** :
Impl√©mente un syst√®me de templates de devis pour acc√©l√©rer les r√©ponses r√©currentes. Utilise React Query avec des mutations optimistes pour une UX fluide. Configure des alertes automatiques pour les devis en attente de r√©ponse.

---

### Prompt 2.4 : Gestion des R√©servations et Suivi des Prestations

üéØ **But** : Cr√©er l'interface de gestion des r√©servations confirm√©es avec suivi d√©taill√© des prestations, gestion des statuts, et coordination avec l'√©quipe Wedding Collection.

üß† **Contexte Technique** : Le module g√®re le cycle de vie complet des prestations confirm√©es : pr√©paration, ex√©cution, et finalisation. Il inclut l'acc√®s aux informations d√©taill√©es de l'√©v√©nement, la coordination avec les autres prestataires, et la gestion des livrables post-prestation.

üõ†Ô∏è **Types de Fichiers** :
- `src/pages/BookingsPage.tsx`
- `src/components/Bookings/BookingsList.tsx`
- `src/components/Bookings/BookingDetails.tsx`
- `src/components/Bookings/StatusManager.tsx`
- `src/components/Bookings/DeliverableUpload.tsx`

üîÑ **Comportement Attendu** :
Interface de suivi des r√©servations avec timeline d√©taill√©e, gestion des statuts de prestation, upload des livrables, et communication avec l'√©quipe Wedding Collection. Acc√®s aux informations logistiques et coordination avec les autres prestataires.

‚öôÔ∏è **Interactions** :
- Synchronisation avec les donn√©es d'√©v√©nements du Backoffice
- Coordination avec les autres prestataires via le syst√®me de messagerie
- Upload des livrables vers Supabase Storage avec partage s√©curis√©

üí° **Tips Windsurf** :
Utilise un syst√®me de workflow configurable pour les statuts de prestation. Impl√©mente des notifications automatiques pour les √©tapes critiques. Configure des permissions granulaires pour l'acc√®s aux informations d'√©v√©nement.

---

### Prompt 2.5 : Module Messagerie et Communication Client

üéØ **But** : D√©velopper le syst√®me de messagerie int√©gr√© permettant la communication directe avec les clients et l'√©quipe Wedding Collection, avec gestion des pi√®ces jointes et historique complet.

üß† **Contexte Technique** : Le syst√®me de messagerie utilise Supabase Realtime pour les √©changes temps r√©el. Il g√®re les conversations avec les clients (via le Client Portal) et avec l'√©quipe Wedding Collection, avec des niveaux de confidentialit√© appropri√©s et un archivage s√©curis√©.

üõ†Ô∏è **Types de Fichiers** :
- `src/pages/MessagesPage.tsx`
- `src/components/Messages/ConversationsList.tsx`
- `src/components/Messages/ChatInterface.tsx`
- `src/components/Messages/FileUpload.tsx`
- `src/services/messagingService.ts`

üîÑ **Comportement Attendu** :
Interface de messagerie moderne avec conversations organis√©es, envoi de fichiers s√©curis√©, notifications temps r√©el, et recherche dans l'historique. Distinction claire entre les conversations clients et administratives.

‚öôÔ∏è **Interactions** :
- Synchronisation bidirectionnelle avec le Client Portal pour les messages clients
- Canal d√©di√© avec l'√©quipe Wedding Collection pour le support
- Int√©gration avec Supabase Storage pour les pi√®ces jointes

üí° **Tips Windsurf** :
Utilise Supabase Realtime avec des channels sp√©cifiques pour chaque conversation. Impl√©mente un syst√®me de typing indicators et de statuts de lecture. Configure des politiques RLS strictes pour la confidentialit√© des messages.

---

### Prompt 2.6 : Gestion Financi√®re et Facturation Prestataires

üéØ **But** : Cr√©er l'interface de gestion financi√®re permettant la d√©claration des factures clients, le suivi des paiements, et la gestion des factures de commission Wedding Collection.

üß† **Contexte Technique** : Le module s'int√®gre avec le syst√®me comptable du Backoffice pour la gestion des flux financiers. Il permet aux prestataires de d√©clarer leurs factures clients, de suivre les paiements, et de g√©rer les factures de commission avec Wedding Collection.

üõ†Ô∏è **Types de Fichiers** :
- `src/pages/FinancePage.tsx`
- `src/components/Finance/InvoiceDeclaration.tsx`
- `src/components/Finance/PaymentTracking.tsx`
- `src/components/Finance/CommissionManager.tsx`
- `src/components/Finance/FinancialDashboard.tsx`

üîÑ **Comportement Attendu** :
Interface de gestion financi√®re avec d√©claration guid√©e des factures, suivi automatique des paiements, gestion des commissions, et tableau de bord financier avec m√©triques cl√©s. Export des donn√©es comptables pour les logiciels externes.

‚öôÔ∏è **Interactions** :
- Synchronisation avec le module Comptabilit√© du Backoffice
- Int√©gration avec les syst√®mes de paiement pour le tracking automatique
- G√©n√©ration automatique des factures de commission

üí° **Tips Windsurf** :
Impl√©mente des validations strictes pour les donn√©es financi√®res. Utilise des composants de graphiques pour visualiser les performances financi√®res. Configure des alertes automatiques pour les paiements en retard.

---

## 4. Phase 3 : Communication et Collaboration

### Prompt 3.1 : Syst√®me de Notifications Avanc√©es et Pr√©f√©rences

üéØ **But** : Enrichir le syst√®me de notifications avec gestion granulaire des pr√©f√©rences, notifications push, et int√©gration multi-canal (email, SMS, in-app).

üß† **Contexte Technique** : Extension du syst√®me de notifications de base avec des fonctionnalit√©s avanc√©es : cat√©gorisation intelligente, pr√©f√©rences utilisateur granulaires, notifications push via service workers, et int√©gration avec les services externes (SendGrid, Twilio).

üõ†Ô∏è **Types de Fichiers** :
- `src/components/Notifications/NotificationPreferences.tsx`
- `src/components/Notifications/PushNotificationManager.tsx`
- `src/services/pushNotificationService.ts`
- `src/workers/notificationWorker.ts`
- `public/sw.js`

üîÑ **Comportement Attendu** :
Interface de pr√©f√©rences de notifications avec contr√¥le granulaire par type et canal, notifications push m√™me application ferm√©e, et gestion intelligente de la fr√©quence pour √©viter le spam. Respect des pr√©f√©rences utilisateur et conformit√© RGPD.

‚öôÔ∏è **Interactions** :
- Int√©gration avec SendGrid pour les notifications email
- Utilisation de Twilio pour les SMS critiques
- Synchronisation avec les pr√©f√©rences stock√©es en base

üí° **Tips Windsurf** :
Impl√©mente un service worker pour les notifications push. Utilise une approche progressive pour demander les permissions de notification. Configure des templates de notification r√©utilisables pour la coh√©rence.

---

### Prompt 3.2 : Gestion Documentaire et Partage S√©curis√©

üéØ **But** : D√©velopper un syst√®me de gestion documentaire complet avec organisation hi√©rarchique, partage s√©curis√©, et collaboration sur les documents avec les clients et l'√©quipe Wedding Collection.

üß† **Contexte Technique** : Le syst√®me utilise Supabase Storage avec des politiques de s√©curit√© granulaires pour la gestion des documents prestataires. Il inclut l'organisation en dossiers, le versioning, le partage temporaire, et la collaboration en temps r√©el sur certains types de documents.

üõ†Ô∏è **Types de Fichiers** :
- `src/pages/DocumentsPage.tsx`
- `src/components/Documents/DocumentManager.tsx`
- `src/components/Documents/FolderTree.tsx`
- `src/components/Documents/ShareManager.tsx`
- `src/services/documentService.ts`

üîÑ **Comportement Attendu** :
Interface de gestion documentaire avec arborescence de dossiers, upload par drag-and-drop, pr√©visualisation des documents, et partage s√©curis√© avec liens temporaires. Gestion des versions et collaboration sur les documents partag√©s.

‚öôÔ∏è **Interactions** :
- Stockage s√©curis√© via Supabase Storage avec chiffrement
- Partage avec les clients via le Client Portal
- Collaboration avec l'√©quipe Wedding Collection

üí° **Tips Windsurf** :
Utilise des politiques RLS Supabase pour la s√©curit√© des documents. Impl√©mente un syst√®me de pr√©visualisation pour les formats courants. Configure des liens de partage temporaires avec expiration automatique.

---

### Prompt 3.3 : Coordination Multi-Prestataires et Planning Partag√©

üéØ **But** : Cr√©er les outils de coordination entre prestataires pour les √©v√©nements complexes avec planning partag√©, communication de groupe, et gestion des d√©pendances logistiques.

üß† **Contexte Technique** : Le syst√®me permet la coordination entre plusieurs prestataires intervenant sur le m√™me √©v√©nement. Il inclut un planning partag√©, des canaux de communication d√©di√©s, et la gestion des d√©pendances logistiques (ordre d'intervention, partage d'√©quipements, etc.).

üõ†Ô∏è **Types de Fichiers** :
- `src/pages/CoordinationPage.tsx`
- `src/components/Coordination/SharedPlanning.tsx`
- `src/components/Coordination/VendorChat.tsx`
- `src/components/Coordination/LogisticsManager.tsx`
- `src/services/coordinationService.ts`

üîÑ **Comportement Attendu** :
Interface de coordination avec planning partag√© en temps r√©el, chat de groupe entre prestataires, gestion des d√©pendances logistiques, et notifications des modifications importantes. Visibilit√© sur les interventions des autres prestataires.

‚öôÔ∏è **Interactions** :
- Synchronisation avec les plannings individuels des prestataires
- Int√©gration avec les donn√©es d'√©v√©nement du Backoffice
- Communication temps r√©el via Supabase Realtime

üí° **Tips Windsurf** :
Utilise des channels Supabase Realtime sp√©cifiques par √©v√©nement. Impl√©mente un syst√®me de permissions pour la visibilit√© des informations sensibles. Configure des notifications intelligentes pour √©viter le spam.

---

### Prompt 3.4 : Int√©gration avec l'√âcosyst√®me Wedding Collection

üéØ **But** : D√©velopper les int√©grations avanc√©es avec le Backoffice et le Client Portal pour cr√©er une exp√©rience unifi√©e et des workflows collaboratifs optimis√©s.

üß† **Contexte Technique** : Les int√©grations permettent une synchronisation bidirectionnelle des donn√©es critiques, des workflows automatis√©s, et une exp√©rience utilisateur coh√©rente entre les applications. Elles incluent la synchronisation des statuts, la propagation des notifications, et la coordination des processus m√©tier.

üõ†Ô∏è **Types de Fichiers** :
- `src/services/integrationService.ts`
- `src/hooks/useBackofficeSync.ts`
- `src/hooks/useClientPortalSync.ts`
- `src/components/Integration/SyncStatus.tsx`
- `src/utils/dataSync.ts`

üîÑ **Comportement Attendu** :
Synchronisation transparente des donn√©es entre applications, workflows automatis√©s pour les processus critiques, et indicateurs de statut de synchronisation. Gestion des conflits de donn√©es et r√©conciliation automatique.

‚öôÔ∏è **Interactions** :
- Synchronisation bidirectionnelle avec le Backoffice pour les donn√©es prestataires
- Int√©gration temps r√©el avec le Client Portal pour les devis et messages
- Coordination avec les syst√®mes de notification globaux

üí° **Tips Windsurf** :
Impl√©mente un syst√®me de queue pour les synchronisations critiques. Utilise des webhooks pour les notifications inter-applications. Configure des m√©canismes de retry et de fallback pour la r√©silience.

---

### Prompt 3.5 : Analytics et Reporting Prestataires

üéØ **But** : Cr√©er un syst√®me d'analytics complet avec m√©triques de performance, rapports personnalis√©s, et insights pour optimiser l'activit√© des prestataires.

üß† **Contexte Technique** : Le syst√®me d'analytics agr√®ge les donn√©es de l'ensemble de l'√©cosyst√®me pour fournir des insights pertinents aux prestataires : performance commerciale, satisfaction client, optimisation des tarifs, et tendances du march√©.

üõ†Ô∏è **Types de Fichiers** :
- `src/pages/AnalyticsPage.tsx`
- `src/components/Analytics/PerformanceDashboard.tsx`
- `src/components/Analytics/ReportBuilder.tsx`
- `src/components/Analytics/InsightsPanel.tsx`
- `src/services/analyticsService.ts`

üîÑ **Comportement Attendu** :
Tableau de bord d'analytics avec m√©triques cl√©s, g√©n√©rateur de rapports personnalis√©s, insights automatiques, et comparaisons avec les moyennes du secteur. Export des donn√©es pour analyse externe.

‚öôÔ∏è **Interactions** :
- Agr√©gation des donn√©es depuis toutes les tables prestataires
- Int√©gration avec les donn√©es de satisfaction client du Client Portal
- Comparaisons avec les donn√©es anonymis√©es des autres prestataires

üí° **Tips Windsurf** :
Utilise des vues mat√©rialis√©es pour les calculs complexes. Impl√©mente des graphiques interactifs avec une librairie comme Chart.js ou Recharts. Configure des alertes automatiques pour les m√©triques critiques.

---

## 5. Phase 4 : Modules Avanc√©s et Optimisation

### Prompt 4.1 : Mini-Site Public et Vitrine Prestataire

üéØ **But** : D√©velopper l'√©diteur de mini-site public permettant aux prestataires de cr√©er leur vitrine en ligne int√©gr√©e au site Wedding Collection avec gestion des m√©dias et SEO.

üß† **Contexte Technique** : L'√©diteur de mini-site utilise un syst√®me de blocs modulaires pour cr√©er des pages personnalis√©es. Il s'int√®gre avec Supabase Storage pour les m√©dias et g√©n√®re automatiquement les pages publiques avec optimisation SEO et performance.

üõ†Ô∏è **Types de Fichiers** :
- `src/pages/MinisitePage.tsx`
- `src/components/Minisite/SiteEditor.tsx`
- `src/components/Minisite/BlockEditor.tsx`
- `src/components/Minisite/MediaManager.tsx`
- `src/components/Minisite/SEOManager.tsx`

üîÑ **Comportement Attendu** :
√âditeur de site intuitif avec syst√®me de blocs drag-and-drop, gestion des m√©dias avec optimisation automatique, pr√©visualisation en temps r√©el, et publication en un clic. Optimisation SEO automatique et analytics de performance.

‚öôÔ∏è **Interactions** :
- Publication automatique sur le site public Wedding Collection
- Int√©gration avec les services et disponibilit√©s du prestataire
- Synchronisation avec les avis clients et les r√©alisations

üí° **Tips Windsurf** :
Utilise un √©diteur de blocs comme Craft.js ou un syst√®me custom. Impl√©mente l'optimisation automatique des images avec Sharp. Configure la g√©n√©ration statique pour les performances SEO.

---

### Prompt 4.2 : Int√©grations Externes et API Tierces

üéØ **But** : D√©velopper les connecteurs avec les syst√®mes externes : calendriers (Google, Outlook), comptabilit√© (Sage, Cegid), et plateformes de paiement pour une int√©gration compl√®te de l'√©cosyst√®me prestataire.

üß† **Contexte Technique** : Les int√©grations utilisent les APIs officielles des services tiers avec gestion des tokens d'authentification, synchronisation bidirectionnelle, et gestion des erreurs robuste. Chaque int√©gration respecte les limites de taux et les bonnes pratiques de s√©curit√©.

üõ†Ô∏è **Types de Fichiers** :
- `src/pages/IntegrationsPage.tsx`
- `src/components/Integrations/CalendarSync.tsx`
- `src/components/Integrations/AccountingSync.tsx`
- `src/services/externalApiService.ts`
- `src/utils/apiConnectors.ts`

üîÑ **Comportement Attendu** :
Interface de gestion des int√©grations avec configuration guid√©e, synchronisation automatique, monitoring des erreurs, et gestion des conflits. Tableau de bord des int√©grations actives avec statuts en temps r√©el.

‚öôÔ∏è **Interactions** :
- Synchronisation bidirectionnelle avec Google Calendar et Outlook
- Export automatique vers les logiciels de comptabilit√©
- Int√©gration avec les plateformes de paiement (Stripe, PayPal)

üí° **Tips Windsurf** :
Utilise des workers pour les synchronisations longues. Impl√©mente un syst√®me de retry exponentiel pour les APIs externes. Configure des webhooks pour les notifications de changement.

---

### Prompt 4.3 : Optimisation des Performances et Cache Intelligent

üéØ **But** : Impl√©menter un syst√®me de cache intelligent, optimiser les performances de l'application, et configurer le monitoring pour assurer une exp√©rience utilisateur optimale.

üß† **Contexte Technique** : L'optimisation inclut la mise en cache des donn√©es fr√©quemment consult√©es, la lazy loading des composants, l'optimisation des requ√™tes Supabase, et la configuration d'un monitoring complet avec m√©triques de performance.

üõ†Ô∏è **Types de Fichiers** :
- `src/services/cacheService.ts`
- `src/hooks/useOptimizedQuery.ts`
- `src/utils/performanceMonitor.ts`
- `src/components/Performance/LoadingOptimizer.tsx`
- `vite.config.ts` (optimisations build)

üîÑ **Comportement Attendu** :
Application avec temps de chargement optimis√©s, cache intelligent des donn√©es, lazy loading des composants lourds, et monitoring en temps r√©el des performances. Optimisation automatique des requ√™tes et des assets.

‚öôÔ∏è **Interactions** :
- Cache partag√© avec les autres applications de l'√©cosyst√®me
- Monitoring int√©gr√© avec les m√©triques globales Wedding Collection
- Optimisation des requ√™tes Supabase avec indexation intelligente

üí° **Tips Windsurf** :
Utilise React Query avec des strat√©gies de cache optimis√©es. Impl√©mente le code splitting avec React.lazy. Configure Vite avec des optimisations de build avanc√©es et compression.

---

### Prompt 4.4 : Tests d'Int√©gration et Validation √âcosyst√®me

üéØ **But** : D√©velopper une suite de tests compl√®te couvrant les int√©grations avec le Backoffice et le Client Portal, les workflows critiques, et la validation de la coh√©rence des donn√©es.

üß† **Contexte Technique** : Les tests d'int√©gration valident les flux de donn√©es entre applications, les workflows de bout en bout, et la coh√©rence de l'exp√©rience utilisateur. Ils incluent des tests automatis√©s, des tests de charge, et des validations de s√©curit√©.

üõ†Ô∏è **Types de Fichiers** :
- `tests/integration/backofficeIntegration.test.ts`
- `tests/integration/clientPortalIntegration.test.ts`
- `tests/e2e/vendorWorkflows.spec.ts`
- `tests/performance/loadTesting.test.ts`
- `tests/security/dataAccess.test.ts`

üîÑ **Comportement Attendu** :
Suite de tests automatis√©s couvrant les sc√©narios critiques, tests de performance sous charge, validation de la s√©curit√© des donn√©es, et tests de r√©gression pour les int√©grations. Rapports d√©taill√©s et alertes automatiques.

‚öôÔ∏è **Interactions** :
- Tests des flux de donn√©es avec le Backoffice et le Client Portal
- Validation des politiques RLS et de la s√©curit√©
- Tests de performance de l'√©cosyst√®me complet

üí° **Tips Windsurf** :
Utilise Playwright pour les tests E2E. Impl√©mente des tests de contrat avec Pact pour les APIs. Configure des tests de charge avec Artillery ou K6.

---

## 6. Validation et Tests d'Int√©gration

### 6.1 Strat√©gie de Validation Globale

La validation du Vendor Portal n√©cessite une approche multicouche qui v√©rifie non seulement le fonctionnement de l'application en isolation, mais aussi son int√©gration harmonieuse dans l'√©cosyst√®me Wedding Collection. Cette validation couvre les aspects fonctionnels, techniques, de s√©curit√©, et d'exp√©rience utilisateur.

### 6.2 Tests d'Int√©gration Critiques

**Tests Backoffice** :
- Synchronisation des donn√©es prestataires
- Workflows de validation et d'administration
- Coh√©rence des donn√©es financi√®res et comptables

**Tests Client Portal** :
- Flux de demandes de devis bidirectionnel
- Messagerie inter-applications
- Synchronisation des statuts de r√©servation

**Tests √âcosyst√®me** :
- Performance globale sous charge
- Coh√©rence de l'exp√©rience utilisateur
- S√©curit√© des donn√©es partag√©es

### 6.3 M√©triques de Validation

- **Performance** : Temps de r√©ponse < 300ms, chargement initial < 1.8s
- **S√©curit√©** : Audit des politiques RLS, tests de p√©n√©tration
- **Fonctionnel** : Couverture des cas d'usage critiques √† 100%
- **Int√©gration** : Validation des flux de donn√©es bidirectionnels

---

## Conclusion

Ce guide de d√©veloppement s√©quentiel fournit une roadmap compl√®te pour cr√©er un Vendor Portal de qualit√© professionnelle, parfaitement int√©gr√© √† l'√©cosyst√®me ERP Wedding Collection. L'approche en 4 phases garantit une progression logique et ma√Ætris√©e, de l'√©tablissement des fondations techniques jusqu'au d√©ploiement des fonctionnalit√©s avanc√©es.

Chaque prompt est con√ßu pour √™tre ex√©cut√© de mani√®re autonome par Windsurf tout en s'appuyant sur les fondations √©tablies par les prompts pr√©c√©dents. Cette approche modulaire facilite le d√©veloppement, les tests, et la maintenance de l'application.

Le r√©sultat final sera une application Vendor Portal qui enrichit l'√©cosyst√®me Wedding Collection en offrant aux prestataires partenaires un outil complet et intuitif pour g√©rer leur activit√©, tout en maintenant la coh√©rence et la qualit√© de l'ensemble de la plateforme.

