# Guide de DÃ©veloppement SÃ©quentiel Windsurf - Vendor Portal Wedding Collection

**Version:** 1.0  
**Date:** 6 dÃ©cembre 2025  
**Auteur:** Manus AI - Expert Windsurf  
**Statut:** Guide de DÃ©veloppement Complet

---

## Table des MatiÃ¨res

1. [Introduction et Vue d'Ensemble](#1-introduction-et-vue-densemble)
2. [Phase 1 : Fondations et Infrastructure](#2-phase-1--fondations-et-infrastructure)
3. [Phase 2 : Modules MÃ©tier Principaux](#3-phase-2--modules-mÃ©tier-principaux)
4. [Phase 3 : Communication et Collaboration](#4-phase-3--communication-et-collaboration)
5. [Phase 4 : Modules AvancÃ©s et Optimisation](#5-phase-4--modules-avancÃ©s-et-optimisation)
6. [Validation et Tests d'IntÃ©gration](#6-validation-et-tests-dintÃ©gration)

---

## 1. Introduction et Vue d'Ensemble

### 1.1 Contexte et Objectifs

Le Vendor Portal constitue le troisiÃ¨me pilier de l'Ã©cosystÃ¨me ERP Wedding Collection, complÃ©tant l'architecture applicative avec une interface dÃ©diÃ©e aux prestataires partenaires. Cette application s'intÃ¨gre harmonieusement avec le Backoffice (gestion administrative) et le Client Portal (interface clients) pour crÃ©er un Ã©cosystÃ¨me collaboratif complet.

L'objectif de ce guide est de fournir une sÃ©quence de prompts Windsurf parfaitement structurÃ©s pour dÃ©velopper le Vendor Portal de A Ã  Z, en garantissant la cohÃ©rence avec l'architecture existante et l'optimisation des workflows de dÃ©veloppement.

### 1.2 Architecture Technique

Le Vendor Portal s'appuie sur la mÃªme stack technique que les autres applications de l'Ã©cosystÃ¨me :
- **Frontend** : React avec TypeScript, Vite, Tailwind CSS, ShadCN UI, Lucide Icons
- **Backend** : Supabase (PostgreSQL, Auth, Storage, Realtime)
- **Architecture** : Monorepo avec structure `apps/vendor-portal/`
- **IntÃ©grations** : API partagÃ©es avec Backoffice et Client Portal

### 1.3 Approche SÃ©quentielle

Le dÃ©veloppement suit une approche en 4 phases progressives :
1. **Fondations et Infrastructure** (7 prompts) : Base technique et authentification
2. **Modules MÃ©tier Principaux** (6 prompts) : CÅ“ur fonctionnel de l'application
3. **Communication et Collaboration** (5 prompts) : IntÃ©grations avec l'Ã©cosystÃ¨me
4. **Modules AvancÃ©s et Optimisation** (4 prompts) : FonctionnalitÃ©s diffÃ©renciantes

---

## 2. Phase 1 : Fondations et Infrastructure

### Prompt 1.1 : Configuration Application et Structure Modulaire

ğŸ¯ **But** : Initialiser l'application Vendor Portal dans le monorepo avec la structure technique optimale et la configuration Vite adaptÃ©e aux besoins des prestataires.

ğŸ§  **Contexte Technique** : CrÃ©ation de l'application `apps/vendor-portal/` dans le monorepo Wedding Collection avec configuration Vite, TypeScript strict, et intÃ©gration Tailwind CSS. L'application doit respecter l'architecture modulaire Ã©tablie pour les autres applications de l'Ã©cosystÃ¨me.

ğŸ› ï¸ **Types de Fichiers** : 
- `apps/vendor-portal/package.json`
- `apps/vendor-portal/vite.config.ts`
- `apps/vendor-portal/tsconfig.json`
- `apps/vendor-portal/tailwind.config.js`
- `apps/vendor-portal/src/` (structure complÃ¨te)

ğŸ”„ **Comportement Attendu** : 
CrÃ©er une application React TypeScript fonctionnelle avec hot reload, optimisation des assets, et structure de dossiers cohÃ©rente avec les conventions Wedding Collection. Configurer les alias de chemins, les variables d'environnement, et les outils de dÃ©veloppement.

âš™ï¸ **Interactions** : 
- Partage des types TypeScript avec le Backoffice via `@wedding-collection/types`
- Utilisation des composants UI partagÃ©s via `@wedding-collection/ui`
- Configuration des variables d'environnement Supabase partagÃ©es

ğŸ’¡ **Tips Windsurf** : 
Utilise la commande `npm create vite@latest` avec le template React-TypeScript, puis adapte la configuration pour le monorepo. Configure les alias de chemins avec `@/` pointant vers `src/`. Assure-toi que le port de dÃ©veloppement (5175) ne conflicte pas avec les autres applications.

---

### Prompt 1.2 : IntÃ©gration Supabase et Configuration Base de DonnÃ©es

ğŸ¯ **But** : Configurer l'intÃ©gration Supabase complÃ¨te avec authentification, accÃ¨s aux donnÃ©es prestataires, et politiques RLS spÃ©cifiques au Vendor Portal.

ğŸ§  **Contexte Technique** : Le Vendor Portal partage la mÃªme instance Supabase que le Backoffice et le Client Portal. Il doit accÃ©der aux tables prestataires existantes avec des politiques RLS appropriÃ©es, tout en crÃ©ant les tables spÃ©cifiques aux fonctionnalitÃ©s vendor (quotes, bookings, messages).

ğŸ› ï¸ **Types de Fichiers** :
- `src/lib/supabaseClient.ts`
- `src/types/database.types.ts`
- `src/services/authService.ts`
- `supabase/migrations/` (nouvelles tables vendor-specific)

ğŸ”„ **Comportement Attendu** :
Ã‰tablir la connexion Supabase avec gestion des erreurs robuste, typage TypeScript complet des tables, et configuration des politiques RLS pour l'accÃ¨s sÃ©curisÃ© aux donnÃ©es prestataires. CrÃ©er les tables spÃ©cifiques au Vendor Portal avec relations appropriÃ©es.

âš™ï¸ **Interactions** :
- Lecture des tables `vendors`, `vendor_services`, `vendor_availability` du Backoffice
- CrÃ©ation des tables `vendor_quotes`, `vendor_bookings`, `vendor_messages`
- Synchronisation avec les donnÃ©es clients via le Client Portal

ğŸ’¡ **Tips Windsurf** :
Utilise Supabase CLI pour gÃ©nÃ©rer les types TypeScript automatiquement. Configure les politiques RLS avec des fonctions helper pour vÃ©rifier l'appartenance des donnÃ©es au prestataire connectÃ©. ImplÃ©mente un systÃ¨me de cache intelligent pour les donnÃ©es frÃ©quemment consultÃ©es.

---

### Prompt 1.3 : SystÃ¨me d'Authentification et Gestion des Sessions

ğŸ¯ **But** : ImplÃ©menter un systÃ¨me d'authentification sÃ©curisÃ© spÃ©cifique aux prestataires avec gestion des sessions, rÃ©cupÃ©ration de mot de passe, et intÃ©gration avec les politiques RLS Supabase.

ğŸ§  **Contexte Technique** : L'authentification des prestataires utilise Supabase Auth avec des contraintes spÃ©cifiques : les comptes sont crÃ©Ã©s depuis le Backoffice, les prestataires ne peuvent pas s'auto-inscrire, et l'accÃ¨s est conditionnÃ© Ã  la validation du compte par l'Ã©quipe Wedding Collection.

ğŸ› ï¸ **Types de Fichiers** :
- `src/components/Auth/LoginForm.tsx`
- `src/components/Auth/ForgotPasswordForm.tsx`
- `src/contexts/AuthContext.tsx`
- `src/hooks/useAuth.ts`
- `src/pages/LoginPage.tsx`

ğŸ”„ **Comportement Attendu** :
Interface de connexion intuitive avec validation en temps rÃ©el, gestion des erreurs explicites, et redirection automatique selon le statut du prestataire (en attente de validation, actif, suspendu). Maintien de la session avec refresh automatique des tokens.

âš™ï¸ **Interactions** :
- VÃ©rification du statut prestataire dans la table `vendors` du Backoffice
- Synchronisation des permissions avec les politiques RLS
- IntÃ©gration avec le systÃ¨me de notifications pour les alertes de sÃ©curitÃ©

ğŸ’¡ **Tips Windsurf** :
ImplÃ©mente un AuthGuard pour protÃ©ger les routes privÃ©es. Utilise React Query pour la gestion du cache des donnÃ©es utilisateur. Configure des redirections intelligentes basÃ©es sur le statut du prestataire (validation en cours, profil incomplet, etc.).

---


### Prompt 1.4 : Layout Principal et Navigation Responsive

ğŸ¯ **But** : CrÃ©er le layout principal du Vendor Portal avec sidebar dynamique, header responsive, et navigation adaptÃ©e aux workflows des prestataires.

ğŸ§  **Contexte Technique** : Le layout doit Ãªtre cohÃ©rent avec le design system Wedding Collection tout en s'adaptant aux besoins spÃ©cifiques des prestataires. La sidebar doit organiser les modules par frÃ©quence d'utilisation et importance mÃ©tier, avec des indicateurs visuels pour les notifications et les tÃ¢ches en attente.

ğŸ› ï¸ **Types de Fichiers** :
- `src/components/Layout/MainLayout.tsx`
- `src/components/Layout/Sidebar.tsx`
- `src/components/Layout/Header.tsx`
- `src/components/Layout/MobileNav.tsx`
- `src/components/Navigation/NavItem.tsx`

ğŸ”„ **Comportement Attendu** :
Interface responsive avec sidebar collapsible, navigation mobile optimisÃ©e, et zones de contenu adaptatives. Affichage des notifications en temps rÃ©el, indicateurs de statut, et accÃ¨s rapide aux fonctionnalitÃ©s critiques (nouveaux devis, messages urgents).

âš™ï¸ **Interactions** :
- IntÃ©gration avec le systÃ¨me de notifications Supabase Realtime
- Synchronisation des badges de notification avec les donnÃ©es mÃ©tier
- CohÃ©rence visuelle avec le Client Portal et le Backoffice

ğŸ’¡ **Tips Windsurf** :
Utilise Tailwind CSS avec des breakpoints cohÃ©rents pour la responsivitÃ©. ImplÃ©mente un systÃ¨me de badges dynamiques basÃ© sur React Query pour les notifications. Configure des animations subtiles pour amÃ©liorer l'expÃ©rience utilisateur sans impacter les performances.

---

### Prompt 1.5 : Dashboard Principal et Widgets de Vue d'Ensemble

ğŸ¯ **But** : DÃ©velopper le dashboard principal du Vendor Portal avec widgets informatifs, mÃ©triques clÃ©s, et accÃ¨s rapide aux actions prioritaires pour les prestataires.

ğŸ§  **Contexte Technique** : Le dashboard agrÃ¨ge les donnÃ©es critiques du prestataire : demandes de devis en attente, rÃ©servations confirmÃ©es, messages non lus, performances financiÃ¨res, et alertes importantes. Les widgets doivent Ãªtre performants et se mettre Ã  jour en temps rÃ©el.

ğŸ› ï¸ **Types de Fichiers** :
- `src/pages/DashboardPage.tsx`
- `src/components/Dashboard/StatsWidget.tsx`
- `src/components/Dashboard/QuickActions.tsx`
- `src/components/Dashboard/RecentActivity.tsx`
- `src/components/Dashboard/NotificationCenter.tsx`

ğŸ”„ **Comportement Attendu** :
Interface de tableau de bord moderne avec widgets configurables, mÃ©triques en temps rÃ©el, et actions rapides contextuelles. Affichage optimisÃ© des KPIs prestataires : taux de conversion des devis, chiffre d'affaires mensuel, satisfaction client, et planning Ã  venir.

âš™ï¸ **Interactions** :
- AgrÃ©gation des donnÃ©es depuis les tables `vendor_quotes`, `vendor_bookings`, `vendor_reviews`
- IntÃ©gration avec les notifications Supabase Realtime
- Liens directs vers les modules concernÃ©s pour les actions rapides

ğŸ’¡ **Tips Windsurf** :
Utilise React Query avec des intervalles de refetch optimisÃ©s pour les mÃ©triques temps rÃ©el. ImplÃ©mente des skeleton loaders pour amÃ©liorer la perception de performance. Configure des seuils d'alerte personnalisables pour les KPIs critiques.

---

### Prompt 1.6 : SystÃ¨me de Notifications et Alertes Temps RÃ©el

ğŸ¯ **But** : ImplÃ©menter un systÃ¨me de notifications complet avec Supabase Realtime, gestion des prÃ©fÃ©rences utilisateur, et intÃ©gration multi-canal (in-app, email, SMS).

ğŸ§  **Contexte Technique** : Le systÃ¨me de notifications doit gÃ©rer les Ã©vÃ©nements critiques pour les prestataires : nouvelles demandes de devis, confirmations de rÃ©servation, messages clients, paiements reÃ§us, et alertes administratives. L'intÃ©gration avec Supabase Realtime assure la rÃ©activitÃ© temps rÃ©el.

ğŸ› ï¸ **Types de Fichiers** :
- `src/components/Notifications/NotificationCenter.tsx`
- `src/components/Notifications/NotificationItem.tsx`
- `src/services/notificationService.ts`
- `src/hooks/useNotifications.ts`
- `src/types/notifications.types.ts`

ğŸ”„ **Comportement Attendu** :
Centre de notifications avec catÃ©gorisation intelligente, marquage lu/non lu, et actions contextuelles. Notifications push en temps rÃ©el avec sons et animations subtiles. Gestion des prÃ©fÃ©rences de notification par type et canal.

âš™ï¸ **Interactions** :
- Ã‰coute des Ã©vÃ©nements Supabase Realtime sur les tables critiques
- IntÃ©gration avec les services email (SendGrid) et SMS pour les notifications externes
- Synchronisation avec le systÃ¨me de notifications du Client Portal pour les messages

ğŸ’¡ **Tips Windsurf** :
Configure Supabase Realtime avec des filtres optimisÃ©s pour Ã©viter les notifications parasites. Utilise React Query pour la gestion du cache des notifications. ImplÃ©mente un systÃ¨me de retry intelligent pour les notifications critiques.

---

### Prompt 1.7 : Gestion des Profils Prestataires et Informations LÃ©gales

ğŸ¯ **But** : CrÃ©er l'interface de gestion complÃ¨te du profil prestataire avec informations lÃ©gales, coordonnÃ©es bancaires, et validation des documents obligatoires.

ğŸ§  **Contexte Technique** : Le profil prestataire inclut des donnÃ©es sensibles (SIRET, RIB, assurances) qui nÃ©cessitent un chiffrement appropriÃ© et des validations strictes. L'interface doit guider le prestataire dans la complÃ©tude de son profil avec des indicateurs de progression et des validations en temps rÃ©el.

ğŸ› ï¸ **Types de Fichiers** :
- `src/pages/ProfilePage.tsx`
- `src/components/Profile/ProfileForm.tsx`
- `src/components/Profile/LegalInfoForm.tsx`
- `src/components/Profile/BankInfoForm.tsx`
- `src/components/Profile/DocumentUpload.tsx`

ğŸ”„ **Comportement Attendu** :
Formulaire multi-Ã©tapes avec validation progressive, upload sÃ©curisÃ© de documents, et indicateur de complÃ©tude du profil. Gestion des modifications avec historique des changements et validation administrative pour les informations critiques.

âš™ï¸ **Interactions** :
- Synchronisation avec la table `vendors` du Backoffice
- Validation des documents via l'Ã©quipe Wedding Collection
- IntÃ©gration avec Supabase Storage pour les documents sensibles

ğŸ’¡ **Tips Windsurf** :
Utilise React Hook Form avec Zod pour la validation robuste des formulaires. ImplÃ©mente un systÃ¨me de chiffrement cÃ´tÃ© client pour les donnÃ©es bancaires. Configure des politiques RLS strictes pour l'accÃ¨s aux informations sensibles.

---

## 3. Phase 2 : Modules MÃ©tier Principaux

### Prompt 2.1 : Module Gestion des Services et Catalogue

ğŸ¯ **But** : DÃ©velopper l'interface complÃ¨te de gestion des services prestataires avec crÃ©ation, modification, tarification, et gestion des options personnalisables.

ğŸ§  **Contexte Technique** : Le module permet aux prestataires de crÃ©er et gÃ©rer leur catalogue de services avec une granularitÃ© fine : services de base, options additionnelles, tarifs variables selon les critÃ¨res (saison, durÃ©e, nombre d'invitÃ©s), et conditions spÃ©ciales. L'interface doit Ãªtre intuitive tout en gÃ©rant la complexitÃ© des configurations.

ğŸ› ï¸ **Types de Fichiers** :
- `src/pages/ServicesPage.tsx`
- `src/components/Services/ServicesList.tsx`
- `src/components/Services/ServiceForm.tsx`
- `src/components/Services/PricingManager.tsx`
- `src/components/Services/OptionsManager.tsx`

ğŸ”„ **Comportement Attendu** :
Interface de gestion de catalogue avec crÃ©ation guidÃ©e de services, configurateur de tarifs dynamique, et prÃ©visualisation du rendu client. Gestion des variantes de services, des packages, et des promotions temporaires avec validation des cohÃ©rences tarifaires.

âš™ï¸ **Interactions** :
- Synchronisation avec la table `vendor_services` du Backoffice
- IntÃ©gration avec le catalogue visible dans le Client Portal
- Validation des tarifs avec les rÃ¨gles de commission Wedding Collection

ğŸ’¡ **Tips Windsurf** :
Utilise un builder pattern pour la crÃ©ation de services complexes. ImplÃ©mente une prÃ©visualisation en temps rÃ©el du rendu client. Configure des validations mÃ©tier pour Ã©viter les incohÃ©rences tarifaires.

---

### Prompt 2.2 : Gestion des DisponibilitÃ©s et Calendrier Intelligent

ğŸ¯ **But** : CrÃ©er un systÃ¨me de gestion des disponibilitÃ©s avec calendrier interactif, rÃ¨gles de disponibilitÃ© automatiques, et synchronisation avec les calendriers externes.

ğŸ§  **Contexte Technique** : Le systÃ¨me doit gÃ©rer la complexitÃ© des disponibilitÃ©s prestataires : crÃ©neaux rÃ©currents, exceptions ponctuelles, temps de prÃ©paration/dÃ©montage, et conflits potentiels. L'intÃ©gration avec les calendriers externes (Google Calendar, Outlook) assure une synchronisation bidirectionnelle.

ğŸ› ï¸ **Types de Fichiers** :
- `src/pages/AvailabilityPage.tsx`
- `src/components/Availability/CalendarView.tsx`
- `src/components/Availability/RulesManager.tsx`
- `src/components/Availability/ExceptionsManager.tsx`
- `src/services/calendarSyncService.ts`

ğŸ”„ **Comportement Attendu** :
Calendrier interactif avec gestion drag-and-drop des crÃ©neaux, dÃ©finition de rÃ¨gles rÃ©currentes, et dÃ©tection automatique des conflits. Interface de synchronisation avec les calendriers externes et notifications des modifications importantes.

âš™ï¸ **Interactions** :
- Synchronisation avec les rÃ©servations confirmÃ©es du Client Portal
- IntÃ©gration avec les APIs Google Calendar et Microsoft Graph
- Validation des disponibilitÃ©s lors de la crÃ©ation de devis

ğŸ’¡ **Tips Windsurf** :
Utilise une librairie de calendrier performante comme FullCalendar ou React Big Calendar. ImplÃ©mente un systÃ¨me de cache intelligent pour les disponibilitÃ©s frÃ©quemment consultÃ©es. Configure des webhooks pour la synchronisation temps rÃ©el avec les calendriers externes.

---


### Prompt 2.3 : Module Gestion des Devis et RÃ©ponses PersonnalisÃ©es

ğŸ¯ **But** : DÃ©velopper l'interface complÃ¨te de gestion des devis avec rÃ©ception des demandes du Client Portal, crÃ©ation de rÃ©ponses personnalisÃ©es, et suivi du cycle de vie des devis.

ğŸ§  **Contexte Technique** : Le module centralise la gestion des demandes de devis reÃ§ues depuis le Client Portal. Il permet la crÃ©ation de rÃ©ponses dÃ©taillÃ©es avec calculs automatiques, personnalisation des propositions, et suivi des interactions client. L'intÃ©gration temps rÃ©el assure une rÃ©activitÃ© optimale.

ğŸ› ï¸ **Types de Fichiers** :
- `src/pages/QuotesPage.tsx`
- `src/components/Quotes/QuoteRequestsList.tsx`
- `src/components/Quotes/QuoteBuilder.tsx`
- `src/components/Quotes/QuotePreview.tsx`
- `src/components/Quotes/QuoteTracking.tsx`

ğŸ”„ **Comportement Attendu** :
Interface de gestion des devis avec liste filtrÃ©e des demandes, builder de devis avec calculs automatiques, prÃ©visualisation du rendu client, et tracking des consultations. Notifications temps rÃ©el des nouvelles demandes et des interactions client.

âš™ï¸ **Interactions** :
- RÃ©ception des demandes depuis la table `quote_requests` du Client Portal
- CrÃ©ation des rÃ©ponses dans `vendor_quotes` avec synchronisation bidirectionnelle
- IntÃ©gration avec le systÃ¨me de tarification et les services configurÃ©s

ğŸ’¡ **Tips Windsurf** :
ImplÃ©mente un systÃ¨me de templates de devis pour accÃ©lÃ©rer les rÃ©ponses rÃ©currentes. Utilise React Query avec des mutations optimistes pour une UX fluide. Configure des alertes automatiques pour les devis en attente de rÃ©ponse.

---

### Prompt 2.4 : Gestion des RÃ©servations et Suivi des Prestations

ğŸ¯ **But** : CrÃ©er l'interface de gestion des rÃ©servations confirmÃ©es avec suivi dÃ©taillÃ© des prestations, gestion des statuts, et coordination avec l'Ã©quipe Wedding Collection.

ğŸ§  **Contexte Technique** : Le module gÃ¨re le cycle de vie complet des prestations confirmÃ©es : prÃ©paration, exÃ©cution, et finalisation. Il inclut l'accÃ¨s aux informations dÃ©taillÃ©es de l'Ã©vÃ©nement, la coordination avec les autres prestataires, et la gestion des livrables post-prestation.

ğŸ› ï¸ **Types de Fichiers** :
- `src/pages/BookingsPage.tsx`
- `src/components/Bookings/BookingsList.tsx`
- `src/components/Bookings/BookingDetails.tsx`
- `src/components/Bookings/StatusManager.tsx`
- `src/components/Bookings/DeliverableUpload.tsx`

ğŸ”„ **Comportement Attendu** :
Interface de suivi des rÃ©servations avec timeline dÃ©taillÃ©e, gestion des statuts de prestation, upload des livrables, et communication avec l'Ã©quipe Wedding Collection. AccÃ¨s aux informations logistiques et coordination avec les autres prestataires.

âš™ï¸ **Interactions** :
- Synchronisation avec les donnÃ©es d'Ã©vÃ©nements du Backoffice
- Coordination avec les autres prestataires via le systÃ¨me de messagerie
- Upload des livrables vers Supabase Storage avec partage sÃ©curisÃ©

ğŸ’¡ **Tips Windsurf** :
Utilise un systÃ¨me de workflow configurable pour les statuts de prestation. ImplÃ©mente des notifications automatiques pour les Ã©tapes critiques. Configure des permissions granulaires pour l'accÃ¨s aux informations d'Ã©vÃ©nement.

---

### Prompt 2.5 : Module Messagerie et Communication Client

ğŸ¯ **But** : DÃ©velopper le systÃ¨me de messagerie intÃ©grÃ© permettant la communication directe avec les clients et l'Ã©quipe Wedding Collection, avec gestion des piÃ¨ces jointes et historique complet.

ğŸ§  **Contexte Technique** : Le systÃ¨me de messagerie utilise Supabase Realtime pour les Ã©changes temps rÃ©el. Il gÃ¨re les conversations avec les clients (via le Client Portal) et avec l'Ã©quipe Wedding Collection, avec des niveaux de confidentialitÃ© appropriÃ©s et un archivage sÃ©curisÃ©.

ğŸ› ï¸ **Types de Fichiers** :
- `src/pages/MessagesPage.tsx`
- `src/components/Messages/ConversationsList.tsx`
- `src/components/Messages/ChatInterface.tsx`
- `src/components/Messages/FileUpload.tsx`
- `src/services/messagingService.ts`

ğŸ”„ **Comportement Attendu** :
Interface de messagerie moderne avec conversations organisÃ©es, envoi de fichiers sÃ©curisÃ©, notifications temps rÃ©el, et recherche dans l'historique. Distinction claire entre les conversations clients et administratives.

âš™ï¸ **Interactions** :
- Synchronisation bidirectionnelle avec le Client Portal pour les messages clients
- Canal dÃ©diÃ© avec l'Ã©quipe Wedding Collection pour le support
- IntÃ©gration avec Supabase Storage pour les piÃ¨ces jointes

ğŸ’¡ **Tips Windsurf** :
Utilise Supabase Realtime avec des channels spÃ©cifiques pour chaque conversation. ImplÃ©mente un systÃ¨me de typing indicators et de statuts de lecture. Configure des politiques RLS strictes pour la confidentialitÃ© des messages.

---

### Prompt 2.6 : Gestion FinanciÃ¨re et Facturation Prestataires

ğŸ¯ **But** : CrÃ©er l'interface de gestion financiÃ¨re permettant la dÃ©claration des factures clients, le suivi des paiements, et la gestion des factures de commission Wedding Collection.

ğŸ§  **Contexte Technique** : Le module s'intÃ¨gre avec le systÃ¨me comptable du Backoffice pour la gestion des flux financiers. Il permet aux prestataires de dÃ©clarer leurs factures clients, de suivre les paiements, et de gÃ©rer les factures de commission avec Wedding Collection.

ğŸ› ï¸ **Types de Fichiers** :
- `src/pages/FinancePage.tsx`
- `src/components/Finance/InvoiceDeclaration.tsx`
- `src/components/Finance/PaymentTracking.tsx`
- `src/components/Finance/CommissionManager.tsx`
- `src/components/Finance/FinancialDashboard.tsx`

ğŸ”„ **Comportement Attendu** :
Interface de gestion financiÃ¨re avec dÃ©claration guidÃ©e des factures, suivi automatique des paiements, gestion des commissions, et tableau de bord financier avec mÃ©triques clÃ©s. Export des donnÃ©es comptables pour les logiciels externes.

âš™ï¸ **Interactions** :
- Synchronisation avec le module ComptabilitÃ© du Backoffice
- IntÃ©gration avec les systÃ¨mes de paiement pour le tracking automatique
- GÃ©nÃ©ration automatique des factures de commission

ğŸ’¡ **Tips Windsurf** :
ImplÃ©mente des validations strictes pour les donnÃ©es financiÃ¨res. Utilise des composants de graphiques pour visualiser les performances financiÃ¨res. Configure des alertes automatiques pour les paiements en retard.

---

## 4. Phase 3 : Communication et Collaboration

### Prompt 3.1 : SystÃ¨me de Notifications AvancÃ©es et PrÃ©fÃ©rences

ğŸ¯ **But** : Enrichir le systÃ¨me de notifications avec gestion granulaire des prÃ©fÃ©rences, notifications push, et intÃ©gration multi-canal (email, SMS, in-app).

ğŸ§  **Contexte Technique** : Extension du systÃ¨me de notifications de base avec des fonctionnalitÃ©s avancÃ©es : catÃ©gorisation intelligente, prÃ©fÃ©rences utilisateur granulaires, notifications push via service workers, et intÃ©gration avec les services externes (SendGrid, Twilio).

ğŸ› ï¸ **Types de Fichiers** :
- `src/components/Notifications/NotificationPreferences.tsx`
- `src/components/Notifications/PushNotificationManager.tsx`
- `src/services/pushNotificationService.ts`
- `src/workers/notificationWorker.ts`
- `public/sw.js`

ğŸ”„ **Comportement Attendu** :
Interface de prÃ©fÃ©rences de notifications avec contrÃ´le granulaire par type et canal, notifications push mÃªme application fermÃ©e, et gestion intelligente de la frÃ©quence pour Ã©viter le spam. Respect des prÃ©fÃ©rences utilisateur et conformitÃ© RGPD.

âš™ï¸ **Interactions** :
- IntÃ©gration avec SendGrid pour les notifications email
- Utilisation de Twilio pour les SMS critiques
- Synchronisation avec les prÃ©fÃ©rences stockÃ©es en base

ğŸ’¡ **Tips Windsurf** :
ImplÃ©mente un service worker pour les notifications push. Utilise une approche progressive pour demander les permissions de notification. Configure des templates de notification rÃ©utilisables pour la cohÃ©rence.

---

### Prompt 3.2 : Gestion Documentaire et Partage SÃ©curisÃ©

ğŸ¯ **But** : DÃ©velopper un systÃ¨me de gestion documentaire complet avec organisation hiÃ©rarchique, partage sÃ©curisÃ©, et collaboration sur les documents avec les clients et l'Ã©quipe Wedding Collection.

ğŸ§  **Contexte Technique** : Le systÃ¨me utilise Supabase Storage avec des politiques de sÃ©curitÃ© granulaires pour la gestion des documents prestataires. Il inclut l'organisation en dossiers, le versioning, le partage temporaire, et la collaboration en temps rÃ©el sur certains types de documents.

ğŸ› ï¸ **Types de Fichiers** :
- `src/pages/DocumentsPage.tsx`
- `src/components/Documents/DocumentManager.tsx`
- `src/components/Documents/FolderTree.tsx`
- `src/components/Documents/ShareManager.tsx`
- `src/services/documentService.ts`

ğŸ”„ **Comportement Attendu** :
Interface de gestion documentaire avec arborescence de dossiers, upload par drag-and-drop, prÃ©visualisation des documents, et partage sÃ©curisÃ© avec liens temporaires. Gestion des versions et collaboration sur les documents partagÃ©s.

âš™ï¸ **Interactions** :
- Stockage sÃ©curisÃ© via Supabase Storage avec chiffrement
- Partage avec les clients via le Client Portal
- Collaboration avec l'Ã©quipe Wedding Collection

ğŸ’¡ **Tips Windsurf** :
Utilise des politiques RLS Supabase pour la sÃ©curitÃ© des documents. ImplÃ©mente un systÃ¨me de prÃ©visualisation pour les formats courants. Configure des liens de partage temporaires avec expiration automatique.

---

### Prompt 3.3 : Coordination Multi-Prestataires et Planning PartagÃ©

ğŸ¯ **But** : CrÃ©er les outils de coordination entre prestataires pour les Ã©vÃ©nements complexes avec planning partagÃ©, communication de groupe, et gestion des dÃ©pendances logistiques.

ğŸ§  **Contexte Technique** : Le systÃ¨me permet la coordination entre plusieurs prestataires intervenant sur le mÃªme Ã©vÃ©nement. Il inclut un planning partagÃ©, des canaux de communication dÃ©diÃ©s, et la gestion des dÃ©pendances logistiques (ordre d'intervention, partage d'Ã©quipements, etc.).

ğŸ› ï¸ **Types de Fichiers** :
- `src/pages/CoordinationPage.tsx`
- `src/components/Coordination/SharedPlanning.tsx`
- `src/components/Coordination/VendorChat.tsx`
- `src/components/Coordination/LogisticsManager.tsx`
- `src/services/coordinationService.ts`

ğŸ”„ **Comportement Attendu** :
Interface de coordination avec planning partagÃ© en temps rÃ©el, chat de groupe entre prestataires, gestion des dÃ©pendances logistiques, et notifications des modifications importantes. VisibilitÃ© sur les interventions des autres prestataires.

âš™ï¸ **Interactions** :
- Synchronisation avec les plannings individuels des prestataires
- IntÃ©gration avec les donnÃ©es d'Ã©vÃ©nement du Backoffice
- Communication temps rÃ©el via Supabase Realtime

ğŸ’¡ **Tips Windsurf** :
Utilise des channels Supabase Realtime spÃ©cifiques par Ã©vÃ©nement. ImplÃ©mente un systÃ¨me de permissions pour la visibilitÃ© des informations sensibles. Configure des notifications intelligentes pour Ã©viter le spam.

---

### Prompt 3.4 : IntÃ©gration avec l'Ã‰cosystÃ¨me Wedding Collection

ğŸ¯ **But** : DÃ©velopper les intÃ©grations avancÃ©es avec le Backoffice et le Client Portal pour crÃ©er une expÃ©rience unifiÃ©e et des workflows collaboratifs optimisÃ©s.

ğŸ§  **Contexte Technique** : Les intÃ©grations permettent une synchronisation bidirectionnelle des donnÃ©es critiques, des workflows automatisÃ©s, et une expÃ©rience utilisateur cohÃ©rente entre les applications. Elles incluent la synchronisation des statuts, la propagation des notifications, et la coordination des processus mÃ©tier.

ğŸ› ï¸ **Types de Fichiers** :
- `src/services/integrationService.ts`
- `src/hooks/useBackofficeSync.ts`
- `src/hooks/useClientPortalSync.ts`
- `src/components/Integration/SyncStatus.tsx`
- `src/utils/dataSync.ts`

ğŸ”„ **Comportement Attendu** :
Synchronisation transparente des donnÃ©es entre applications, workflows automatisÃ©s pour les processus critiques, et indicateurs de statut de synchronisation. Gestion des conflits de donnÃ©es et rÃ©conciliation automatique.

âš™ï¸ **Interactions** :
- Synchronisation bidirectionnelle avec le Backoffice pour les donnÃ©es prestataires
- IntÃ©gration temps rÃ©el avec le Client Portal pour les devis et messages
- Coordination avec les systÃ¨mes de notification globaux

ğŸ’¡ **Tips Windsurf** :
ImplÃ©mente un systÃ¨me de queue pour les synchronisations critiques. Utilise des webhooks pour les notifications inter-applications. Configure des mÃ©canismes de retry et de fallback pour la rÃ©silience.

---

### Prompt 3.5 : Analytics et Reporting Prestataires

ğŸ¯ **But** : CrÃ©er un systÃ¨me d'analytics complet avec mÃ©triques de performance, rapports personnalisÃ©s, et insights pour optimiser l'activitÃ© des prestataires.

ğŸ§  **Contexte Technique** : Le systÃ¨me d'analytics agrÃ¨ge les donnÃ©es de l'ensemble de l'Ã©cosystÃ¨me pour fournir des insights pertinents aux prestataires : performance commerciale, satisfaction client, optimisation des tarifs, et tendances du marchÃ©.

ğŸ› ï¸ **Types de Fichiers** :
- `src/pages/AnalyticsPage.tsx`
- `src/components/Analytics/PerformanceDashboard.tsx`
- `src/components/Analytics/ReportBuilder.tsx`
- `src/components/Analytics/InsightsPanel.tsx`
- `src/services/analyticsService.ts`

ğŸ”„ **Comportement Attendu** :
Tableau de bord d'analytics avec mÃ©triques clÃ©s, gÃ©nÃ©rateur de rapports personnalisÃ©s, insights automatiques, et comparaisons avec les moyennes du secteur. Export des donnÃ©es pour analyse externe.

âš™ï¸ **Interactions** :
- AgrÃ©gation des donnÃ©es depuis toutes les tables prestataires
- IntÃ©gration avec les donnÃ©es de satisfaction client du Client Portal
- Comparaisons avec les donnÃ©es anonymisÃ©es des autres prestataires

ğŸ’¡ **Tips Windsurf** :
Utilise des vues matÃ©rialisÃ©es pour les calculs complexes. ImplÃ©mente des graphiques interactifs avec une librairie comme Chart.js ou Recharts. Configure des alertes automatiques pour les mÃ©triques critiques.

---

## 5. Phase 4 : Modules AvancÃ©s et Optimisation

### Prompt 4.1 : Mini-Site Public et Vitrine Prestataire

ğŸ¯ **But** : DÃ©velopper l'Ã©diteur de mini-site public permettant aux prestataires de crÃ©er leur vitrine en ligne intÃ©grÃ©e au site Wedding Collection avec gestion des mÃ©dias et SEO.

ğŸ§  **Contexte Technique** : L'Ã©diteur de mini-site utilise un systÃ¨me de blocs modulaires pour crÃ©er des pages personnalisÃ©es. Il s'intÃ¨gre avec Supabase Storage pour les mÃ©dias et gÃ©nÃ¨re automatiquement les pages publiques avec optimisation SEO et performance.

ğŸ› ï¸ **Types de Fichiers** :
- `src/pages/MinisitePage.tsx`
- `src/components/Minisite/SiteEditor.tsx`
- `src/components/Minisite/BlockEditor.tsx`
- `src/components/Minisite/MediaManager.tsx`
- `src/components/Minisite/SEOManager.tsx`

ğŸ”„ **Comportement Attendu** :
Ã‰diteur de site intuitif avec systÃ¨me de blocs drag-and-drop, gestion des mÃ©dias avec optimisation automatique, prÃ©visualisation en temps rÃ©el, et publication en un clic. Optimisation SEO automatique et analytics de performance.

âš™ï¸ **Interactions** :
- Publication automatique sur le site public Wedding Collection
- IntÃ©gration avec les services et disponibilitÃ©s du prestataire
- Synchronisation avec les avis clients et les rÃ©alisations

ğŸ’¡ **Tips Windsurf** :
Utilise un Ã©diteur de blocs comme Craft.js ou un systÃ¨me custom. ImplÃ©mente l'optimisation automatique des images avec Sharp. Configure la gÃ©nÃ©ration statique pour les performances SEO.

---

### Prompt 4.2 : IntÃ©grations Externes et API Tierces

ğŸ¯ **But** : DÃ©velopper les connecteurs avec les systÃ¨mes externes : calendriers (Google, Outlook), comptabilitÃ© (Sage, Cegid), et plateformes de paiement pour une intÃ©gration complÃ¨te de l'Ã©cosystÃ¨me prestataire.

ğŸ§  **Contexte Technique** : Les intÃ©grations utilisent les APIs officielles des services tiers avec gestion des tokens d'authentification, synchronisation bidirectionnelle, et gestion des erreurs robuste. Chaque intÃ©gration respecte les limites de taux et les bonnes pratiques de sÃ©curitÃ©.

ğŸ› ï¸ **Types de Fichiers** :
- `src/pages/IntegrationsPage.tsx`
- `src/components/Integrations/CalendarSync.tsx`
- `src/components/Integrations/AccountingSync.tsx`
- `src/services/externalApiService.ts`
- `src/utils/apiConnectors.ts`

ğŸ”„ **Comportement Attendu** :
Interface de gestion des intÃ©grations avec configuration guidÃ©e, synchronisation automatique, monitoring des erreurs, et gestion des conflits. Tableau de bord des intÃ©grations actives avec statuts en temps rÃ©el.

âš™ï¸ **Interactions** :
- Synchronisation bidirectionnelle avec Google Calendar et Outlook
- Export automatique vers les logiciels de comptabilitÃ©
- IntÃ©gration avec les plateformes de paiement (Stripe, PayPal)

ğŸ’¡ **Tips Windsurf** :
Utilise des workers pour les synchronisations longues. ImplÃ©mente un systÃ¨me de retry exponentiel pour les APIs externes. Configure des webhooks pour les notifications de changement.

---

### Prompt 4.3 : Optimisation des Performances et Cache Intelligent

ğŸ¯ **But** : ImplÃ©menter un systÃ¨me de cache intelligent, optimiser les performances de l'application, et configurer le monitoring pour assurer une expÃ©rience utilisateur optimale.

ğŸ§  **Contexte Technique** : L'optimisation inclut la mise en cache des donnÃ©es frÃ©quemment consultÃ©es, la lazy loading des composants, l'optimisation des requÃªtes Supabase, et la configuration d'un monitoring complet avec mÃ©triques de performance.

ğŸ› ï¸ **Types de Fichiers** :
- `src/services/cacheService.ts`
- `src/hooks/useOptimizedQuery.ts`
- `src/utils/performanceMonitor.ts`
- `src/components/Performance/LoadingOptimizer.tsx`
- `vite.config.ts` (optimisations build)

ğŸ”„ **Comportement Attendu** :
Application avec temps de chargement optimisÃ©s, cache intelligent des donnÃ©es, lazy loading des composants lourds, et monitoring en temps rÃ©el des performances. Optimisation automatique des requÃªtes et des assets.

âš™ï¸ **Interactions** :
- Cache partagÃ© avec les autres applications de l'Ã©cosystÃ¨me
- Monitoring intÃ©grÃ© avec les mÃ©triques globales Wedding Collection
- Optimisation des requÃªtes Supabase avec indexation intelligente

ğŸ’¡ **Tips Windsurf** :
Utilise React Query avec des stratÃ©gies de cache optimisÃ©es. ImplÃ©mente le code splitting avec React.lazy. Configure Vite avec des optimisations de build avancÃ©es et compression.

---

### Prompt 4.4 : Tests d'IntÃ©gration et Validation Ã‰cosystÃ¨me

ğŸ¯ **But** : DÃ©velopper une suite de tests complÃ¨te couvrant les intÃ©grations avec le Backoffice et le Client Portal, les workflows critiques, et la validation de la cohÃ©rence des donnÃ©es.

ğŸ§  **Contexte Technique** : Les tests d'intÃ©gration valident les flux de donnÃ©es entre applications, les workflows de bout en bout, et la cohÃ©rence de l'expÃ©rience utilisateur. Ils incluent des tests automatisÃ©s, des tests de charge, et des validations de sÃ©curitÃ©.

ğŸ› ï¸ **Types de Fichiers** :
- `tests/integration/backofficeIntegration.test.ts`
- `tests/integration/clientPortalIntegration.test.ts`
- `tests/e2e/vendorWorkflows.spec.ts`
- `tests/performance/loadTesting.test.ts`
- `tests/security/dataAccess.test.ts`

ğŸ”„ **Comportement Attendu** :
Suite de tests automatisÃ©s couvrant les scÃ©narios critiques, tests de performance sous charge, validation de la sÃ©curitÃ© des donnÃ©es, et tests de rÃ©gression pour les intÃ©grations. Rapports dÃ©taillÃ©s et alertes automatiques.

âš™ï¸ **Interactions** :
- Tests des flux de donnÃ©es avec le Backoffice et le Client Portal
- Validation des politiques RLS et de la sÃ©curitÃ©
- Tests de performance de l'Ã©cosystÃ¨me complet

ğŸ’¡ **Tips Windsurf** :
Utilise Playwright pour les tests E2E. ImplÃ©mente des tests de contrat avec Pact pour les APIs. Configure des tests de charge avec Artillery ou K6.

---

## 6. Validation et Tests d'IntÃ©gration

### 6.1 StratÃ©gie de Validation Globale

La validation du Vendor Portal nÃ©cessite une approche multicouche qui vÃ©rifie non seulement le fonctionnement de l'application en isolation, mais aussi son intÃ©gration harmonieuse dans l'Ã©cosystÃ¨me Wedding Collection. Cette validation couvre les aspects fonctionnels, techniques, de sÃ©curitÃ©, et d'expÃ©rience utilisateur.

### 6.2 Tests d'IntÃ©gration Critiques

**Tests Backoffice** :
- Synchronisation des donnÃ©es prestataires
- Workflows de validation et d'administration
- CohÃ©rence des donnÃ©es financiÃ¨res et comptables

**Tests Client Portal** :
- Flux de demandes de devis bidirectionnel
- Messagerie inter-applications
- Synchronisation des statuts de rÃ©servation

**Tests Ã‰cosystÃ¨me** :
- Performance globale sous charge
- CohÃ©rence de l'expÃ©rience utilisateur
- SÃ©curitÃ© des donnÃ©es partagÃ©es

### 6.3 MÃ©triques de Validation

- **Performance** : Temps de rÃ©ponse < 300ms, chargement initial < 1.8s
- **SÃ©curitÃ©** : Audit des politiques RLS, tests de pÃ©nÃ©tration
- **Fonctionnel** : Couverture des cas d'usage critiques Ã  100%
- **IntÃ©gration** : Validation des flux de donnÃ©es bidirectionnels

---

## Conclusion

Ce guide de dÃ©veloppement sÃ©quentiel fournit une roadmap complÃ¨te pour crÃ©er un Vendor Portal de qualitÃ© professionnelle, parfaitement intÃ©grÃ© Ã  l'Ã©cosystÃ¨me ERP Wedding Collection. L'approche en 4 phases garantit une progression logique et maÃ®trisÃ©e, de l'Ã©tablissement des fondations techniques jusqu'au dÃ©ploiement des fonctionnalitÃ©s avancÃ©es.

Chaque prompt est conÃ§u pour Ãªtre exÃ©cutÃ© de maniÃ¨re autonome par Windsurf tout en s'appuyant sur les fondations Ã©tablies par les prompts prÃ©cÃ©dents. Cette approche modulaire facilite le dÃ©veloppement, les tests, et la maintenance de l'application.

Le rÃ©sultat final sera une application Vendor Portal qui enrichit l'Ã©cosystÃ¨me Wedding Collection en offrant aux prestataires partenaires un outil complet et intuitif pour gÃ©rer leur activitÃ©, tout en maintenant la cohÃ©rence et la qualitÃ© de l'ensemble de la plateforme.

