# Prompts Windsurf - Module Lieux du Backoffice

## 📋 Informations du Module

- **Module** : Gestion des Lieux (Backoffice)
- **Identifiant technique** : `backoffice_venue_management`
- **Version** : 0.1.0
- **Application** : Backoffice (`apps/backoffice`)
- **Priorité** : P1 (Haute - Module métier fondamental)
- **Dépendances** : Module Initialisation Monorepo, Console Admin, Dashboard
- **Schéma DB** : `shared` (tables venues et référentiels)

---

## 🎯 Vue d'Ensemble du Module

Le module Lieux du Backoffice constitue l'un des piliers métier de l'ERP Wedding Collection. Il centralise la gestion complète des lieux de réception partenaires avec leurs espaces, équipements, photos, plans et disponibilités. Ce module fournit une interface d'administration complète pour les gestionnaires de contenu et s'intègre parfaitement avec les autres modules de l'écosystème.

Le module s'intègre dans l'application `apps/backoffice` via le bouton "Lieux" de la sidebar. Il utilise le schéma `shared` de Supabase pour assurer la cohérence des données avec les autres applications du monorepo (client-portal, vendor-portal, public-site).

---

## 🚀 Section 1 : Initialisation

### 01 - Création des tables principales et types énumérés

🎯 **But clair**
Créer les tables principales du module Lieux dans le schéma `shared` avec les types énumérés, en respectant les conventions Supabase du projet et en assurant l'intégrité référentielle.

🧠 **Contexte technique**
Ces tables constituent la fondation du module Lieux. Elles incluent la table principale `wedding_venues`, les tables liées pour espaces, photos, plans et disponibilités, ainsi que les types énumérés pour standardiser les valeurs. La structure doit supporter la complexité métier tout en restant performante.

🛠️ **Type de fichier concerné**
`.sql` - Migration Supabase

🔄 **Comportement attendu / Logique métier**
- Création des types énumérés : venue_status_enum, price_range_enum, period_type_enum, plan_type_enum, space_type_enum
- Table wedding_venues avec tous les champs métier (adresse, capacités, contact, etc.)
- Tables liées : venue_photos, venue_floor_plans, venue_spaces, venue_space_photos
- Contraintes d'intégrité et validation (dates, capacités positives)
- Champs standards : id, created_at, updated_at, created_by, updated_by

⚙️ **Interactions avec d'autres modules**
- Référence : auth.users (Console Admin)
- Utilisé par : Module Événements pour réservations
- Intègre : avec système d'audit global
- Base pour : portails client et vendor

💡 **Tips Windsurf**
- Utiliser le MCP Supabase pour exécuter directement les migrations
- Créer les types énumérés avant les tables pour éviter les erreurs
- Valider les contraintes CHECK avec des exemples concrets
- Prévoir l'extensibilité avec des champs JSONB pour métadonnées

---

### 02 - Création des tables de référence et liaisons

🎯 **But clair**
Créer les tables de référence (activity_types, equipments, venue_types, regions, countries) et les tables de liaison (venue_space_equipments, venue_space_activity_links) avec leurs relations.

🧠 **Contexte technique**
Ces tables de référence standardisent les données métier et permettent une gestion cohérente des équipements, activités et classifications. Les tables de liaison implémentent les relations many-to-many entre espaces et équipements/activités avec des métadonnées additionnelles.

🛠️ **Type de fichier concerné**
`.sql` - Migration Supabase

🔄 **Comportement attendu / Logique métier**
- Tables de référence : activity_types, equipments, equipment_categories, venue_types, regions, countries
- Tables de liaison : venue_space_equipments, venue_space_activity_links
- Contraintes d'unicité sur les noms des référentiels
- Support des hiérarchies (catégories d'équipements)
- Champs is_active pour désactivation logique
- Relations avec quantités et notes pour les liaisons

⚙️ **Interactions avec d'autres modules**
- Partagé : avec tous les modules utilisant les lieux
- Référencé : par Module Événements et portails
- Étendu : par Module Prestataires (vendors)
- Synchronisé : avec données externes potentielles

💡 **Tips Windsurf**
- Utiliser des contraintes UNIQUE pour éviter les doublons
- Prévoir des index sur les colonnes de recherche fréquente
- Implémenter des triggers pour l'audit automatique
- Structurer les JSONB pour faciliter les requêtes futures

---

### 03 - Configuration des index et optimisations de performance

🎯 **But clair**
Créer tous les index optimisés pour les requêtes fréquentes du module Lieux, incluant la recherche textuelle, les filtres géographiques et les jointures complexes.

🧠 **Contexte technique**
Les index sont cruciaux pour les performances car le module sera intensivement utilisé pour la recherche et la consultation de lieux. L'optimisation doit couvrir la recherche textuelle (GIN), les filtres multiples (composites) et les jointures fréquentes.

🛠️ **Type de fichier concerné**
`.sql` - Migration Supabase

🔄 **Comportement attendu / Logique métier**
- Index de recherche textuelle GIN sur nom et description
- Index composites pour filtres (région, capacité, prix, statut)
- Index sur clés étrangères pour jointures optimisées
- Index sur dates pour recherches de disponibilité
- Index partiels pour données actives uniquement
- Analyse des performances avec EXPLAIN

⚙️ **Interactions avec d'autres modules**
- Optimise : requêtes depuis tous les modules consommateurs
- Améliore : performances du Dashboard (métriques lieux)
- Facilite : recherches depuis portails client/vendor
- Supporte : rapports et analytics

💡 **Tips Windsurf**
- Analyser les patterns de requêtes avant de créer les index
- Utiliser EXPLAIN ANALYZE pour valider les performances
- Créer des index partiels pour optimiser l'espace
- Monitorer l'utilisation des index en production

---

### 04 - Configuration des politiques RLS et sécurité

🎯 **But clair**
Configurer les politiques Row Level Security (RLS) pour toutes les tables du module avec des règles granulaires selon les rôles utilisateur, en assurant la sécurité des données métier.

🧠 **Contexte technique**
Les politiques RLS sont essentielles car les données de lieux sont partagées entre plusieurs applications du monorepo. Elles doivent permettre la lecture publique des lieux actifs tout en restreignant les modifications aux utilisateurs autorisés.

🛠️ **Type de fichier concerné**
`.sql` - Politiques RLS Supabase

🔄 **Comportement attendu / Logique métier**
- RLS activée sur toutes les tables sensibles
- Lecture publique des lieux actifs et publiés
- Modification restreinte aux ADMIN et VENUE_CONTENT_MANAGER
- Gestion des brouillons (visibles uniquement par le créateur)
- Politiques spécifiques pour les données de référence
- Audit automatique des modifications

⚙️ **Interactions avec d'autres modules**
- Utilise : système de permissions Console Admin
- Intègre : avec auth.uid() pour identification
- Respecte : hiérarchie des rôles définie
- Protège : données sensibles inter-applications

💡 **Tips Windsurf**
- Tester les politiques avec différents rôles utilisateur
- Utiliser des fonctions helper pour éviter la duplication
- Prévoir des politiques d'urgence pour maintenance
- Documenter chaque politique avec des exemples

---

### 05 - Fonctions RPC pour la gestion des lieux

🎯 **But clair**
Créer les fonctions RPC Supabase pour la gestion complète des lieux : CRUD optimisé, recherche avancée, gestion des disponibilités et validation métier avec audit automatique.

🧠 **Contexte technique**
Ces fonctions RPC centralisent la logique métier complexe du module Lieux. Elles intègrent la validation des données, la gestion des relations, l'optimisation des requêtes et l'audit automatique. Elles constituent l'API backend du module.

🛠️ **Type de fichier concerné**
`.sql` - Fonctions RPC Supabase

🔄 **Comportement attendu / Logique métier**
- `rpc_create_venue()` : création lieu avec validation complète
- `rpc_update_venue()` : modification avec gestion des changements
- `rpc_search_venues()` : recherche avancée avec filtres et tri
- `rpc_get_venue_details()` : récupération complète avec relations
- `rpc_manage_venue_availability()` : gestion des périodes
- Validation des données métier (capacités, dates, coordonnées)
- Audit automatique de toutes les actions

⚙️ **Interactions avec d'autres modules**
- Utilise : Console Admin pour vérification permissions
- Intègre : système d'audit global
- Fournit : API pour Module Événements
- Supporte : recherches depuis portails

💡 **Tips Windsurf**
- Utiliser SECURITY DEFINER avec validation stricte
- Implémenter la validation métier côté serveur
- Gérer les transactions pour maintenir la cohérence
- Créer des fonctions helper pour la réutilisabilité

---

### 06 - Configuration Supabase Storage pour médias

🎯 **But clair**
Configurer les buckets Supabase Storage pour les photos de lieux et espaces, plans d'étage, avec politiques de sécurité, optimisation des images et gestion des quotas.

🧠 **Contexte technique**
Le stockage des médias est critique pour l'expérience utilisateur. La configuration doit supporter l'upload massif, l'optimisation automatique, la sécurité d'accès et la performance de diffusion. Les buckets doivent être organisés logiquement.

🛠️ **Type de fichier concerné**
`.sql`, `.js` - Configuration Storage et Edge Functions

🔄 **Comportement attendu / Logique métier**
- Buckets : wedding-venues-photos, venue-spaces-photos, venue-floor-plans
- Politiques d'upload restreintes aux utilisateurs autorisés
- Politiques de lecture publique pour photos publiées
- Optimisation automatique des images (resize, compression)
- Gestion des quotas et limitations de taille
- Nommage structuré des fichiers

⚙️ **Interactions avec d'autres modules**
- Utilisé : par interfaces de gestion des médias
- Intègre : avec CDN pour performance globale
- Partagé : avec portails pour affichage public
- Optimisé : pour différents formats d'écran

💡 **Tips Windsurf**
- Utiliser des Edge Functions pour l'optimisation d'images
- Implémenter des politiques de nettoyage automatique
- Configurer des transformations d'images à la volée
- Prévoir la migration vers CDN externe si nécessaire

---

## 🏗️ Section 2 : Fonctionnalités Principales

### 07 - Interface de liste et recherche des lieux

🎯 **But clair**
Créer l'interface principale de liste des lieux avec recherche avancée, filtres multiples, tri, pagination et actions en lot, en utilisant les composants ShadCN UI pour la cohérence.

🧠 **Contexte technique**
Cette interface constitue le point d'entrée principal du module. Elle doit gérer efficacement de gros volumes de données avec une UX fluide. L'implémentation utilise React Hook Form pour les filtres, TanStack Query pour la gestion des données et des composants optimisés pour les performances.

🛠️ **Type de fichier concerné**
`.tsx` - Composants React

🔄 **Comportement attendu / Logique métier**
- Liste paginée avec 20 éléments par page par défaut
- Recherche textuelle en temps réel avec debouncing
- Filtres : région, type, capacité, prix, statut
- Tri : nom, date création, capacité, région
- Actions en lot : publication, archivage, export
- Prévisualisation rapide au survol
- Navigation vers détail et édition

⚙️ **Interactions avec d'autres modules**
- Consomme : RPC de recherche et filtrage
- Utilise : composants shared-ui pour cohérence
- Intègre : avec système de permissions
- Navigue : vers formulaires de création/édition

💡 **Tips Windsurf**
- Utiliser React Hook Form pour la gestion des filtres
- Implémenter la virtualisation pour les grandes listes
- Créer des composants réutilisables pour les cartes de lieu
- Optimiser les requêtes avec mise en cache intelligente

---

### 08 - Formulaire de création et édition de lieu

🎯 **But clair**
Créer le formulaire multi-étapes de création et édition de lieu avec validation Zod, sauvegarde automatique, gestion des erreurs et interface intuitive pour tous les champs métier.

🧠 **Contexte technique**
Ce formulaire complexe gère de nombreux champs avec des validations métier spécifiques. Il utilise un wizard multi-étapes pour améliorer l'UX, Zod pour la validation côté client, et une logique de sauvegarde progressive pour éviter la perte de données.

🛠️ **Type de fichier concerné**
`.tsx`, `.ts` - Composants et schémas de validation

🔄 **Comportement attendu / Logique métier**
- Wizard en 4 étapes : Informations générales, Adresse/Localisation, Capacités/Équipements, Contact/Conditions
- Validation Zod en temps réel avec messages d'erreur contextuels
- Sauvegarde automatique en brouillon toutes les 30 secondes
- Géolocalisation automatique depuis l'adresse
- Sélection multiple pour équipements et activités
- Prévisualisation avant publication

⚙️ **Interactions avec d'autres modules**
- Utilise : RPC de création/modification de lieu
- Intègre : avec système de géolocalisation
- Sauvegarde : brouillons avec permissions appropriées
- Valide : données avec règles métier

💡 **Tips Windsurf**
- Utiliser React Hook Form avec Zod pour la validation
- Implémenter un système de sauvegarde automatique
- Créer des composants de champ réutilisables
- Gérer les états de chargement et d'erreur élégamment

---

### 09 - Page de détail et vue d'ensemble du lieu

🎯 **But clair**
Créer la page de détail complète d'un lieu avec toutes ses informations, espaces, photos, plans, disponibilités et équipements, avec navigation intuitive et actions contextuelles.

🧠 **Contexte technique**
Cette page complexe agrège toutes les données liées à un lieu. Elle utilise des onglets pour organiser l'information, un lazy loading pour les médias, et des composants optimisés pour gérer les relations complexes entre entités.

🛠️ **Type de fichier concerné**
`.tsx` - Composants React

🔄 **Comportement attendu / Logique métier**
- Vue d'ensemble avec informations principales et photo principale
- Onglets : Détails, Espaces, Photos, Plans, Disponibilités, Historique
- Galerie photos avec lightbox et zoom
- Liste des espaces avec capacités et équipements
- Calendrier de disponibilité interactif
- Actions : Éditer, Dupliquer, Archiver, Exporter
- Historique des modifications avec détails

⚙️ **Interactions avec d'autres modules**
- Consomme : RPC de récupération détaillée
- Affiche : données depuis Module Événements (réservations)
- Intègre : avec système de permissions pour actions
- Navigue : vers édition et gestion des espaces

💡 **Tips Windsurf**
- Utiliser des onglets pour organiser l'information
- Implémenter le lazy loading pour les médias volumineux
- Créer des composants modulaires pour chaque section
- Optimiser les requêtes avec des jointures efficaces

---

### 10 - Gestion des espaces et leurs caractéristiques

🎯 **But clair**
Créer l'interface de gestion des espaces d'un lieu avec CRUD complet, association d'équipements et activités, gestion des photos et validation des capacités.

🧠 **Contexte technique**
Cette interface gère la complexité des espaces avec leurs multiples relations. Elle utilise des modales pour l'édition, des drag & drop pour les photos, et des sélecteurs avancés pour les équipements et activités.

🛠️ **Type de fichier concerné**
`.tsx` - Composants React

🔄 **Comportement attendu / Logique métier**
- Liste des espaces avec aperçu des caractéristiques
- Formulaire d'espace avec validation des capacités
- Gestion des équipements avec quantités et notes
- Association des types d'activités possibles
- Upload et gestion des photos d'espace
- Calcul automatique des capacités totales du lieu
- Réorganisation par drag & drop

⚙️ **Interactions avec d'autres modules**
- Utilise : RPC de gestion des espaces
- Intègre : avec gestion des équipements
- Calcule : métriques pour Dashboard
- Valide : cohérence avec capacités du lieu

💡 **Tips Windsurf**
- Utiliser des modales pour l'édition d'espace
- Implémenter des sélecteurs multi-choix pour équipements
- Créer des validations de cohérence entre espace et lieu
- Optimiser les mises à jour en temps réel

---

### 11 - Gestion des médias (photos et plans)

🎯 **But clair**
Créer l'interface de gestion des médias avec upload drag & drop, prévisualisation, réorganisation, optimisation automatique et gestion des métadonnées.

🧠 **Contexte technique**
Cette interface critique gère l'upload et l'organisation des médias. Elle utilise Supabase Storage, implémente l'optimisation d'images côté client, et fournit une UX fluide pour la gestion de galeries complexes.

🛠️ **Type de fichier concerné**
`.tsx` - Composants React

🔄 **Comportement attendu / Logique métier**
- Upload drag & drop avec prévisualisation instantanée
- Compression et redimensionnement automatique
- Réorganisation par drag & drop avec sauvegarde d'ordre
- Édition des métadonnées (titre, description, tags)
- Définition de photo principale
- Suppression avec confirmation et nettoyage Storage
- Support des formats multiples (JPEG, PNG, WebP)

⚙️ **Interactions avec d'autres modules**
- Utilise : Supabase Storage pour stockage
- Intègre : avec optimisation d'images
- Partage : médias avec portails publics
- Optimise : pour différentes résolutions

💡 **Tips Windsurf**
- Utiliser une bibliothèque de drag & drop robuste
- Implémenter la compression d'images côté client
- Créer des composants de galerie réutilisables
- Gérer les états de progression d'upload

---

### 12 - Calendrier de disponibilité et réservations

🎯 **But clair**
Créer l'interface calendrier pour visualiser et gérer les disponibilités des lieux, avec intégration aux réservations du Module Événements et gestion des périodes de fermeture.

🧠 **Contexte technique**
Cette interface complexe affiche les disponibilités sur un calendrier interactif. Elle intègre avec le Module Événements pour les réservations, permet la gestion des fermetures, et fournit une vue d'ensemble claire des plannings.

🛠️ **Type de fichier concerné**
`.tsx` - Composants React

🔄 **Comportement attendu / Logique métier**
- Calendrier mensuel/hebdomadaire avec légende des statuts
- Affichage des périodes : ouvert, fermé, réservé, option
- Création de périodes de fermeture par sélection
- Visualisation des réservations depuis Module Événements
- Gestion des conflits et alertes
- Export des plannings en PDF
- Notifications de changements de disponibilité

⚙️ **Interactions avec d'autres modules**
- Intègre : avec Module Événements pour réservations
- Utilise : RPC de gestion des disponibilités
- Notifie : changements aux parties prenantes
- Synchronise : avec calendriers externes

💡 **Tips Windsurf**
- Utiliser une bibliothèque de calendrier performante
- Implémenter la gestion des conflits de dates
- Créer des vues multiples (mois, semaine, jour)
- Optimiser les requêtes de plages de dates

---

## 🔧 Section 3 : Fonctionnalités Secondaires

### 13 - Gestion des données de référence

🎯 **But clair**
Créer les interfaces d'administration pour gérer les données de référence (types d'activités, équipements, catégories, régions) avec CRUD complet et validation de l'impact des modifications.

🧠 **Contexte technique**
Ces interfaces permettent aux administrateurs de maintenir les référentiels métier. Elles incluent la validation de l'impact des modifications (vérification des usages), la gestion des hiérarchies et l'import/export pour la maintenance en masse.

🛠️ **Type de fichier concerné**
`.tsx` - Composants React

🔄 **Comportement attendu / Logique métier**
- Interfaces CRUD pour chaque type de référentiel
- Validation de l'impact avant suppression
- Gestion des hiérarchies (catégories d'équipements)
- Import/export CSV pour maintenance en masse
- Recherche et filtrage dans les référentiels
- Historique des modifications
- Activation/désactivation logique

⚙️ **Interactions avec d'autres modules**
- Impacte : tous les modules utilisant les référentiels
- Valide : cohérence avec données existantes
- Synchronise : avec sources externes potentielles
- Notifie : changements aux utilisateurs concernés

💡 **Tips Windsurf**
- Créer des composants génériques pour les référentiels
- Implémenter la validation d'impact avant modification
- Utiliser des modales pour l'édition rapide
- Gérer les dépendances entre référentiels

---

### 14 - Système d'import/export et migration de données

🎯 **But clair**
Implémenter un système d'import/export pour les lieux avec validation des données, mapping des champs, gestion des erreurs et rapports détaillés.

🧠 **Contexte technique**
Ce système facilite la migration de données existantes et la maintenance en masse. Il utilise des workers pour traiter de gros volumes, valide les données selon les schémas Zod, et fournit des rapports détaillés des opérations.

🛠️ **Type de fichier concerné**
`.tsx`, `.ts` - Composants et services

🔄 **Comportement attendu / Logique métier**
- Import CSV/Excel avec mapping de colonnes
- Validation des données avec rapport d'erreurs
- Prévisualisation avant import définitif
- Export avec filtres et sélection de champs
- Gestion des doublons et conflits
- Traitement en arrière-plan pour gros volumes
- Historique des imports/exports

⚙️ **Interactions avec d'autres modules**
- Utilise : schémas de validation Zod
- Intègre : avec système d'audit pour traçabilité
- Valide : cohérence avec données existantes
- Notifie : progression et résultats

💡 **Tips Windsurf**
- Utiliser des Web Workers pour le traitement lourd
- Implémenter une validation robuste des données
- Créer des templates d'import standardisés
- Gérer les opérations asynchrones avec feedback

---

### 15 - Système de duplication et templates de lieux

🎯 **But clair**
Créer un système de duplication de lieux et de création de templates pour accélérer la saisie de nouveaux lieux similaires, avec personnalisation et validation.

🧠 **Contexte technique**
Ce système améliore l'efficacité de saisie en permettant la duplication de lieux existants et la création de templates réutilisables. Il gère la copie des relations complexes et permet la personnalisation avant sauvegarde.

🛠️ **Type de fichier concerné**
`.tsx`, `.ts` - Composants et services

🔄 **Comportement attendu / Logique métier**
- Duplication complète avec espaces et équipements
- Création de templates depuis lieux existants
- Bibliothèque de templates avec catégorisation
- Personnalisation avant création définitive
- Gestion des références et identifiants uniques
- Validation des données dupliquées
- Historique des duplications

⚙️ **Interactions avec d'autres modules**
- Utilise : RPC de duplication avec validation
- Intègre : avec système de templates global
- Respecte : permissions et propriété des données
- Optimise : processus de création de lieux

💡 **Tips Windsurf**
- Implémenter une logique de copie profonde sécurisée
- Créer des assistants de personnalisation
- Gérer les références et éviter les conflits
- Optimiser les performances pour les duplications complexes

---

### 16 - Analytics et rapports sur les lieux

🎯 **But clair**
Créer un système d'analytics et de rapports pour analyser l'utilisation des lieux, les tendances de réservation, les performances et les métriques métier.

🧠 **Contexte technique**
Ce système fournit des insights métier sur l'utilisation des lieux. Il utilise des requêtes optimisées pour calculer les métriques, des graphiques interactifs pour la visualisation, et des rapports automatisés pour le suivi.

🛠️ **Type de fichier concerné**
`.tsx`, `.ts` - Composants et services d'analytics

🔄 **Comportement attendu / Logique métier**
- Métriques de performance : taux d'occupation, revenus, popularité
- Analyses géographiques et par type de lieu
- Tendances saisonnières et prévisions
- Rapports de qualité des données
- Comparaisons entre lieux et périodes
- Export des rapports en PDF/Excel
- Alertes sur métriques critiques

⚙️ **Interactions avec d'autres modules**
- Consomme : données du Module Événements
- Intègre : avec Dashboard pour métriques globales
- Utilise : système de notifications pour alertes
- Fournit : données pour optimisation métier

💡 **Tips Windsurf**
- Utiliser des requêtes optimisées pour les calculs
- Implémenter des graphiques interactifs performants
- Créer des rapports automatisés configurables
- Optimiser les performances avec mise en cache

---

## 🚀 Section 4 : Évolutions Futures

### 17 - Intégration avec services de géolocalisation avancés

🎯 **But clair**
Développer l'intégration avec des services de géolocalisation avancés pour l'enrichissement automatique des données, la validation d'adresses et la recherche géographique.

🧠 **Contexte technique**
Cette évolution enrichit automatiquement les données de lieux avec des informations géographiques précises. Elle utilise des APIs externes (Google Maps, OpenStreetMap) pour la validation, l'enrichissement et la recherche géospatiale avancée.

🛠️ **Type de fichier concerné**
`.tsx`, `.ts` - Composants et services de géolocalisation

🔄 **Comportement attendu / Logique métier**
- Validation automatique des adresses saisies
- Enrichissement avec données POI (points d'intérêt)
- Calcul de distances et temps de trajet
- Recherche géographique avec rayon
- Intégration de cartes interactives
- Géocodage inverse pour coordonnées
- Optimisation des itinéraires pour visites

⚙️ **Interactions avec d'autres modules**
- Enrichit : données de tous les modules géographiques
- Intègre : avec Module Événements pour logistique
- Utilise : APIs externes de géolocalisation
- Améliore : recherche et recommandations

💡 **Tips Windsurf**
- Utiliser des APIs de géolocalisation fiables
- Implémenter la mise en cache pour optimiser les coûts
- Créer des composants de carte réutilisables
- Gérer les limitations et quotas des APIs externes

---

### 18 - Système de recommandation intelligent

🎯 **But clair**
Implémenter un système de recommandation basé sur l'IA pour suggérer des lieux adaptés selon les critères des événements, l'historique et les préférences.

🧠 **Contexte technique**
Ce système utilise des algorithmes de machine learning pour analyser les patterns de sélection et recommander des lieux optimaux. Il intègre avec le module Console IA Automatisation pour les capacités d'apprentissage.

🛠️ **Type de fichier concerné**
`.tsx`, `.ts` - Composants et services IA

🔄 **Comportement attendu / Logique métier**
- Analyse des préférences utilisateur et historique
- Recommandations basées sur critères d'événement
- Scoring de compatibilité lieu/événement
- Apprentissage des patterns de sélection
- Suggestions alternatives et comparaisons
- Explications des recommandations
- Amélioration continue par feedback

⚙️ **Interactions avec d'autres modules**
- Utilise : Console IA Automatisation pour modèles
- Analyse : données du Module Événements
- Intègre : avec préférences utilisateur
- Améliore : processus de sélection de lieux

💡 **Tips Windsurf**
- Utiliser des modèles de recommandation éprouvés
- Implémenter l'apprentissage par renforcement
- Créer des interfaces de recommandation intuitives
- Mesurer et optimiser la pertinence des suggestions

---

### 19 - Réalité virtuelle et visites immersives

🎯 **But clair**
Développer des capacités de réalité virtuelle pour proposer des visites immersives des lieux, avec intégration de photos 360°, modèles 3D et expériences interactives.

🧠 **Contexte technique**
Cette fonctionnalité révolutionnaire permet aux clients de visiter virtuellement les lieux. Elle utilise des technologies WebXR, des photos 360°, et potentiellement des modèles 3D pour créer des expériences immersives.

🛠️ **Type de fichier concerné**
`.tsx`, `.ts` - Composants VR et services 3D

🔄 **Comportement attendu / Logique métier**
- Upload et gestion de photos 360°
- Création de parcours de visite virtuels
- Intégration de hotspots informatifs
- Support des casques VR et navigation web
- Mesure de l'engagement et analytics
- Personnalisation des visites par événement
- Partage et intégration dans portails

⚙️ **Interactions avec d'autres modules**
- Étend : système de gestion des médias
- Intègre : avec portails client pour expérience
- Utilise : données de lieux pour contextualisation
- Améliore : processus de sélection et validation

💡 **Tips Windsurf**
- Utiliser des frameworks WebXR standards
- Optimiser les performances pour différents appareils
- Créer des expériences progressives (2D → 3D → VR)
- Gérer les fichiers volumineux efficacement

---

### 20 - Blockchain et certification des lieux

🎯 **But clair**
Explorer l'utilisation de la blockchain pour certifier l'authenticité des informations de lieux, créer des NFTs de lieux uniques et assurer la traçabilité des modifications.

🧠 **Contexte technique**
Cette fonctionnalité expérimentale utilise la blockchain pour créer une certification immuable des lieux et de leurs caractéristiques. Elle permet la création de NFTs pour des lieux exclusifs et assure la traçabilité complète.

🛠️ **Type de fichier concerné**
`.tsx`, `.ts` - Composants blockchain et smart contracts

🔄 **Comportement attendu / Logique métier**
- Certification blockchain des données de lieu
- Création de NFTs pour lieux exclusifs
- Traçabilité immuable des modifications
- Vérification cryptographique des informations
- Marketplace de lieux certifiés
- Smart contracts pour réservations
- Tokens de réputation et qualité

⚙️ **Interactions avec d'autres modules**
- Complète : système d'audit traditionnel
- Intègre : avec Console IA pour validation
- Étend : vers marketplace décentralisée
- Assure : confiance et transparence

💡 **Tips Windsurf**
- Commencer par des preuves de concept simples
- Utiliser des solutions blockchain éprouvées
- Maintenir la compatibilité avec systèmes existants
- Évaluer les coûts et bénéfices régulièrement

---

### 21 - IA générative pour descriptions et contenus

🎯 **But clair**
Intégrer l'IA générative pour créer automatiquement des descriptions attractives, générer du contenu marketing et optimiser les textes selon les audiences cibles.

🧠 **Contexte technique**
Cette fonctionnalité utilise des modèles de langage avancés pour générer automatiquement du contenu de qualité. Elle s'intègre avec le module Console IA Automatisation pour accéder aux capacités génératives.

🛠️ **Type de fichier concerné**
`.tsx`, `.ts` - Composants IA générative

🔄 **Comportement attendu / Logique métier**
- Génération automatique de descriptions attractives
- Adaptation du contenu selon l'audience cible
- Optimisation SEO des textes générés
- Traduction automatique multilingue
- Génération de contenus marketing personnalisés
- Suggestions d'amélioration de contenu existant
- A/B testing des descriptions générées

⚙️ **Interactions avec d'autres modules**
- Utilise : Console IA Automatisation pour modèles
- Améliore : contenu pour portails publics
- Intègre : avec Module Marketing
- Optimise : visibilité et attractivité des lieux

💡 **Tips Windsurf**
- Utiliser des prompts optimisés pour le secteur mariage
- Implémenter la validation humaine des contenus
- Créer des templates de génération personnalisables
- Mesurer l'impact sur l'engagement et conversions

---

### 22 - Intégration IoT et capteurs intelligents

🎯 **But clair**
Développer l'intégration avec des capteurs IoT pour monitorer en temps réel les conditions des lieux (température, humidité, occupation) et automatiser la gestion.

🧠 **Contexte technique**
Cette évolution connecte les lieux physiques au système numérique via des capteurs IoT. Elle permet le monitoring en temps réel, l'automatisation des équipements et l'optimisation des conditions pour les événements.

🛠️ **Type de fichier concerné**
`.tsx`, `.ts` - Composants IoT et services de monitoring

🔄 **Comportement attendu / Logique métier**
- Intégration de capteurs de température, humidité, CO2
- Monitoring de l'occupation et flux de personnes
- Automatisation de l'éclairage et climatisation
- Alertes en temps réel sur conditions anormales
- Historique et analytics des données environnementales
- Optimisation énergétique automatique
- Intégration avec systèmes de sécurité

⚙️ **Interactions avec d'autres modules**
- Intègre : avec Module Événements pour optimisation
- Utilise : Console IA pour analyse prédictive
- Alerte : via système de notifications
- Optimise : conditions pour satisfaction client

💡 **Tips Windsurf**
- Utiliser des protocoles IoT standards (MQTT, LoRaWAN)
- Implémenter la sécurité des communications IoT
- Créer des dashboards de monitoring temps réel
- Gérer la scalabilité pour de nombreux capteurs

---

## 📊 Matrice de Priorités et Dépendances

| Prompt | Priorité | Dépendances | Durée Estimée | Complexité |
|--------|----------|-------------|---------------|------------|
| 01-06  | P0       | Console Admin, Monorepo | 4-5 jours     | Élevée     |
| 07-12  | P1       | 01-06       | 6-8 jours     | Élevée     |
| 13-16  | P1       | 07-12       | 4-5 jours     | Moyenne    |
| 17-22  | P2-P3    | 13-16       | 3-5 semaines  | Très élevée |

---

## 🔄 Ordre d'Exécution Recommandé

### **Phase 1 - Infrastructure Lieux (Semaines 1-2)**
Prompts 01-06 : Tables, RLS, RPC, Storage

### **Phase 2 - Interfaces Principales (Semaines 3-4)**
Prompts 07-12 : Liste, formulaires, détails, espaces, médias, calendrier

### **Phase 3 - Fonctionnalités Avancées (Semaine 5)**
Prompts 13-16 : Référentiels, import/export, templates, analytics

### **Phase 4 - Évolutions Futures (Versions ultérieures)**
Prompts 17-22 : Géolocalisation, IA, VR, Blockchain, IoT

---

## ⚠️ Points d'Attention Critiques

### **Complexité des Relations**
- Gestion des relations complexes entre lieux, espaces, équipements et activités
- Maintien de la cohérence des données lors des modifications
- Performance des requêtes avec jointures multiples
- Validation de l'intégrité référentielle

### **Gestion des Médias**
- Optimisation du stockage et de la diffusion des images
- Gestion des quotas et limitations de Supabase Storage
- Performance de l'upload et du traitement d'images
- Sécurité et contrôle d'accès aux médias

### **Performance et Scalabilité**
- Optimisation des requêtes de recherche et filtrage
- Gestion de la pagination pour de gros volumes
- Cache intelligent pour les données fréquemment consultées
- Index optimisés pour les patterns de requête

### **Intégration Inter-Modules**
- Coordination avec Module Événements pour les réservations
- Partage des données avec les portails client et vendor
- Synchronisation des disponibilités en temps réel
- Maintien de la cohérence des référentiels partagés

---

*Document généré par Manus AI - Expert en transformation de cahiers des charges pour Windsurf*

